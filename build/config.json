{
  "domains": [
    "search.volunteerscotland.net",
    "volunteerscotland-search.local"
  ],
  "routes": [
    {
      "name": "home",
      "pattern": "/",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Volunteer Scotland Search | Help Make a Difference through Volunteering"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "opportunitySupplimentary",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "recently_viewed",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_recently-viewed"
              },
              {
                "name": "favourites_current",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_favourites-current"
              },
              {
                "name": "home_latest",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_home-latest"
              },
              {
                "name": "home_latest_personalised",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_home-latest-personalised"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "posts",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "tfn_latest",
                "index": "web-content-production",
                "type": "tfn-legacy-post-news,tfn-legacy-feature",
                "template": ">context.metaData.handlebars.queries.posts_tfn-latest"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_home",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "four_oh_four",
      "pattern": "/404",
      "debug": false,
      "defaultStatusCode": 404,
      "metaData": {
        "hideSearch": true,
        "title": "404: Not Found - Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "not_found",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "volunteerscotland-page",
              "template": ">context.metaData.handlebars.queries.pages_not-found"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.errors_404",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "five_hundred",
      "pattern": "/500",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "500: Server error - Volunteer Scotland Search"
      },
      "tasks": [
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.errors_500",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "robots",
      "pattern": "/robots.txt",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "data"
              ]
            },
            "output": "body",
            "layouts": {
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.robots"
                },
                "contentType": "text/plain"
              }
            }
          }
        }
      ]
    },
    {
      "name": "humans",
      "pattern": "/humans.txt",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "data"
              ]
            },
            "output": "body",
            "layouts": {
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.humans"
                },
                "contentType": "text/plain"
              }
            }
          }
        }
      ]
    },
    {
      "name": "detect-legacy-user",
      "pattern": "/detect-legacy-user",
      "debug": false,
      "tasks": [
        {
          "name": "getUser",
          "taskModule": "firebaseGetUser",
          "config": {
            "appName": "volunteerscotland-search",
            "userIdentifier": ">request.params.query.email"
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "template": "{ \"legacy_user\" : {{#unless @root.data.getUser}}false{{else}}{{{stringify (compare @root.data.getUser.metadata.lastSignInTime '===' null)}}}{{/unless}} }",
            "output": "body",
            "parseJson": true
          }
        }
      ]
    },
    {
      "name": "sign_in",
      "pattern": "/sign-in",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Sign in - Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_sign-in"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "sign_out",
      "pattern": "/sign-out",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Sign out - Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_sign-out"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "sign_up",
      "pattern": "/sign-up",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Sign up - Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.allNewsletterInfo",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_sign-up"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "delete-user",
      "pattern": "/delete-user",
      "debug": false,
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "delete_user": ">context.metaData.handlebars.queries.notifications_delete-user"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_delete-user"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "reset_password",
      "pattern": "/reset-password",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Reset password - Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.noAuthOnly",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_reset-password"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "upgrade_token",
      "pattern": "/upgrade-token",
      "tasks": [
        {
          "name": "auth",
          "taskModule": "firebaseGetSession",
          "config": {
            "tokenPath": "request.params.query.token",
            "cookieName": "gi_cookie",
            "cookieOptions": {
              "maxAge": 1209600000,
              "secure": true,
              "path": "/"
            },
            "appName": "volunteerscotland-search"
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "{{{safeStringify @root.data.auth}}}",
            "parseJson": true
          }
        }
      ]
    },
    {
      "name": "geo-lookup",
      "pattern": "/geo-lookup",
      "debug": false,
      "doNotZip": true,
      "tasks": [
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "geo_lookup",
              "type": "os_place,postcode,outcode",
              "template": ">context.metaData.handlebars.queries.geo-lookup"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "data"
              ]
            },
            "output": "body",
            "layouts": {
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.geo-lookup"
                },
                "contentType": "application/json; charset=utf-8"
              }
            }
          }
        }
      ]
    },
    {
      "name": "opportunities_in_redirect",
      "pattern": "/opportunities-in/area",
      "debug": false,
      "tasks": [
        {
          "name": "detect_area",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": "/opportunities-in/{{#if request.params.query.la}}{{{request.params.query.la}}}{{else}}{{request.params.query.search_la}}{{/if}}{{{request.params.uri.search}}}"
          }
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">data.detect_area",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "opportunities_in",
      "pattern": "/opportunities-in/:local_authority",
      "debug": false,
      "metaData": {
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "detailed_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_opportunities-in-list"
              },
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_opportunities-in-map"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "rss",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "rss",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "rss": {
                "layout": ">context.metaData.handlebars.layouts.rss",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_search-rss-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_search-rss"
                },
                "contentType": "application/rss+xml"
              },
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_opportunities-in",
                  "foot": ">context.metaData.handlebars.templates.opportunities_search-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_search-json"
                },
                "contentType": "application/json"
              }
            }
          }
        }
      ]
    },
    {
      "name": "browse",
      "pattern": "/browse",
      "debug": false,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "opportunitySupplimentary",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "types",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_types"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_browse",
                  "foot": "",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity_search",
      "debug": false,
      "pattern": "/search",
      "acceptedVerbs": "GET",
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        {
          "name": "location_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "la_results",
                "index": "geo_lookup",
                "type": "es_district",
                "template": ">context.metaData.handlebars.queries.opportunities_local-authority-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "detailed_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-list"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.termsMaps",
        "context.metaData.commonTasks.widgetAnalytics",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "rss",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "rss",
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_search",
                  "foot": ">context.metaData.handlebars.templates.opportunities_search-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              },
              "rss": {
                "layout": ">context.metaData.handlebars.layouts.rss",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_search-rss-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_search-rss"
                },
                "contentType": "application/rss+xml"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_search-json"
                },
                "contentType": "application/json"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_widget_results-list"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity_map",
      "debug": false,
      "pattern": "/map",
      "acceptedVerbs": "GET",
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "location_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "locations_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-map-locations"
              },
              {
                "name": "home_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-map-home"
              },
              {
                "name": "la_results",
                "index": "geo_lookup",
                "type": "es_district",
                "template": ">context.metaData.handlebars.queries.opportunities_local-authority-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-map"
              },
              {
                "name": "areas_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-map-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.termsMaps",
        "context.metaData.commonTasks.widgetAnalytics",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_map",
                  "foot": ">context.metaData.handlebars.templates.opportunities_map-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_search-json"
                },
                "contentType": "application/json"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_widget_results-map"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity",
      "debug": true,
      "acceptedVerbs": "GET",
      "pattern": {
        "slug": "/opportunity/:id(/:junk)",
        "id": "/opp/:id"
      },
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "opportunitySupplimentary",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "types",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_types"
              },
              {
                "name": "related",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_related"
              },
              {
                "name": "not_found",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.pages_not-found"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "posts",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "tfn_latest",
                "index": "web-content-production",
                "type": "tfn-legacy-post-news,tfn-legacy-post-blog,tfn-legacy-feature",
                "template": ">context.metaData.handlebars.queries.posts_tfn-latest"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.widgetAnalytics",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_opportunity-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_opportunity",
                  "foot": ">context.metaData.handlebars.templates.opportunities_opportunity-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.opportunities_widget_opportunity"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity_pdf",
      "debug": true,
      "pattern": "/opportunity-pdf/:id(/:junk)",
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "generatePdf",
          "renderer": "jsone",
          "config": {
            "definitionTemplate": {
              "pageSize": "A4",
              "pageMargins": [
                30,
                120,
                30,
                100
              ],
              "styles": {
                "title": {
                  "fontSize": 20,
                  "bold": true
                },
                "subtitle": {
                  "fontSize": 16
                },
                "h1": {
                  "fontSize": 18,
                  "bold": true,
                  "margin": [
                    0,
                    10,
                    0,
                    5
                  ]
                },
                "h2": {
                  "fontSize": 16,
                  "bold": true,
                  "margin": [
                    0,
                    10,
                    0,
                    5
                  ]
                },
                "h3": {
                  "fontSize": 14,
                  "bold": true
                }
              },
              "content": [
                {
                  "_map": {
                    "_eval": "data.primaryResponse.hits.hits"
                  },
                  "each(x)": [
                    {
                      "style": "h1",
                      "text": {
                        "_eval": "x._source.title"
                      }
                    },
                    {
                      "style": "h2",
                      "text": "Summary"
                    },
                    {
                      "text": {
                        "_eval": "x._source.description"
                      }
                    }
                  ]
                },
                {
                  "columns": [
                    {
                      "width": "33%",
                      "text": [
                        {
                          "text": "Contact Us\n",
                          "fontSize": 14,
                          "bold": true
                        },
                        {
                          "text": "@scvo.org.uk\n",
                          "link": "mailto:@scvo.org.uk",
                          "fontSize": 10
                        },
                        {
                          "text": "\n",
                          "link": "tel:",
                          "fontSize": 10
                        },
                        {
                          "text": "@",
                          "link": "https://twitter.com/",
                          "fontSize": 10
                        }
                      ]
                    },
                    {
                      "width": "66%",
                      "text": [
                        {
                          "text": "About Us\n",
                          "fontSize": 14,
                          "bold": true
                        },
                        {
                          "text": "Volunteer Scotland Search is run in partnership between Volunteer Scotland and the Scottish Council for Voluntary Organisations.\n",
                          "fontSize": 10
                        },
                        {
                          "text": "This website is maintained by the Scottish Council for Voluntary Organisations the umbrella body for Scotland\"s voluntary sector.\n",
                          "fontSize": 10
                        }
                      ]
                    }
                  ],
                  "margin": [
                    30,
                    240
                  ]
                }
              ]
            },
            "headerTemplate": [
              {
                "_if": "currentPage > 1",
                "then": {
                  "canvas": [
                    {
                      "type": "line",
                      "x1": -15,
                      "y1": 5,
                      "x2": 550,
                      "y2": 5,
                      "lineWidth": 1
                    }
                  ],
                  "margin": [
                    30,
                    5
                  ]
                }
              }
            ],
            "footerTemplate": [
              {
                "_if": "currentPage > 1",
                "then": {
                  "canvas": [
                    {
                      "type": "line",
                      "x1": -15,
                      "y1": 5,
                      "x2": 550,
                      "y2": 5,
                      "lineWidth": 1
                    }
                  ],
                  "margin": [
                    30,
                    5
                  ]
                }
              },
              {
                "_if": "currentPage > 1",
                "then": {
                  "text": "© 2019 The Scottish Council for Voluntary Organisations (SCVO) is a Scottish Charitable Incorporated Organisation. Registration number SC003558.",
                  "fontSize": 10,
                  "margin": [
                    30,
                    5
                  ]
                }
              },
              {
                "_if": "currentPage > 1",
                "then": {
                  "columns": [
                    {
                      "width": "*",
                      "text": "Page: ${currentPage} of ${pageCount}",
                      "fontSize": 10
                    },
                    {
                      "width": "*",
                      "text": {
                        "_eval": "jsone.dateFormat('dddd, Do MMMM YYYY, HH:mm:ss')"
                      },
                      "fontSize": 10,
                      "alignment": "right"
                    }
                  ],
                  "margin": [
                    30,
                    5
                  ]
                }
              }
            ]
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity_register_interest",
      "debug": false,
      "pattern": "/register-interest/:id(/:junk)",
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_register-interest-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_register-interest",
                  "foot": ">context.metaData.handlebars.templates.opportunities_register-interest-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_opportunity_map_data",
      "debug": false,
      "pattern": "/map_data",
      "metaData": {
        "hideSearch": true
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-map"
              },
              {
                "name": "map_aggregations",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_search-aggregations"
              },
              {
                "name": "map_regions",
                "index": "geo",
                "type": "local-authority-district",
                "template": ">context.metaData.handlebars.queries.map-regions"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": ">context.metaData.handlebars.templates.opportunities_map-data",
            "parseJson": true
          }
        }
      ]
    },
    {
      "name": "volunteering_event_search",
      "pattern": "/events/search",
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        {
          "name": "location_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "la_results",
                "index": "geo_lookup",
                "type": "es_district",
                "template": ">context.metaData.handlebars.queries.events_local-authority-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "detailed_results",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_search-list"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.eventSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "rss",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "rss",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "rss": {
                "layout": ">context.metaData.handlebars.layouts.rss",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.events_search-rss-head-tags",
                  "body": ">context.metaData.handlebars.templates.events_search-rss"
                },
                "contentType": "application/rss+xml"
              },
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.events_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.events_search",
                  "foot": ">context.metaData.handlebars.templates.events_search-foot",
                  "sidebar": ">context.metaData.handlebars.templates.events_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.events_search-json"
                },
                "contentType": "application/json"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_event_map",
      "pattern": "/events/map",
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "location_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "locations_results",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_search-map-locations"
              },
              {
                "name": "home_results",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_search-map-home"
              },
              {
                "name": "la_results",
                "index": "geo_lookup",
                "type": "es_district",
                "template": ">context.metaData.handlebars.queries.events_local-authority-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_search-map"
              },
              {
                "name": "areas_results",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_search-map-areas"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.eventSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=rss",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "rss",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "rss": {
                "layout": ">context.metaData.handlebars.layouts.rss",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.events_search-rss-head-tags",
                  "body": ">context.metaData.handlebars.templates.events_search-rss"
                },
                "contentType": "application/rss+xml"
              },
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.events_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.events_map",
                  "foot": ">context.metaData.handlebars.templates.events_map-foot",
                  "sidebar": ">context.metaData.handlebars.templates.events_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.events_search-json"
                },
                "contentType": "application/json"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_event",
      "pattern": {
        "slug": "/event/:id(/:junk)",
        "id": "/e/:id"
      },
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-event",
              "template": ">context.metaData.handlebars.queries.events_event"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "eventSupplimentary",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "types",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_types"
              },
              {
                "name": "related",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.events_related"
              },
              {
                "name": "not_found",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.pages_not-found"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "posts",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "tfn_latest",
                "index": "web-content-production",
                "type": "tfn-legacy-post-news,tfn-legacy-post-blog,tfn-legacy-feature",
                "template": ">context.metaData.handlebars.queries.posts_tfn-latest"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.events_event-head-tags",
                  "body": ">context.metaData.handlebars.templates.events_event",
                  "foot": ">context.metaData.handlebars.templates.events_event-foot",
                  "sidebar": ">context.metaData.handlebars.templates.events_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_organisation_search",
      "pattern": "/organisations/search",
      "debug": false,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "detailed_results",
                "index": "web-content-production",
                "type": "milo-volunteering-organisation",
                "template": ">context.metaData.handlebars.queries.organisations_search-list"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_search",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_results-list",
                  "filter": "widget"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_organisation_map",
      "pattern": "/organisations/map",
      "debug": false,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-volunteering-organisation",
                "template": ">context.metaData.handlebars.queries.organisations_search-map"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_map",
                  "foot": ">context.metaData.handlebars.templates.organisations_map-foot",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_search-json"
                },
                "contentType": "application/json"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_results-map"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "volunteering_organisation",
      "pattern": "/organisation/:id(/:junk)",
      "debug": false,
      "defaultParams": {
        "context": "detail"
      },
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-organisation",
              "template": ">context.metaData.handlebars.queries.organisations_organisation"
            }
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.opportunitySupplimentary",
        {
          "name": "organisationOpportunities",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "events_upcoming",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.opportunities_organisation-events-upcoming"
              },
              {
                "name": "opportunities_open",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_organisation-opportunities-open"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "goodhq",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "posts",
                "index": "web-content-production",
                "type": "goodhq-post",
                "template": ">context.metaData.handlebars.queries.goodhq_posts"
              },
              {
                "name": "reviews",
                "index": "web-content-production",
                "type": "goodhq-review",
                "template": ">context.metaData.handlebars.queries.goodhq_reviews"
              },
              {
                "name": "volunteering",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.goodhq_volunteering"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_organisation-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_organisation",
                  "foot": "",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_organisation"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "organisation_search",
      "pattern": "/organisations-all/search",
      "debug": false,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "detailed_results",
                "index": "web-content-production",
                "type": "milo-organisation",
                "template": ">context.metaData.handlebars.queries.organisations_search-list"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_search",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_results-list",
                  "filter": "widget"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "organisation_map",
      "pattern": "/organisations-all/map",
      "debug": false,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "search_data",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "map_results",
                "index": "web-content-production",
                "type": "milo-organisation",
                "template": ">context.metaData.handlebars.queries.organisations_search-map"
              }
            ]
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                {
                  "in": [
                    "view=json",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "data",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_search-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_map",
                  "foot": ">context.metaData.handlebars.templates.organisations_map-foot",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "data": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_search-json"
                },
                "contentType": "application/json"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_results-map"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "organisation",
      "pattern": "/organisation-all/:id(/:junk)",
      "debug": false,
      "defaultParams": {
        "context": "detail"
      },
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.organisationsWithOpportunities",
        {
          "name": "primaryResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-organisation",
              "template": ">context.metaData.handlebars.queries.organisations_organisation"
            }
          },
          "renderer": "handlebars"
        },
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.opportunitySupplimentary",
        {
          "name": "organisationOpportunities",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "events_upcoming",
                "index": "web-content-production",
                "type": "milo-volunteering-event",
                "template": ">context.metaData.handlebars.queries.opportunities_organisation-events-upcoming"
              },
              {
                "name": "opportunities_open",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_organisation-opportunities-open"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "goodhq",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "posts",
                "index": "web-content-production",
                "type": "goodhq-post",
                "template": ">context.metaData.handlebars.queries.goodhq_posts"
              },
              {
                "name": "reviews",
                "index": "web-content-production",
                "type": "goodhq-review",
                "template": ">context.metaData.handlebars.queries.goodhq_reviews"
              },
              {
                "name": "volunteering",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.goodhq_volunteering"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                {
                  "in": [
                    "view=widget",
                    {
                      "var": "request.fullUrl"
                    }
                  ]
                },
                "widget",
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.organisations_organisation-head-tags",
                  "body": ">context.metaData.handlebars.templates.organisations_organisation",
                  "foot": "",
                  "sidebar": ">context.metaData.handlebars.templates.organisations_search-form"
                },
                "contentType": "text/html"
              },
              "widget": {
                "layout": ">context.metaData.handlebars.layouts.data",
                "parts": {
                  "content": ">context.metaData.handlebars.templates.organisations_widget_organisation"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "newsletters",
      "pattern": "/newsletters",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Newsletters - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.allNewsletterInfo",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.getRawUserSubscriptions",
        "context.metaData.commonTasks.userNewsletterSubscriptions",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_newsletters",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "searches",
      "pattern": "/searches",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "My saved searches - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.searchesData",
        {
          "name": "email_days",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.partials.email_days"
          }
        },
        "context.metaData.commonTasks.opportunitySupplimentary",
        "context.metaData.commonTasks.termsMaps",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_saved-searches",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "delete-search",
      "pattern": "/delete-search",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "delete_search": ">context.metaData.handlebars.queries.notifications_delete-search"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">request.headers.referer"
          }
        }
      ]
    },
    {
      "name": "save-search",
      "pattern": "/save-search",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "add_saved_search_parameters": ">context.metaData.handlebars.queries.notifications_add-saved-search"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "searchUrl",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": "/search{{> query_search}}"
          }
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">data.searchUrl",
            "statusCode": 307
          }
        }
      ]
    },
    {
      "name": "stop-all-emails",
      "pattern": "/stop-all-emails",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "stop_all_emails": ">context.metaData.handlebars.queries.notifications_stop-all-emails"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">request.headers.referer"
          }
        }
      ]
    },
    {
      "name": "toggle-shortlist-subscription",
      "pattern": "/toggle-shortlist-subscription",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "toggle_subscription": ">context.metaData.handlebars.queries.notifications_toggle-shortlist-subscription"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Toggled subscription"
          }
        }
      ]
    },
    {
      "name": "toggle-subscription",
      "pattern": "/toggle-subscription",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "toggle_subscription": ">context.metaData.handlebars.queries.notifications_toggle-subscription"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">request.headers.referer"
          }
        }
      ]
    },
    {
      "name": "update-email-preferences",
      "pattern": "/update-email-preferences",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "update_email_prefs": ">context.metaData.handlebars.queries.notifications_update-email-preferences"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Toggled preferences"
          }
        }
      ]
    },
    {
      "name": "favourites",
      "pattern": "/favourites",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "My favourites - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.favouritesData",
        {
          "name": "favourite_opportunities",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6",
              "log": "warning"
            },
            "queryTemplates": [
              {
                "name": "current",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_favourites-current"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_favourites",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "notes",
      "pattern": "/notes",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "My notes - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.favouritesData",
        {
          "name": "notes_opportunities",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "open",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_notes-open"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_notes",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "account",
      "pattern": "/account",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "My account - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.profileInfoData",
        "context.metaData.commonTasks.getRawUserSubscriptions",
        "context.metaData.commonTasks.userNewsletterSubscriptions",
        {
          "name": "email_days",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.partials.email_days"
          }
        },
        {
          "name": "export_user_data",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.templates.account_export-user-data"
          }
        },
        {
          "name": "opportunity_lookup",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.account_favourites"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.account_account",
                  "foot": ">context.metaData.handlebars.templates.account_account-foot",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "export-user-data",
      "pattern": "/export-user-data",
      "debug": false,
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.searchesData",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "opportunity_lookup",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.account_favourites"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "export_user_data",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": ">context.metaData.handlebars.templates.account_export-user-data"
          }
        }
      ]
    },
    {
      "name": "import-user-data",
      "pattern": "/import-user-data",
      "debug": false,
      "acceptedVerbs": "POST",
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notes",
          "taskModule": "firebaseRtbSet",
          "renderer": "handlebars",
          "config": {
            "appName": "volunteerscotland-search",
            "pathTemplate": "/notes/{{default data.auth.uid 'no-such-profile'}}",
            "setOrUpdate": "update",
            "dataTemplate": ">context.metaData.handlebars.templates.account_import-notes"
          }
        },
        {
          "name": "dynamic_notifications_task",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "parseJson": true,
            "template": ">context.metaData.handlebars.templates.account_dynamic-notifications-task"
          }
        },
        "data.dynamic_notifications_task",
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Imported"
          }
        }
      ]
    },
    {
      "name": "registered-interest",
      "pattern": "/registered-interest",
      "debug": false,
      "metaData": {
        "hideSearch": true,
        "title": "Registered interest - Volunteer Scotland Search"
      },
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        {
          "name": "registered_interest_opportunities",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": [
              {
                "name": "current",
                "index": "web-content-production",
                "type": "milo-volunteering-opportunity",
                "template": ">context.metaData.handlebars.queries.opportunities_registered-interest-current"
              }
            ]
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.opportunities_registered-interest",
                  "sidebar": ">context.metaData.handlebars.templates.account_sidebar"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "add-newsletter-subscription",
      "pattern": "/add-newsletter-subscription",
      "debug": false,
      "acceptedVerbs": "POST",
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.updateProfile",
        {
          "name": "templateOptsOn",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "template": ">context.metaData.handlebars.templates.newsletters_add-subscriptions",
            "output": "data",
            "parseJson": true
          }
        },
        {
          "name": "add-subscriptions",
          "taskModule": "request",
          "config": {
            "optionsTemplates": ">data.templateOptsOn"
          },
          "renderer": "handlebars"
        },
        {
          "name": "templateOptsOff",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "template": ">context.metaData.handlebars.templates.newsletters_remove-subscriptions",
            "output": "data",
            "parseJson": true
          }
        },
        {
          "name": "remove-subscriptions",
          "taskModule": "request",
          "config": {
            "optionsTemplates": ">data.templateOptsOff"
          },
          "renderer": "handlebars"
        },
        {
          "name": "reroute-redirect",
          "taskModule": "reroute",
          "config": {
            "if": [
              {
                "==": [
                  {
                    "var": "request.params.query.redirect"
                  },
                  "home"
                ]
              },
              "redirect-home",
              null
            ]
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Added Subscription"
          }
        }
      ]
    },
    {
      "name": "remove-newsletter-subscription",
      "pattern": "/remove-newsletter-subscription/:list_ids",
      "debug": false,
      "acceptedVerbs": "GET",
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "templateOpts",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "template": ">context.metaData.handlebars.templates.newsletters_remove-subscriptions",
            "output": "data",
            "parseJson": true
          }
        },
        {
          "name": "remove-subscription",
          "taskModule": "request",
          "config": {
            "optionsTemplates": ">data.templateOpts"
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Removed Subscription"
          }
        }
      ]
    },
    {
      "name": "privacy",
      "pattern": "/privacy",
      "metaData": {
        "hideSearch": true,
        "title": "Privacy policy – Volunteer Scotland"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.pages_privacy",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "cookies",
      "pattern": "/cookies",
      "metaData": {
        "hideSearch": true,
        "title": "Cookies policy – Volunteer Scotland"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.pages_cookies",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "accessibility",
      "pattern": "/accessibility",
      "metaData": {
        "hideSearch": true,
        "title": "Accessibility – Volunteer Scotland"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.pages_accessibility",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "terms",
      "pattern": "/terms",
      "metaData": {
        "hideSearch": true,
        "title": "Terms and conditions – Volunteer Scotland"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.pages_terms",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "save-notes",
      "pattern": "/save-notes",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notes",
          "taskModule": "firebaseRtbSet",
          "renderer": "handlebars",
          "config": {
            "appName": "volunteerscotland-search",
            "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-profile'}}/notes/{{request.body.id}}",
            "setOrUpdate": "set",
            "dataTemplate": "{{{stringify (stripTags @root.request.body.notes)}}}"
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Saved"
          }
        }
      ]
    },
    {
      "name": "delete-notes",
      "pattern": "/delete-notes",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notes",
          "taskModule": "firebaseRtbSet",
          "renderer": "handlebars",
          "config": {
            "appName": "volunteerscotland-search",
            "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-profile'}}/{{request.body.id}}",
            "setOrUpdate": "set",
            "dataTemplate": "null"
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Deleted"
          }
        }
      ]
    },
    {
      "name": "add-to-favourites",
      "pattern": "/add-to-favourites",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "add_to_favourites": ">context.metaData.handlebars.queries.notifications_add-to-favourites"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Added {{@root.request.params.query.id}}"
          }
        }
      ]
    },
    {
      "name": "remove-from-favourites",
      "pattern": "/remove-from-favourites",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "remove_from_favourites": ">context.metaData.handlebars.queries.notifications_remove-from-favourites"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Removed {{@root.request.params.query.id}}"
          }
        }
      ]
    },
    {
      "name": "add-to-registered-interest",
      "pattern": "/add-to-registered-interest",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "emailTypes",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.templates.email_email-types",
            "parseJson": true
          }
        },
        {
          "name": "send_email",
          "taskModule": "mailgun",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "parseJson": true,
            "template": ">context.metaData.handlebars.templates.email-out"
          }
        },
        {
          "name": "reroute-no-login",
          "taskModule": "reroute",
          "config": {
            "if": [
              {
                "==": [
                  {
                    "var": "data.auth.uid"
                  },
                  null
                ]
              },
              "redirect-to-registered-interest",
              null
            ]
          }
        },
        {
          "name": "sql-register-interest",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "add_to_registered_interest": ">context.metaData.handlebars.queries.notifications_add-to-registered-interest"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "reroute-no-profile-save",
          "taskModule": "reroute",
          "config": {
            "if": [
              {
                "or": [
                  {
                    "==": [
                      {
                        "var": "request.body.store_profile_info"
                      },
                      null
                    ]
                  },
                  {
                    "==": [
                      {
                        "var": "request.body.store_profile_info"
                      },
                      false
                    ]
                  }
                ]
              },
              "redirect-to-registered-interest",
              null
            ]
          }
        },
        "context.metaData.commonTasks.storeProfile",
        {
          "name": "reroute-all-save",
          "taskModule": "reroute",
          "config": {
            "if": [
              true,
              "redirect-to-registered-interest",
              "redirect-to-registered-interest"
            ]
          }
        }
      ]
    },
    {
      "name": "store-profile-info",
      "pattern": "/store-profile-info",
      "debug": false,
      "acceptedVerbs": "POST",
      "defaultParams": {
        "context": "results"
      },
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        "context.metaData.commonTasks.storeProfile",
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "{\"success\": true}"
          }
        }
      ]
    },
    {
      "name": "delete-profile-info",
      "pattern": "/delete-profile-info",
      "debug": false,
      "acceptedVerbs": "POST",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "profile-info",
          "taskModule": "firebaseRtbSet",
          "renderer": "handlebars",
          "config": {
            "appName": "volunteerscotland-search",
            "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-profile'}}/profile",
            "setOrUpdate": "set",
            "dataTemplate": "null"
          }
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Deleted"
          }
        }
      ]
    },
    {
      "name": "remove-from-registered-interest",
      "pattern": "/remove-from-registered-interest",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.authRequired",
        {
          "name": "notifications",
          "taskModule": "mysql",
          "config": {
            "connectionName": "volunteerscotland_notifications",
            "queryTemplates": {
              "remove_from_registered_interest": ">context.metaData.handlebars.queries.notifications_remove-from-registered-interest"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": "Removed {{@root.request.params.query.id}}"
          }
        }
      ]
    },
    {
      "name": "widget_oportunities",
      "pattern": "/widget/opportunities",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.widgetAnalytics",
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": ">context.metaData.handlebars.templates.opportunities_widget_search"
          }
        }
      ]
    },
    {
      "name": "widget_organisations",
      "pattern": "/widget/organisations-all",
      "debug": false,
      "acceptedVerbs": "GET",
      "tasks": [
        "context.metaData.commonTasks.organisationsWithOpportunities",
        "context.metaData.commonTasks.organisationSupplimentary",
        "context.metaData.commonTasks.widgetAnalytics",
        {
          "name": "destination",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "body",
            "template": ">context.metaData.handlebars.templates.organisations_widget_search"
          }
        }
      ]
    },
    {
      "name": "widget_builder",
      "debug": true,
      "pattern": "/widget",
      "metaData": {
        "hideSearch": true,
        "title": "Search widget builder – Volunteer Scotland"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_widget_builder-head-tags",
                  "body": ">context.metaData.handlebars.templates.pages_widget_builder",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "email_updates",
      "pattern": "/email-updates",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/account",
            "statusCode": 301
          }
        }
      ]
    },
    {
      "name": "email_preferences",
      "pattern": "/email-preferences",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/account",
            "statusCode": 301
          }
        }
      ]
    },
    {
      "name": "saved_searches",
      "pattern": "/saved-searches",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/searches",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "profile",
      "pattern": "/profile",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/account",
            "statusCode": 301
          }
        }
      ]
    },
    {
      "name": "password-reset-handler",
      "pattern": "/__/auth/action",
      "tasks": [
        {
          "name": "generate_url",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": "https://auth.search.volunteerscotland.net{{{@root.request.url.path}}}"
          }
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">data.generate_url",
            "statusCode": 301
          }
        }
      ]
    },
    {
      "name": "test-ab-modify",
      "pattern": "/test-ab/modify/:id(/:junk)",
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "trueResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "primaryResponse",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.templates.opportunities_opportunity-test-or-nothing",
            "parseJson": true
          }
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_register-interest-head-tags-test",
                  "body": ">context.metaData.handlebars.templates.opportunities_register-interest-test",
                  "foot": ">context.metaData.handlebars.templates.opportunities_register-interest-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "test-ab-redirect",
      "pattern": "/test-ab/redirect/:id(/:junk)",
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "trueResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "primaryResponse",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.templates.opportunities_opportunity-test-or-nothing",
            "parseJson": true
          }
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_register-interest-head-tags-test",
                  "body": ">context.metaData.handlebars.templates.opportunities_register-interest-test",
                  "foot": ">context.metaData.handlebars.templates.opportunities_register-interest-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "test-ab-variant",
      "pattern": "/test-ab/variant/:id(/:junk)",
      "debug": true,
      "metaData": {
        "title": "Volunteer Scotland Search",
        "sidebarButton": {
          "icon": "search",
          "tooltip": "Search",
          "classes": "hide-md hide-lg"
        }
      },
      "defaultParams": {
        "context": "detail"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        "context.metaData.commonTasks.favouritesData",
        "context.metaData.commonTasks.registeredInterestData",
        "context.metaData.commonTasks.profileInfoData",
        {
          "name": "trueResponse",
          "taskModule": "elasticsearch",
          "config": {
            "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
            "elasticsearchConfig": {
              "apiVersion": "5.6"
            },
            "queryTemplates": {
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_opportunity"
            }
          },
          "renderer": "handlebars"
        },
        {
          "name": "primaryResponse",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": ">context.metaData.handlebars.templates.opportunities_opportunity-test-or-nothing",
            "parseJson": true
          }
        },
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.opportunities_register-interest-head-tags-test",
                  "body": ">context.metaData.handlebars.templates.opportunities_register-interest-test-variant",
                  "foot": ">context.metaData.handlebars.templates.opportunities_register-interest-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "email-display",
      "pattern": "/email-display",
      "acceptedVerbs": "POST",
      "debug": false,
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.email_email-display",
                  "foot": ">context.metaData.handlebars.templates.opportunities_register-interest-foot",
                  "sidebar": ">context.metaData.handlebars.templates.opportunities_search-form"
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    },
    {
      "name": "redirect-events",
      "pattern": "/events",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/events/search",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "redirect-organisations",
      "pattern": "/organisations",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/organisations/search",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "redirect-home",
      "pattern": "/redirect-home",
      "tasks": [
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": "/",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "redirect-to-registered-interest",
      "pattern": "/redirect-to-registered-interest",
      "tasks": [
        {
          "name": "generate_url",
          "taskModule": "render",
          "renderer": "handlebars",
          "config": {
            "output": "data",
            "template": "{{#if data.auth}}registered-interest?id={{{request.body.opportunity_id}}}{{else}}register-interest/{{request.body.opportunity_id}}/{{request.body.opportunity_title_slug}}?applied=true{{/if}}"
          }
        },
        {
          "name": "destination",
          "taskModule": "redirect",
          "config": {
            "location": ">data.generate_url",
            "statusCode": 302
          }
        }
      ]
    },
    {
      "name": "_default",
      "pattern": "/*path",
      "metaData": {
        "hideSearch": true,
        "title": "Volunteer Scotland Search"
      },
      "tasks": [
        "context.metaData.commonTasks.authNotRequired",
        {
          "name": "destination",
          "taskModule": "renderLayout",
          "renderer": "handlebars",
          "config": {
            "logic": {
              "if": [
                "default"
              ]
            },
            "output": "body",
            "layouts": {
              "default": {
                "layout": ">context.metaData.handlebars.layouts.default",
                "parts": {
                  "head": ">context.metaData.handlebars.templates.pages_page-head-tags",
                  "body": ">context.metaData.handlebars.templates.errors_404",
                  "foot": ""
                },
                "contentType": "text/html"
              }
            }
          }
        }
      ]
    }
  ],
  "metaData": {
    "assetsVersion": "0.0.3",
    "assetsBase": "https://storage.googleapis.com/scvo-assets/test/search-volunteerscotland/",
    "favouritesCampaignName": "vs-favourites",
    "registeredInterestCampaignName": "vs-registered-interest",
    "emailCampaignName": "vs-saved-searches",
    "emailSendSettings": {
      "register-interest": {
        "mailgunConnection": "mg_volunteerscotland",
        "from": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "replyTo": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "sendIfEmpty": false,
        "subjectPartial": "emails_register_interest_subject",
        "bodyPartial": "emails_register_interest_body",
        "metaData": {}
      },
      "register-interest-tsi": {
        "mailgunConnection": "mg_volunteerscotland",
        "from": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "replyTo": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "sendIfEmpty": false,
        "subjectPartial": "emails_register_interest_subject",
        "bodyPartial": "emails_register_interest_tsi_body",
        "metaData": {}
      },
      "user-confirmation": {
        "mailgunConnection": "mg_volunteerscotland",
        "from": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "replyTo": "Volunteer Scotland <register.interest@volunteerscotland.org.uk>",
        "sendIfEmpty": false,
        "subjectPartial": "emails_confirmation_subject",
        "bodyPartial": "emails_confirmation_body",
        "metaData": {}
      }
    },
    "menus": {
      "main": [
        {
          "label": "Find opportunities",
          "icon": "search",
          "path": "/search",
          "route": "^/(?!searches)(search)|^/map|^/opportunity|^/opportunities-in"
        },
        {
          "label": "Find organisations",
          "icon": "list-alt",
          "path": "/organisations/search",
          "route": "^/organisation"
        }
      ],
      "upper": [
        {
          "label": "Home",
          "icon": "home",
          "path": "https://www.volunteerscotland.net",
          "route": "^https://www.volunteerscotland.net"
        },
        {
          "label": "About Us",
          "icon": "info-circle",
          "path": "https://www.volunteerscotland.net/about-us",
          "route": "^https://www.volunteerscotland.net/about-us"
        }
      ],
      "user-not-signed-in": [
        {
          "label": "Sign in",
          "icon": "sign-in-alt",
          "path": "/sign-in",
          "route": "^/sign-in"
        },
        {
          "label": "Sign up",
          "icon": "user-plus",
          "path": "/sign-up",
          "route": "^/sign-up"
        }
      ],
      "user-signed-in": [
        {
          "label": "My saved searches",
          "icon": "search-plus",
          "path": "/searches",
          "route": "^/searches"
        },
        {
          "label": "My favourites",
          "icon": "heart",
          "path": "/favourites",
          "route": "^/favourites"
        },
        {
          "label": "My notes",
          "icon": "edit",
          "path": "/notes",
          "route": "^/notes"
        },
        {
          "label": "Registered interest",
          "icon": "envelope-open-text",
          "path": "/registered-interest",
          "route": "^/registered-interest"
        },
        {
          "label": "Newsletters",
          "icon": "newspaper",
          "path": "/newsletters",
          "route": "^/newsletters"
        },
        {
          "label": "My account",
          "icon": "user-cog",
          "path": "/account",
          "route": "^/account"
        },
        {
          "label": "Sign out",
          "icon": "sign-out-alt",
          "path": "/sign-out",
          "route": "^/sign-out"
        }
      ],
      "footer-cookies-terms": [
        {
          "label": "Volunteer Scotland Charter",
          "path": "https://www.volunteerscotland.net/terms-conditions/charter/",
          "route": "^https://www.volunteerscotland.net/terms-conditions/charter/"
        },
        {
          "label": "Privacy notice",
          "path": "/privacy",
          "route": "/privacy"
        },
        {
          "label": "Cookies policy",
          "path": "/cookies",
          "route": "^/cookies"
        },
        {
          "label": "Terms &amp; conditions",
          "path": "https://www.volunteerscotland.net/terms-conditions/",
          "route": "^https://www.volunteerscotland.net/terms-conditions/"
        },
        {
          "label": "Charter text",
          "path": "https://www.volunteerscotland.net/terms-conditions/charter-text/",
          "route": "https://www.volunteerscotland.net/terms-conditions/charter-text/"
        }
      ],
      "footer-contact": [
        {
          "label": "Contact us",
          "icon": "at",
          "path": "https://www.volunteerscotland.net/about-us/contact-us/",
          "route": "^https://www.volunteerscotland.net/about-us/contact-us/"
        },
        {
          "label": "Sign up to hear from us",
          "icon": "envelope",
          "path": "https://www.volunteerscotland.net/about-us/contact-us/tick-to-hear-from-us",
          "route": "^https://www.volunteerscotland.net/about-us/contact-us/tick-to-hear-from-us"
        }
      ],
      "footer-info": [
        {
          "label": "Accessibility",
          "path": "/accessibility",
          "route": "^/accessibility"
        },
        {
          "label": "Complaints procedure",
          "path": "https://www.volunteerscotland.net/accessibility/complaints-procedure/",
          "route": "^https://www.volunteerscotland.net/accessibility/complaints-procedure/"
        },
        {
          "label": "Brand guidelines",
          "path": "https://www.volunteerscotland.net/accessibility/brand-guidelines/",
          "route": "^https://www.volunteerscotland.net/accessibility/brand-guidelines/"
        }
      ]
    },
    "accountInfoValidation": {
      "first_name": {
        "required": true,
        "maxlength": 64
      },
      "last_name": {
        "required": true,
        "maxlength": 64
      },
      "date_of_birth": {
        "type": "date"
      },
      "location_address": {
        "maxlength": 256
      },
      "location_city": {
        "maxlength": 64
      },
      "location_postcode": {
        "maxlength": 16,
        "pattern": "[A-Za-z]{1,2}[0-9][A-Za-z0-9]?\\s?[0-9][ABD-HJLNP-UW-Zabd-hjlnp-uw-z]{2}"
      },
      "email": {
        "required": true,
        "maxlength": 256,
        "pattern": "[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,253}[a-zA-Z0-9])?)+$"
      },
      "phone": {
        "maxlength": 64,
        "pattern": "[0-9\\s]+"
      }
    },
    "reCaptchaSiteKey": "6Ld7L5IUAAAAAGg1Luu1I9njFa2m-BALdtHja-cp",
    "elasticsearchUrl": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
    "searchKnobs": {
      "dateLastModified": {
        "function": "gauss",
        "scale": "10d",
        "decay": 0.95,
        "offset": "60d"
      },
      "distance": {
        "function": "gauss",
        "scale": "1km",
        "offset": "1km",
        "decay": 0.999
      },
      "geoCoordBoost": 25,
      "textBagBoost": 5
    },
    "termTypeLabels": {
      "age_groups": {
        "singular": "For volunteers aged",
        "plural": "For volunteers aged"
      },
      "availability": {
        "singular": "Availability",
        "plural": "Availability"
      },
      "services": {
        "singular": "Services",
        "plural": "Services"
      },
      "types": {
        "singular": "Type",
        "plural": "Types"
      },
      "activities": {
        "singular": "Activity",
        "plural": "Activities"
      },
      "organisation_activities": {
        "singular": "Activity",
        "plural": "Activities"
      },
      "themes": {
        "singular": "Theme",
        "plural": "Themes"
      }
    },
    "terms": [
      {
        "label": "For volunteers aged",
        "termGroups": [
          {
            "label": "Other",
            "terms": [
              {
                "label": "18 and over",
                "textBag": "18 19 20 21 22 23 24 25 year old over",
                "key": "18-and-over"
              },
              {
                "label": "16 to 17",
                "textBag": "16 17 year old",
                "key": "16-to-17"
              },
              {
                "label": "12 to 15",
                "textBag": "12 13 14 15 year old",
                "key": "12-to-15"
              },
              {
                "label": "11 and under",
                "textBag": "8 9 10 11 12 under year old",
                "key": "11-and-under"
              }
            ],
            "key": "other"
          }
        ],
        "key": "age_groups"
      },
      {
        "label": "Themes",
        "termGroups": [
          {
            "label": "Advice & advocacy",
            "terms": [
              {
                "label": "Human / Civil Rights / Justice",
                "textBag": "human civil rights justice law",
                "key": "human-civil-rights-justice"
              },
              {
                "label": "Justice / Legal Assistance",
                "textbag": "Justice Legal Assistance",
                "key": "justice-legal-assistance"
              }
            ],
            "key": "advice-advocacy"
          },
          {
            "label": "Anti-Poverty",
            "terms": [
              {
                "label": "Anti-Poverty",
                "textBag": "Anti Poverty",
                "key": "anti-poverty"
              },
              {
                "label": "Homeless / Housing",
                "textBag": "Homeless Housing homelessness",
                "key": "homeless-housing"
              },
              {
                "label": "Low Income Households",
                "textBag": "Low Income Households",
                "key": "low-income-households"
              }
            ],
            "key": "anti-poverty"
          },
          {
            "label": "Arts & culture",
            "terms": [
              {
                "label": "Arts (Music / Drama / Crafts)",
                "textBag": "Arts Music Drama Crafts",
                "key": "arts-music-drama-crafts"
              },
              {
                "label": "Museums / Galleries / Heritage",
                "textBag": "Museums Galleries Heritage museum history",
                "key": "museums-galleries-heritage"
              }
            ],
            "key": "arts-culture"
          },
          {
            "label": "Care & counselling",
            "terms": [
              {
                "label": "Carers",
                "textBag": "Carers",
                "key": "carers"
              },
              {
                "label": "Drugs / Alcohol Issues",
                "textBag": "Drugs Alcohol Issues",
                "key": "drugs-alcohol-issues"
              },
              {
                "label": "Leaving / In Care",
                "textBag": "Leaving In Care",
                "key": "leaving-in-care"
              }
            ],
            "key": "care-counselling"
          },
          {
            "label": "Community",
            "terms": [
              {
                "label": "Local Authority",
                "textBag": "Local Authority",
                "key": "local-authority"
              },
              {
                "label": "Local Community",
                "textBag": "Local Community",
                "key": "local-community"
              },
              {
                "label": "Residents of Disadvantaged Neighbourhoods",
                "textBag": "Residents of Disadvantaged Neighbourhoods",
                "key": "residents-of-disadvantaged-neighbourhoods"
              }
            ],
            "key": "community"
          },
          {
            "label": "Crime & ex-offenders",
            "terms": [
              {
                "label": "Crime / Safety",
                "textBag": "Crime / Safety",
                "key": "crime-safety"
              },
              {
                "label": "Offenders & Ex-Offenders",
                "textBag": "Offenders Ex-Offenders prison",
                "key": "offenders-and-ex-offenders"
              },
              {
                "label": "Victims of Crime",
                "textBag": "Victims of Crime victim support",
                "key": "victims-of-crime"
              }
            ],
            "key": "crime-ex-offenders"
          },
          {
            "label": "Development & emergency relief",
            "terms": [
              {
                "label": "Disaster / Emergencies",
                "textBag": "Disaster Emergencies",
                "key": "disaster-emergencies"
              },
              {
                "label": "Overseas Aid / Developing World",
                "textBag": "Overseas Aid Developing World international",
                "key": "overseas-aid-developing-world"
              }
            ],
            "key": "development-emergency-relief"
          },
          {
            "label": "Disability",
            "terms": [
              {
                "label": "Learning Disabilities",
                "textBag": "Learning Disabilities Autism",
                "key": "learning-disabilities"
              },
              {
                "label": "Physical Disability",
                "textBag": "Physical Disability",
                "key": "physical-disability"
              },
              {
                "label": "Sensory Impairment",
                "textBag": "Sensory Impairment",
                "key": "sensory-impairment"
              }
            ],
            "key": "disability"
          },
          {
            "label": "Education & languages",
            "terms": [
              {
                "label": "Education / Literacy",
                "textBag": "Education Literacy",
                "key": "education-literacy"
              },
              {
                "label": "Literacy Needs",
                "textBag": "Literacy Needs",
                "key": "literacy-needs"
              }
            ],
            "key": "education-languages"
          },
          {
            "label": "Elderly",
            "terms": [
              {
                "label": "Elderly",
                "textBag": "Elderly",
                "key": "elderly"
              },
              {
                "label": "Older People",
                "textBag": "Older People",
                "key": "older-people"
              }
            ],
            "key": "elderly"
          },
          {
            "label": "Environment & animals",
            "terms": [
              {
                "label": "Animals",
                "textBag": "Animals",
                "key": "animals"
              },
              {
                "label": "Environment",
                "textBag": "Environment",
                "key": "environment"
              }
            ],
            "key": "environment-animals"
          },
          {
            "label": "Health",
            "terms": [
              {
                "label": "Health / Hospitals / Hospices",
                "textBag": "Health Hospitals Hospices",
                "key": "health-hospitals-hospices"
              },
              {
                "label": "Mental Health",
                "textBag": "Mental Health",
                "key": "mental-health"
              },
              {
                "label": "People with Ill Health",
                "textBag": "People with Ill Health",
                "key": "people-with-ill-health"
              }
            ],
            "key": "health"
          },
          {
            "label": "Represented groups",
            "terms": [
              {
                "label": "Ethnic Minorities",
                "textBag": "Ethnic Minorities",
                "key": "ethnic-minorities"
              },
              {
                "label": "Families",
                "textBag": "Families",
                "key": "families"
              },
              {
                "label": "Gender / Sexuality",
                "textBag": "Gender Sexuality",
                "key": "gender-sexuality"
              },
              {
                "label": "General Public",
                "textBag": "General Public",
                "key": "general-public"
              },
              {
                "label": "LGBT",
                "textBag": "LGBT LGBTQI",
                "key": "lgbt"
              },
              {
                "label": "Lone Parents",
                "textBag": "Lone Parents",
                "key": "lone-parents"
              },
              {
                "label": "Mens Groups",
                "textBag": "Mens Groups",
                "key": "mens-groups"
              },
              {
                "label": "Parents",
                "textBag": "Parents",
                "key": "parents"
              },
              {
                "label": "Refugees / Asylum Seekers",
                "textBag": "Refugees Asylum Seekers",
                "key": "refugees-asylum-seekers"
              },
              {
                "label": "Womens Groups",
                "textBag": "Womens Groups",
                "key": "womens-groups"
              }
            ],
            "key": "represented-groups"
          },
          {
            "label": "Unemployment",
            "terms": [
              {
                "label": "Tackling Unemployment",
                "textBag": "Tackling Unemployment",
                "key": "tackling-unemployment"
              },
              {
                "label": "Unemployed",
                "textBag": "Unemployed",
                "key": "unemployed"
              }
            ],
            "key": "unemployment"
          },
          {
            "label": "Youth & children",
            "terms": [
              {
                "label": "Children",
                "textBag": "Children",
                "key": "children"
              },
              {
                "label": "Young People",
                "textBag": "Young People",
                "key": "young-people"
              }
            ],
            "key": "youth-children"
          },
          {
            "label": "Other",
            "terms": [
              {
                "label": "Religion / Faith",
                "textBag": "Religion Faith",
                "key": "religion-faith"
              },
              {
                "label": "Sport / Outdoor Activities",
                "textBag": "Sport Outdoor Activities",
                "key": "sport-outdoor-activities"
              }
            ],
            "key": "other"
          }
        ],
        "key": "themes"
      },
      {
        "label": "Activities",
        "termGroups": [
          {
            "label": "Administrative & managerial",
            "terms": [
              {
                "label": "Administrative / Office Work",
                "textBag": "Administrative Office Work admin assistant administration office receptionist",
                "key": "administrative-office-work"
              },
              {
                "label": "Committee Work",
                "textBag": "Committee Work board member treasurer trustee",
                "key": "committee-work"
              },
              {
                "label": "Computing",
                "textBag": "Computing computer computing it web website",
                "key": "computing"
              },
              {
                "label": "Finance / Accountancy",
                "textBag": "Finance Accountancy finance accounts",
                "key": "finance-accountancy"
              },
              {
                "label": "Library / Information Management",
                "textBag": "Library Information Management",
                "key": "library-information-management"
              },
              {
                "label": "Management / Business Skills",
                "textBag": "Management Business Skills",
                "key": "management-business-skills"
              },
              {
                "label": "Marketing / PR / Media",
                "textBag": "Marketing PR Media marketing social media radio photographer photography writing",
                "key": "marketing-pr-media"
              },
              {
                "label": "Research / Policy Work",
                "textBag": "Research Policy Work",
                "key": "research-policy-work"
              }
            ],
            "key": "administrative-managerial"
          },
          {
            "label": "Advice & advocacy",
            "terms": [
              {
                "label": "Advice / Information Giving",
                "textBag": "Advice Information Giving",
                "key": "advice-information-giving"
              },
              {
                "label": "Advocacy / Human Rights",
                "textBag": "Advocacy Human Rights",
                "key": "advocacy-human-rights"
              },
              {
                "label": "Campaigning / Lobbying",
                "textBag": "Campaigning Lobbying",
                "key": "campaigning-lobbying"
              },
              {
                "label": "Equal Opportunities / Race Relations",
                "textBag": "Equal Opportunities Race Relations",
                "key": "equal-opportunities-race-relations"
              },
              {
                "label": "Justice / Legal Assistance",
                "textBag": "Justice Legal Assistance",
                "key": "justice-legal-assistance"
              }
            ],
            "key": "advice-advocacy"
          },
          {
            "label": "Care & counselling",
            "terms": [
              {
                "label": "Befriending / Mentoring",
                "textBag": "Befriending Mentoring befriender mentor",
                "key": "befriending-mentoring"
              },
              {
                "label": "Care / Support Worker",
                "textBag": "Care Support Worker",
                "key": "care-support-worker"
              },
              {
                "label": "Counselling",
                "textBag": "Counselling counsellor",
                "key": "counselling"
              }
            ],
            "key": "care-counselling"
          },
          {
            "label": "Development & emergency relief",
            "terms": [
              {
                "label": "Community / Economic Development",
                "textBag": "Community Economic Development",
                "key": "community-economic-development"
              },
              {
                "label": "Disaster / Emergency Relief",
                "textBag": "Disaster Emergency Relief",
                "key": "disaster-emergency-relief"
              }
            ],
            "key": "development-emergency-relief"
          },
          {
            "label": "Education & languages",
            "terms": [
              {
                "label": "Languages / Translating",
                "textBag": "Languages Translating spanish german french",
                "key": "languages-translating"
              },
              {
                "label": "Tutoring / Supporting Learners",
                "textBag": "Tutoring Supporting Learners tutor training",
                "key": "tutoring-supporting-learners"
              }
            ],
            "key": "education-languages"
          },
          {
            "label": "Specialist & practical",
            "terms": [
              {
                "label": "Catering",
                "textBag": "Catering",
                "key": "catering"
              },
              {
                "label": "Charity Shops / Retail",
                "textBag": "Charity Shops Retail",
                "key": "charity-shops-retail"
              },
              {
                "label": "Conservation / Gardening",
                "textBag": "Conservation Gardening allotment garden",
                "key": "conservation-gardening"
              },
              {
                "label": "Driving / Escorting",
                "textBag": "Driving Escorting driver",
                "key": "driving-escorting"
              },
              {
                "label": "Fundraising",
                "textBag": "Fundraising funding",
                "key": "fundraising"
              },
              {
                "label": "Practical / DIY",
                "textBag": "Practical DIY",
                "key": "practical-diy"
              },
              {
                "label": "Specialist / Technical",
                "textBag": "Specialist Technical physiotherapy complementary therapist massage therapist",
                "key": "specialist-technical"
              }
            ],
            "key": "specialist-practical"
          },
          {
            "label": "Youth & children",
            "terms": [
              {
                "label": "Playschemes / Childrens Clubs",
                "textBag": "Playschemes / Childrens Clubs",
                "key": "playschemes-childrens-clubs"
              },
              {
                "label": "Volunteering for under 16s",
                "textBag": "Volunteering for under 16 15 14 13 12 11 year old",
                "key": "volunteering-for-under-16s"
              },
              {
                "label": "Youth Work",
                "textBag": "Youth Work",
                "key": "youth-work"
              }
            ],
            "key": "youth-children"
          },
          {
            "label": "Other",
            "terms": [
              {
                "label": "Arts (Music / Drama / Crafts)",
                "textBag": "Arts (Music / Drama / Crafts)",
                "key": "arts-music-drama-crafts"
              },
              {
                "label": "Events",
                "textBag": "Events",
                "key": "events"
              },
              {
                "label": "Miscellaneous",
                "textBag": "Miscellaneous",
                "key": "miscellaneous"
              },
              {
                "label": "Online Volunteering",
                "textBag": "Online Volunteering",
                "key": "online-volunteering"
              },
              {
                "label": "Residential Volunteering",
                "textBag": "Residential Volunteering",
                "key": "residential-volunteering"
              },
              {
                "label": "Short-Term / Seasonal Working",
                "textBag": "Short-Term / Seasonal Working",
                "key": "short-term-seasonal-working"
              },
              {
                "label": "Sports / Outdoor Activities",
                "textBag": "Sports / Outdoor Activities",
                "key": "sports-outdoor-activities"
              }
            ],
            "key": "other"
          }
        ],
        "key": "activities"
      },
      {
        "label": "Services",
        "termGroups": [
          {
            "label": "Other",
            "terms": [
              {
                "label": "Childcare",
                "textBag": "Childcare",
                "key": "childcare"
              },
              {
                "label": "Expenses Paid",
                "textBag": "Expenses Paid",
                "key": "expenses-paid"
              },
              {
                "label": "Named Contact For Volunteer",
                "textBag": "Named Contact For Volunteer",
                "key": "named-contact-for-volunteer"
              },
              {
                "label": "Taster Available",
                "textBag": "Taster Available",
                "key": "taster-available"
              },
              {
                "label": "Wheelchair Access/Disabled Access Toilet",
                "textBag": "Wheelchair Access/Disabled Access Toilet",
                "key": "wheelchair-access-disabled-access-toilet"
              }
            ],
            "key": "other"
          }
        ],
        "key": "services"
      },
      {
        "label": "Specialist roles",
        "termGroups": [
          {
            "label": "Other",
            "terms": [
              {
                "label": "Board/trustee role",
                "textBag": "Board trustee role",
                "key": "board-trustee-role"
              },
              {
                "label": "Home-based volunteering",
                "textBag": "Home-based volunteering",
                "key": "home-based-volunteering"
              },
              {
                "label": "One-off volunteering",
                "textBag": "One-off volunteering",
                "key": "one-off-volunteering"
              },
              {
                "label": "Suitable for groups",
                "textBag": "Suitable for groups",
                "key": "suitable-for-groups"
              }
            ],
            "key": "other"
          }
        ],
        "key": "volunteersearch_types"
      },
      {
        "label": "Availability",
        "termGroups": [
          {
            "label": "Monday",
            "terms": [
              {
                "label": "Monday Morning",
                "textBag": "monday morning",
                "key": "monday-morning"
              },
              {
                "label": "Monday Afternoon",
                "textBag": "monday afternoon",
                "key": "monday-afternoon"
              },
              {
                "label": "Monday Evening",
                "textBag": "monday evening",
                "key": "monday-evening"
              }
            ],
            "key": "monday"
          },
          {
            "label": "Tuesday",
            "terms": [
              {
                "label": "Tuesday Morning",
                "textBag": "tuesday morning",
                "key": "tuesday-morning"
              },
              {
                "label": "Tuesday Afternoon",
                "textBag": "tuesday afternoon",
                "key": "tuesday-afternoon"
              },
              {
                "label": "Tuesday Evening",
                "textBag": "tuesday evening",
                "key": "tuesday-evening"
              }
            ],
            "key": "tuesday"
          },
          {
            "label": "Wednesday",
            "terms": [
              {
                "label": "Wednesday Morning",
                "textBag": "wednesday morning",
                "key": "wednesday-morning"
              },
              {
                "label": "Wednesday Afternoon",
                "textBag": "wednesday afternoon",
                "key": "wednesday-afternoon"
              },
              {
                "label": "Wednesday Evening",
                "textBag": "wednesday evening",
                "key": "wednesday-evening"
              }
            ],
            "key": "wednesday"
          },
          {
            "label": "Thursday",
            "terms": [
              {
                "label": "Thursday Morning",
                "textBag": "thursday morning",
                "key": "thursday-morning"
              },
              {
                "label": "Thursday Afternoon",
                "textBag": "thursday afternoon",
                "key": "thursday-afternoon"
              },
              {
                "label": "Thursday Evening",
                "textBag": "thursday evening",
                "key": "thursday-evening"
              }
            ],
            "key": "thursday"
          },
          {
            "label": "Friday",
            "terms": [
              {
                "label": "Friday Morning",
                "textBag": "friday morning",
                "key": "friday-morning"
              },
              {
                "label": "Friday Afternoon",
                "textBag": "friday afternoon",
                "key": "friday-afternoon"
              },
              {
                "label": "Friday Evening",
                "textBag": "friday evening",
                "key": "friday-evening"
              }
            ],
            "key": "friday"
          },
          {
            "label": "Saturday",
            "terms": [
              {
                "label": "Saturday Morning",
                "textBag": "saturday morning",
                "key": "saturday-morning"
              },
              {
                "label": "Saturday Afternoon",
                "textBag": "saturday afternoon",
                "key": "saturday-afternoon"
              },
              {
                "label": "Saturday Evening",
                "textBag": "saturday evening",
                "key": "saturday-evening"
              }
            ],
            "key": "saturday"
          },
          {
            "label": "Sunday",
            "terms": [
              {
                "label": "Sunday Morning",
                "textBag": "sunday morning",
                "key": "sunday-morning"
              },
              {
                "label": "Sunday Afternoon",
                "textBag": "sunday afternoon",
                "key": "sunday-afternoon"
              },
              {
                "label": "Sunday Evening",
                "textBag": "sunday evening",
                "key": "sunday-evening"
              }
            ],
            "key": "sunday"
          }
        ],
        "key": "availability"
      },
      {
        "label": "Advertised Areas",
        "noSearchFilter": true,
        "termGroups": [
          {
            "label": "Other",
            "terms": [
              {
                "label": "Aberdeen",
                "key": "aberdeen"
              },
              {
                "label": "Aberdeenshire",
                "key": "aberdeenshire"
              },
              {
                "label": "Angus",
                "key": "angus"
              },
              {
                "label": "Argyll & Bute",
                "key": "argyll-bute"
              },
              {
                "label": "Clackmannanshire",
                "key": "clackmannanshire"
              },
              {
                "label": "Dumfries & Galloway",
                "key": "dumfries-galloway"
              },
              {
                "label": "Dundee",
                "key": "dundee"
              },
              {
                "label": "East Ayrshire",
                "key": "east-ayrshire"
              },
              {
                "label": "East Dunbartonshire",
                "key": "east-dunbartonshire"
              },
              {
                "label": "East Lothian",
                "key": "east-lothian"
              },
              {
                "label": "East Renfrewshire",
                "key": "east-renfrewshire"
              },
              {
                "label": "Edinburgh",
                "key": "edinburgh"
              },
              {
                "label": "Falkirk",
                "key": "falkirk"
              },
              {
                "label": "Fife",
                "key": "fife"
              },
              {
                "label": "Glasgow",
                "key": "glasgow"
              },
              {
                "label": "Highland",
                "key": "highland"
              },
              {
                "label": "Inverclyde",
                "key": "inverclyde"
              },
              {
                "label": "Midlothian",
                "key": "midlothian"
              },
              {
                "label": "Moray",
                "key": "moray"
              },
              {
                "label": "Na h-Eileanan Siar",
                "key": "na-h-eileanan-siar"
              },
              {
                "label": "North Ayrshire",
                "key": "north-ayrshire"
              },
              {
                "label": "North Lanarkshire",
                "key": "north-lanarkshire"
              },
              {
                "label": "Orkney",
                "key": "orkney"
              },
              {
                "label": "Perth & Kinross",
                "key": "perth-kinross"
              },
              {
                "label": "Renfrewshire",
                "key": "renfrewshire"
              },
              {
                "label": "Scottish Borders",
                "key": "scottish-borders"
              },
              {
                "label": "Shetland",
                "key": "shetland"
              },
              {
                "label": "South Ayrshire",
                "key": "south-ayrshire"
              },
              {
                "label": "South Lanarkshire",
                "key": "south-lanarkshire"
              },
              {
                "label": "Stirling",
                "key": "stirling"
              },
              {
                "label": "West Dunbartonshire",
                "key": "west-dunbartonshire"
              },
              {
                "label": "West Lothian",
                "key": "west-lothian"
              }
            ],
            "key": "other"
          }
        ],
        "key": "advertised_areas"
      }
    ],
    "handlebars": {
      "partials": {
        "account_sign_in_social": "<div class=\"button-row\">\n  <button class=\"mdc-button mdc-ripple-surface mdc-ripple-surface--primary\" id=\"continue-with-google\" type=\"button\">\n    <span class=\"fab fa-2x google-logo\"><img src=\"https://storage.googleapis.com/scvo-assets/test/volunteerscotland-search/images/logos/g-logo.png\" /></span> Sign in with Google\n  </button>\n  <button class=\"disabled mdc-button mdc-ripple-surface mdc-ripple-surface--primary\" id=\"continue-with-twitter\" type=\"button\">\n    <span class=\"fab fa-twitter-square fa-2x\"></span> Sign in with Twitter\n  </button>\n  <button class=\"disabled mdc-button mdc-ripple-surface mdc-ripple-surface--primary\" id=\"continue-with-facebook\" type=\"button\">\n    <span class=\"fab fa-facebook-square fa-2x\"></span> Sign in with Facebook\n  </button>\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n    var $message = $('{{messageSelector}}');\n    var $loader = $('{{loaderSelector}}');\n    var $google = $('#continue-with-google');\n    var $twitter = $('#continue-with-twitter');\n    var $facebook = $('#continue-with-facebook');\n\n    $google.on('click', function(evt) { socialSignIn('google'); });\n    $facebook.on('click', function(evt) { socialSignIn('facebook'); });\n    $twitter.on('click', function(evt) { socialSignIn('twitter'); });\n\n    function getRedirect(user){\n        // Redirect them to newsletter settings if they're new and not in the middle of something.\n      var referer = '{{{@root.request.headers.referer}}}'\n      var host = '{{{@root.request.headers.host}}}'\n      if (!isNewUser(user)) return referer;\n      if (referer.match(host + \"/$\") || referer.match(host + \"/sign-in/?$\") || referer.match(host + \"/sign-up/$\") ) {\n        return \"/newsletters?newuser=true\";\n      } else {\n          return referer;\n      }\n    }\n\n    function isNewUser(user){\n      if (user.additionalUserInfo && user.additionalUserInfo.isNewUser) return true;\n      var metadata = user.metadata;\n      if (!metadata || !metadata.creationTime || !metadata.lastSignInTime) return false;\n      var lastSignInTime = new Date(metadata.lastSignInTime);\n      var creationTime = new Date(metadata.creationTime);\n      if (creationTime.getTime() === lastSignInTime.getTime() && (new Date().getTime() - lastSignInTime.getTime() < 36000)) return true;\n      return false;\n    }\n\n    function socialSignIn(providerName) {\n      $loader.show();\n      volunteerscotland.auth.signInProvider(providerName).then(function(user) {\n        console.log('Registered user:', user);\n        var redirect = getRedirect(user);\n        window.location.href = redirect;\n      }).catch(function(err) {\n        console.error(err);\n        $message.text(err.message).show();\n        $loader.css('display', 'none');\n      });\n    }\n  });\n</script>",
        "account_sign_out_loader": "<form id=\"sign-out-form\" method=\"POST\" class=\"sign-in-form sign-out-form\">\n  <div class=\"mdc-card mdc-elevation--z0\">\n    <div class=\"card-loader\" id=\"sign-out-loader\">\n      <div class=\"card-loader-background\"></div>\n      <div class=\"card-loader-inner\">\n        <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n      </div>\n    </div>\n  </div>\n</form>",
        "ajax_chip": "{{#with (parse (@partial-block))}}\n  <div class=\"mdc-chip {{if ../on \"mdc-chip--selected\"}}\" {{{extraAttributes}}} data-ajax-chip='{\n      \"onUrl\": \"{{../onUrl}}\",\n      \"offUrl\": \"{{../offUrl}}\",\n      \"onMethod\": \"{{default ../onMethod \"GET\"}}\",\n      \"offMethod\": \"{{default ../offMethod \"GET\"}}\",\n      {{#if onData}}\n        \"onData\": {{{stringify onData}}},\n      {{/if}}\n      {{#if offData}}\n        \"offData\": {{{stringify offData}}},\n      {{/if}}\n      {{#if onClasses}}\n      \"onClasses\": {{{stringify onClasses}}},\n      {{/if}}\n      {{#if offClasses}}\n      \"offClasses\": {{{stringify offClasses}}},\n      {{/if}}\n      \"onText\": \"{{../onText}}\",\n      \"offText\": \"{{../offText}}\"\n    }'>\n    <span class=\"{{../iconClasses}} mdc-chip__icon mdc-chip__icon--leading {{if ../on \"mdc-chip__icon--leading-hidden\"}}\" aria-hidden=\"true\"></span>\n    <div class=\"mdc-chip__checkmark\">\n      <svg class=\"mdc-chip__checkmark-svg\" viewBox=\"-2 -3 30 30\">\n        <path class=\"mdc-chip__checkmark-path\" fill=\"none\" stroke=\"#ffffff\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n      </svg>\n    </div>\n    <div class=\"mdc-chip__text noselect\">{{if ../on ../onText else=../offText}}</div>\n  </div>\n{{/with}}\n",
        "asset_url": "{{~#if @root.context.metaData.live~}}\n{{@root.context.metaData.assetsBase}}{{{url}}}?version={{{@root.context.metaData.assetsVersion}}}\n{{~else~}}\n/assets/{{{url}}}\n{{~/if~}}",
        "browse": "<div class=\"mdc-layout-grid home-content-primary\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n      <div class=\"browse-title browse-title-roles mdc-typography--headline6\">\n        Themes\n      </div>\n      <ul class=\"mdc-list themes\">\n        {{#each (filter @root.context.metaData.terms \"key\" \"===\" \"themes\")}}\n        {{#each termGroups ~}}\n        <li class=\"mdc-typography--body2 t-margin\">{{{label}}}</li>\n        {{#each terms ~}}\n        <a class=\"mdc-list-item\" href=\"/search?themes={{urlencode key}}\" role=\"menuitem\">\n          <span class=\"mdc-list-item__text\">\n            {{{label}}}\n          </span>\n        </a>\n        {{/each ~}}\n        {{/each ~}}\n        {{/each ~}}\n      </ul>\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n      <div class=\"browse-title browse-title-activities mdc-typography--headline6\">\n        Activities\n      </div>\n      <ul class=\"mdc-list activities\">\n\n  {{#each (filter @root.context.metaData.terms \"key\" \"===\" \"activities\")}}\n  {{#each termGroups ~}}\n        <li class=\"mdc-typography--body2 t-margin\">{{{label}}}</li>\n        {{#each terms ~}}\n        <a class=\"mdc-list-item\" href=\"/search?activities={{urlencode key}}\" role=\"menuitem\">\n          <span class=\"mdc-list-item__text\">\n            {{{label}}}\n          </span>\n        </a>\n        {{/each ~}}\n        {{/each ~}}\n  {{/each ~}}\n      </ul>\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n      <div class=\"browse-title browse-title-areas mdc-typography--headline6\">\n        Areas\n      </div>\n      <ul class=\"mdc-list areas t-margin\">\n  {{#each (filter @root.context.metaData.terms \"key\" \"===\" \"advertised_areas\")}}\n\n        {{#each termGroups~}}\n          {{#each terms}}\n        {{#if key ~}}\n        <a class=\"mdc-list-item\" href=\"/opportunities-in/{{key}}\" role=\"menuitem\">\n          <span class=\"mdc-list-item__text\">\n            {{{label}}}\n          </span>\n        </a>\n        {{/if ~}}\n          {{/each}}\n        {{/each ~}}\n  {{/each ~}}\n      </ul>\n    </div>\n  </div>\n</div>",
        "components_advanced_checkbox_checkbox": "  <div class=\"mdc-checkbox mdc-list-item__meta\">\n    <input type=\"checkbox\" class=\"mdc-checkbox__native-control\"\n        {{#unless hideName}}name=\"{{name}}\"{{/unless}} value=\"{{value}}\"\n        id=\"cb-{{name}}-{{value}}\" {{#if checked}}checked{{/if}}\n        aria-labelledby=\"li-{{name}}-{{value}}\">\n    <div class=\"mdc-checkbox__background\">\n      <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n        <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n      </svg>\n      <div class=\"mdc-checkbox__mixedmark\"></div>\n    </div>\n  </div>",
        "components_advanced_checkbox_group": "<li class=\"mdc-list-item checkbox-list-parent {{#if hideParent}}checkbox-list-parent-hidden{{/if}}\" data-advanced-checkbox-group=\"{{name}}\"\n    role=\"checkbox\" aria-checked=\"false\" id=\"li-{{name}}-{{value}}\">\n  <label class=\"mdc-list-item__text\" for=\"cb-{{name}}-{{value}}\">\n    {{label}}\n    <span class=\"checkbox-list-indicator\" data-advanced-checkbox-group-indicator></span>\n  </label>\n  {{> components_advanced_checkbox_checkbox name=name hideName=true label=label}}\n</li>\n{{> @partial-block}}",
        "components_advanced_checkbox_item": "<li class=\"mdc-list-item checkbox-list-child {{#if noIndent}}checkbox-list-child-no-indent{{/if}}\" data-advanced-checkbox-item=\"{{name}}\"\n    data-advanced-checkbox-group-parent=\"{{group}}\" role=\"checkbox\" aria-checked=\"{{checked}}\"\n    id=\"li-{{name}}-{{value}}\">\n  <label class=\"mdc-list-item__text\" for=\"cb-{{name}}-{{value}}\">{{label}}</label>\n  {{> components_advanced_checkbox_checkbox name=name hideName=false value=value label=label checked=checked}}\n</li>",
        "components_advanced_checkbox_list": "<div class=\"mdc-list-group advanced-checkbox-list\" data-advanced-checkbox-list=\"{{name}}\">\n  <h3 class=\"mdc-list-group__subheader cursor-pointer noselect\" data-acl-collapse-trigger>\n    <span class=\"mdc-icon-toggle mdc-icon-toggle-xs pull-right\" data-acl-clear>\n      <span class=\"far fa-trash\" aria-hidden=\"true\"></span>\n    </span>\n    {{{label}}}\n  </h3>\n  <ul class=\"mdc-list mdc-list--dense\" style=\"display:none;\" role=\"group\" aria-label=\"{{label}}\">\n    {{> @partial-block}}\n  </ul>\n  <div class=\"collapse-trigger cursor-pointer noselect\" data-acl-collapse-trigger>\n    <span class=\"fas fa-chevron-down pull-centre\" data-acl-collapse-icon-collapsed=\"fa-chevron-down\" data-acl-collapse-icon-open=\"fa-chevron-up\"></span>\n  </div>\n</div>",
        "components_anchored_menu": "{{#with (default menuId (concat \"menu-\" (random 1000 9999))) as |menuId|}}\n<div class=\"mdc-menu-surface--anchor {{../anchorClasses}}\">\n  <button class=\"mdc-button {{../buttonClasses}}\" id=\"{{menuId}}-trigger\">\n    {{#if ../imageUrl ~}}\n      <img src=\"{{../imageUrl}}\" class=\"{{../imageClasses}}\" />\n    {{/if}}\n    {{#if ../iconClasses}}\n      <span class=\"{{../iconClasses}}\"></span>\n    {{/if ~}}\n    {{{../buttonLabel}}}\n    {{#if ../arrowClasses}}\n      <span class=\"{{../arrowClasses}}\"></span>\n    {{/if}}\n  </button>\n  <div class=\"mdc-menu mdc-menu-surface {{../menuClasses}}\" tabindex=\"-1\" id=\"{{menuId}}\" data-menu-trigger=\"#{{menuId}}-trigger\">\n    <ul class=\"mdc-menu__items mdc-list {{../menuListClasses}}\" role=\"menu\" aria-hidden=\"true\">\n      {{> @partial-block}}\n    </ul>\n  </div>\n</div>\n{{/with}}\n",
        "components_checkbox": "<div class=\"mdc-form-field {{fieldClasses}}\">\n  <div class=\"mdc-checkbox\">\n    <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" id=\"{{id}}\" name=\"{{name}}\" value=\"{{default value label}}\"{{#if checked}} checked=\"checked\"{{/if}} />\n    <div class=\"mdc-checkbox__background\">\n      <svg class=\"mdc-checkbox__checkmark\"\n      viewBox=\"0 0 24 24\">\n      <path class=\"mdc-checkbox__checkmark-path\"\n      fill=\"none\"\n      stroke=\"white\"\n      d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/></svg>\n      <div class=\"mdc-checkbox__mixedmark\"></div>\n    </div>\n  </div>\n  <label for=\"{{id}}\">\n    {{{default label value}}}\n  </label>\n</div>\n\n",
        "components_horizontal_card_scroller": "{{#ifAll (compare (length items) \"===\" 0) @partial-block}}\n  {{> @partial-block}}\n{{else}}\n  <div class=\"mdc-layout-grid equal-height {{outerClasses}}\">\n    {{#if (any items)}}\n    <div class=\"scroll-button scroll-left {{scrollButtonClasses}} {{scrollButtonLeftClasses}}\">\n      <span class=\"scroll-icon {{scrollIconClasses}} {{scrollLeftIconClasses}}\"></span>\n    </div>\n    <div class=\"scroll-button scroll-right {{scrollButtonClasses}} {{scrollButtonRightClasses}}\">\n      <span class=\"scroll-icon {{scrollIconClasses}} {{scrollRightIconClasses}}\"></span>\n    </div>\n    {{/if}}\n    <div class=\"mdc-layout-grid__inner scrolling-grid {{innerClasses}}\">\n      {{#if (any items)}}\n        {{#each items}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone {{../itemClasses}}\">\n            {{> (lookup ../this 'itemsPartial')}}\n          </div>\n        {{/each}}\n        {{#if moreUrl}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone latest-content-primary last-card {{moreClasses}}\">\n            <div class=\"mdc-card align-centre mdc-typography--body1 {{moreCardClasses}}\">\n              <a href=\"{{{moreUrl}}}\">{{default moreText \"More\"}}</a>\n            </div>\n          </div>\n        {{/if}}\n      {{/if}}\n    </div>\n  </div>\n{{/ifAll}}\n",
        "components_radio_button": "<div class=\"mdc-form-field {{fieldClasses}}\"{{#if @partial-block ~}} data-ajax-radio-button='{{> @partial-block}}'{{/if}}>\n  <div class=\"mdc-radio {{innerClasses}}\">\n    <input class=\"mdc-radio__native-control\" type=\"radio\" id=\"{{default id name}}\" name=\"{{default name}}\" value=\"{{default value label}}\"{{#if active}} checked=\"checked\"{{/if}}{{#if required}} required{{/if}}>\n    <div class=\"mdc-radio__background\">\n      <div class=\"mdc-radio__outer-circle\"></div>\n      <div class=\"mdc-radio__inner-circle\"></div>\n    </div>\n  </div>\n  <label for=\"{{default id name}}\">{{default label value}}</label>\n</div>\n",
        "components_scvo_bar": "<nav id=\"scvo-tab-bar\" class=\"mdc-tab-bar\">\n  <a class=\"mdc-tab{{#if (contains @root.request.url.hostname 'scvo.')}} mdc-tab--active{{/if}}\" href=\"{{#unless (contains @root.request.url.hostname 'scvo.')}}https://scvo.org{{else}}/{{/unless}}\"><span class=\"mdc-tab--label\">SCVO</span></a>\n  <a class=\"mdc-tab{{#if (contains @root.request.url.hostname 'goodmoves.')}} mdc-tab--active{{/if}}\" href=\"https://goodmoves.com\"><span class=\"mdc-tab--label\">Goodmoves</span></a>\n  <a class=\"mdc-tab{{#if (contains @root.request.url.hostname 'thirdforcenews.')}} mdc-tab--active{{/if}}\" href=\"https://thirdforcenews.org.uk\"><span class=\"mdc-tab--label\">TFN</span></a>\n  <a class=\"mdc-tab\" href=\"{{#unless (contains @root.request.url.hostname 'scvo.')}}https://scvo.org{{/unless}}/scottish-charity-awards\"><span class=\"mdc-tab--label\">Scottish Charity Awards</span></a>\n  <a class=\"mdc-tab\" href=\"{{#unless (contains @root.request.url.hostname 'scvo.')}}https://scvo.org{{/unless}}/the-gathering-2020\"><span class=\"mdc-tab--label\">The Gathering</span></a>\n  <a class=\"mdc-tab pull-right brand-logo\" href=\"{{#unless (contains @root.request.url.hostname 'scvo.')}}https://scvo.org{{else}}/{{/unless}}\" title=\"Scottish Council for Voluntary Organisations\">\n    <img src=\"{{~>asset_url url='images/logos/scvo-inverse.png'}}\" alt=\"Scottish Council for Voluntary Organisations\" />\n  </a>\n</nav>",
        "components_tab_bar": "<div class=\"mdc-tab-bar {{extraClasses}}\" {{#if id}}id=\"{{id}}\"{{/if}} role=\"tablist\" data-tab-bar='{\n      \"defaultTabIdentifier\": {{{stringify (default defaultTabIdentifier null)}}}\n    }'>\n  <div class=\"mdc-tab-scroller\">\n    <div class=\"mdc-tab-scroller__scroll-area\">\n      <div class=\"mdc-tab-scroller__scroll-content\">\n        {{> @partial-block}}\n      </div>\n    </div>\n  </div>\n</div>\n",
        "components_tab": "<{{#if url}}a href=\"{{{url}}}\"{{else}}button{{/if}} class=\"mdc-tab {{linkClasses}} {{#if active}} mdc-tab--active{{/if}}\"\n              role=\"tab\" {{#if active}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/if}} tabindex=\"0\"\n              {{#if tabName}}data-tab-name=\"{{tabName}}\"{{/if}}>\n  <span class=\"mdc-tab__content {{contentClasses}}\">\n    {{#if iconClasses}}<span class=\"mdc-tab__icon {{iconClasses}}\"></span>{{/if}}\n    <span class=\"mdc-tab__text-label {{labelClasses}}\">{{label}}</span>\n  </span>\n  <span class=\"mdc-tab-indicator {{indicatorClasses}} {{#if active}}mdc-tab-indicator--active{{/if}}\">\n    <span class=\"mdc-tab-indicator__content {{indicatorContentClasses}} mdc-tab-indicator__content--underline\"></span>\n  </span>\n  <span class=\"mdc-tab__ripple\"></span>\n  </{{#if url}}a{{else}}button{{/if}}>",
        "delete_search": "<form action=\"/delete-search\" method=\"POST\" class=\"{{formClasses}}\">\n  <input type=\"hidden\" name=\"name\" value=\"{{name}}\">\n  <button type=\"submit\" class=\"saved-search-remove mdc-icon-button\" data-mdc-auto-init=\"MDCRipple\">\n    <span class=\"far fa-trash-alt\" aria-hidden=\"true\"></span>\n  </button>\n</form>\n",
        "dialog_favourites": "<aside id=\"favourite-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"favourite-dialog-label\" aria-describedby=\"favourite-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <form class=\"mdc-dialog__surface\">\n      <header class=\"mdc-dialog__header\">\n        <h2 id=\"favourite-dialog-label\" class=\"mdc-dialog__title\">Save favourite</h2>\n      </header>\n      <section id=\"favourite-dialog-description\" class=\"mdc-dialog__content\">\n        If you have a My Volunteer account you can save opportunities you are interested in.\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <a href=\"/sign-in\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\">Sign in</a>\n        <a href=\"/sign-up\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\">Sign up</a>\n      </footer>\n    </form>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>",
        "dialog_volunteer": "<aside id=\"volunteer-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"volunteer-dialog-label\" aria-describedby=\"volunteer-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <form class=\"mdc-dialog__surface\">\n      <header class=\"mdc-dialog__header\">\n        <h2 id=\"volunteer-dialog-label\" class=\"mdc-dialog__title\">Register interest</h2>\n      </header>\n      <section id=\"volunteer-dialog-description\" class=\"mdc-dialog__content\">\n        If you have a My Volunteer account you can send a message to register interest in volunteering opportunities.\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <a href=\"/sign-in\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\">Sign in</a>\n        <a href=\"/sign-up\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\">Sign up</a>\n      </footer>\n    </form>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>",
        "email_days": "{{#if @root.data.searches.items.[0] ~}}\n  {{~#with @root.data.searches.items.[0] ~}}\n    {{~#each (split \"sunday,monday,tuesday,wednesday,thursday,friday,saturday\" \",\")~}}\n      {{~#if (contains ../days (add @index 1))~}}\n        {{~ this ~}},\n      {{~/if~}}\n    {{~/each~}}\n  {{~/with~}}\n{{~/if}}\n",
        "email_frequency": "{{#if @root.data.auth ~}}\n  {{#with @root.data.searches.items.[0].[0] ~}}\n    {{#>components_radio_button\n        id=\"daily\"\n        name=\"frequency\"\n        label=\"Daily\"\n        active=(compare days \"1234567\")~}}\n      {\n        \"url\": \"/update-email-preferences\",\n        \"method\": \"POST\",\n        \"successMessage\": \"You will now recieve an email every day if there are new opportunities matching your preferences\",\n        \"failureMessage\": \"Failed to update email frequency setting to daily\",\n        \"postBody\": {\n          {{~#each (split \"sunday,monday,tuesday,wednesday,thursday,friday,saturday\" \",\")~}}\n            \"{{this}}\": true\n            {{~#unless @last}},{{/unless~}}\n          {{~/each~}}\n        }\n      }\n    {{~/components_radio_button}}\n    {{#>components_radio_button\n        id=\"weekly\"\n        name=\"frequency\"\n        label=\"Weekly\"\n        active=(compare (length days) 1)~}}\n      {\n        \"url\": \"/update-email-preferences\",\n        \"method\": \"POST\",\n        \"successMessage\": \"You will now recieve an email every every {{momentFormat (moment (dateMath \"now+1d\") \"x\") \"dddd\"}} (starting tomorrow) if there are new opportunities matching your preferences\",\n        \"failureMessage\": \"Failed to update email frequency setting to weekly\",\n        \"postBody\": {\n          \"{{lowercase (momentFormat (moment (dateMath \"now+1d\") \"x\") \"dddd\")}}\": true\n        }\n      }\n    {{~/components_radio_button}}\n  {{else}}\n    <div class=\"mdc-form-field\">\n      <label>You don't have any saved searches</label>\n    </div>\n  {{/with}}\n{{/if ~}}\n\n",
        "emails_confirmation_body": "<!doctype html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">\n\n<head>\n  <title>\n  </title>\n  <!--[if !mso]><!-- -->\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <!--<![endif]-->\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style type=\"text/css\">\n    #outlook a {\n      padding: 0;\n    }\n\n    .ReadMsgBody {\n      width: 100%;\n    }\n\n    .ExternalClass {\n      width: 100%;\n    }\n\n    .ExternalClass * {\n      line-height: 100%;\n    }\n\n    body {\n      margin: 0;\n      padding: 0;\n      -webkit-text-size-adjust: 100%;\n      -ms-text-size-adjust: 100%;\n    }\n\n    table,\n    td {\n      border-collapse: collapse;\n      mso-table-lspace: 0pt;\n      mso-table-rspace: 0pt;\n    }\n\n    img {\n      border: 0;\n      height: auto;\n      line-height: 100%;\n      outline: none;\n      text-decoration: none;\n      -ms-interpolation-mode: bicubic;\n    }\n\n    p {\n      display: block;\n      margin: 13px 0;\n    }\n  </style>\n  <!--[if !mso]><!-->\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      @-ms-viewport {\n        width: 320px;\n      }\n\n      @viewport {\n        width: 320px;\n      }\n    }\n  </style>\n  <!--<![endif]-->\n  <!--[if mso]>\n        <xml>\n        <o:OfficeDocumentSettings>\n          <o:AllowPNG/>\n          <o:PixelsPerInch>96</o:PixelsPerInch>\n        </o:OfficeDocumentSettings>\n        </xml>\n        <![endif]-->\n  <!--[if lte mso 11]>\n        <style type=\"text/css\">\n          .outlook-group-fix { width:100% !important; }\n        </style>\n        <![endif]-->\n  <style type=\"text/css\">\n    @media only screen and (min-width:480px) {\n      .mj-column-per-100 {\n        width: 100% !important;\n        max-width: 100%;\n      }\n    }\n  </style>\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      table.full-width-mobile {\n        width: 100% !important;\n      }\n\n      td.full-width-mobile {\n        width: auto !important;\n      }\n    }\n  </style>\n</head>\n\n<body style=\"background-color:#F5F5F5;\">\n  <div style=\"background-color:#F5F5F5;\">\n    <!--[if mso | IE]>\n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:600px;\" width=\"600\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n    <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:600px;\">\n      <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n        <tbody>\n          <tr>\n            <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n              <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:560px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:192px;\">\n                                                <img height=\"auto\" src=\"https://storage.googleapis.com/scvo-cms/scvo-cms-content/images/logos/volunteer_scotland_search.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"192\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, Helvetica, Arial, sans-serif;font-size:16px;line-height:20px;text-align:left;color:#000000;\">\n                                          <p>Hello {{first_name}},</p>\n                                          <p>Thank you for registering interest for <a href=\"https://search.volunteerscotland.net/opportunity/{{opportunity_id}}/{{opportunity_title_slug}}?utm_source=alert&utm_medium=email\" color=\"#42842A\" style=\"color:#42842A;font-weight:bold;\">{{{opportunity_title}}}</a> with {{organisation_name}} (ref:{{opportunity_milo_ref}}) as advertised on Volunteer Scotland's website.</p>\n                                          <p>{{organisation_name}} have received your registration of interest and should be in touch shortly. You can also contact {{#compare opportunity_contact_email \"===\" tsi_contact_email}}via the organisation that manages volunteering in {{tsi_name}}\n                                              {{else}}{{organisation_name}}{{/compare}} using the details below:</p>\n                                          <ul style=\"list-style-type:none;\">\n                                            {{#ifAny opportunity_contact_first_name opportunity_contact_last_name}}\n                                              <li>{{opportunity_contact_first_name}} {{opportunity_contact_last_name}}</li>\n                                            {{/ifAny}}\n                                            <li><a href=\"mailto:{{opportunity_contact_email}}\">{{opportunity_contact_email}}</a></li>\n                                            {{#if opportunity_contact_phone}}\n                                              <li>{{opportunity_contact_phone}}</li>\n                                            {{/if}}\n                                          </ul>\n                                          <p>Kind Regards,</p>\n                                          <p>The Volunteer Scotland Team</p>\n                                          <p>This email was automatically generated by the <a href=\"http://www.volunteerscotland.org.uk\" title=\"Volunteer Scotland\" target=\"_blank\">Volunteer Scotland</a> Website</p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#D7D3CC;background-color:#D7D3CC;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#D7D3CC;background-color:#D7D3CC;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:10px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px 0px 15px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, helvetica, Arial, sans-serif;font-size:14px;line-height:1;text-align:left;color:#ffffff;\">\n                                          <p style=\"margin:0px;\"> &#169; {{momentFormat (moment) \"YYYY\"}} Volunteer Development Scotland Ltd. (also known as Volunteer Scotland) is a registered Scottish charity No. SC013740 and a company limited by guarantee, registered in Scotland, No. SC106743. Our registered Office is Jubilee House, Forthside Way, Stirling. FK8 1QZ. </p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                    <tr>\n                                      <td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:125px;\">\n                                                <img height=\"auto\" src=\"https://www.volunteerscotland.net/media/333407/volunteer_scotland_hi-res_png.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"125\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n                  </table>\n                <![endif]-->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      <![endif]-->\n  </div>\n</body>\n\n</html>",
        "emails_confirmation_subject": "Thank you for registering interest in {{opportunity_title}} for {{organisation_name}} with Volunteer Scotland.\n",
        "emails_register_interest_body": "<!doctype html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">\n\n<head>\n  <title>\n  </title>\n  <!--[if !mso]><!-- -->\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <!--<![endif]-->\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style type=\"text/css\">\n    #outlook a {\n      padding: 0;\n    }\n\n    .ReadMsgBody {\n      width: 100%;\n    }\n\n    .ExternalClass {\n      width: 100%;\n    }\n\n    .ExternalClass * {\n      line-height: 100%;\n    }\n\n    body {\n      margin: 0;\n      padding: 0;\n      -webkit-text-size-adjust: 100%;\n      -ms-text-size-adjust: 100%;\n    }\n\n    table,\n    td {\n      border-collapse: collapse;\n      mso-table-lspace: 0pt;\n      mso-table-rspace: 0pt;\n    }\n\n    img {\n      border: 0;\n      height: auto;\n      line-height: 100%;\n      outline: none;\n      text-decoration: none;\n      -ms-interpolation-mode: bicubic;\n    }\n\n    p {\n      display: block;\n      margin: 13px 0;\n    }\n  </style>\n  <!--[if !mso]><!-->\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      @-ms-viewport {\n        width: 320px;\n      }\n\n      @viewport {\n        width: 320px;\n      }\n    }\n  </style>\n  <!--<![endif]-->\n  <!--[if mso]>\n        <xml>\n        <o:OfficeDocumentSettings>\n          <o:AllowPNG/>\n          <o:PixelsPerInch>96</o:PixelsPerInch>\n        </o:OfficeDocumentSettings>\n        </xml>\n        <![endif]-->\n  <!--[if lte mso 11]>\n        <style type=\"text/css\">\n          .outlook-group-fix { width:100% !important; }\n        </style>\n        <![endif]-->\n  <style type=\"text/css\">\n    @media only screen and (min-width:480px) {\n      .mj-column-per-100 {\n        width: 100% !important;\n        max-width: 100%;\n      }\n    }\n  </style>\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      table.full-width-mobile {\n        width: 100% !important;\n      }\n\n      td.full-width-mobile {\n        width: auto !important;\n      }\n    }\n  </style>\n</head>\n\n<body style=\"background-color:#F5F5F5;\">\n  <div style=\"background-color:#F5F5F5;\">\n    <!--[if mso | IE]>\n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:600px;\" width=\"600\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n    <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:600px;\">\n      <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n        <tbody>\n          <tr>\n            <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n              <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:560px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:192px;\">\n                                                <img height=\"auto\" src=\"https://storage.googleapis.com/scvo-cms/scvo-cms-content/images/logos/volunteer_scotland_search.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"192\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, Helvetica, Arial, sans-serif;font-size:16px;line-height:20px;text-align:left;color:#000000;\">\n                                          <p>Hello {{organisation_contact_first_name}},</p>\n                                          <p>The person below has shown an interest in the following opportunity, <a href=\"https://search.volunteerscotland.net/opportunity/{{opportunity_id}}/{{opportunity_title_slug}}?utm_source=alert&utm_medium=email\" color=\"#42842A\" style=\"color:#42842A;font-weight:bold;\">{{{opportunity_title}}}</a> with {{organisation_name}} (ref:{{opportunity_milo_ref}}) as advertised on Volunteer Scotland's website. <ul style=\"list-style-type:none;\">\n                                              {{#ifAny first_name last_name}}\n                                                <li>Name: {{first_name}} {{last_name}}</li>\n                                              {{/ifAny}}\n                                              {{#ifAny location_address location_city location_postcode}}\n                                                <li>Address: <ul style=\"list-style-type:none;\">\n                                                    {{#if location_address}}\n                                                      <li>{{location_address}}</li>\n                                                    {{/if}}\n                                                    {{#if location_city}}\n                                                      <li>{{location_city}}</li>\n                                                    {{/if}}\n                                                    {{#if location_postcode}}\n                                                      <li>{{location_postcode}}</li>\n                                                    {{/if}}\n                                                  </ul>\n                                                </li>\n                                              {{/ifAny}}\n                                              {{#if phone}}\n                                                <li>Phone: {{phone}}</li>\n                                              {{/if}}\n                                              {{#if email}}\n                                                <li>Email: {{email}}</li>\n                                              {{/if}}\n                                              {{#if message}}\n                                                <li>Message: {{message}}</li>\n                                              {{/if}}\n                                              <li>Date of Enquiry: {{momentFormat (moment) 'YYYY-MM-DD'}}</li>\n                                            </ul>\n                                            {{#compare opportunity_contact_email \"===\" opportunity_contact_email}}\n                                              <p>Please contact them at your earliest convenience. They may contact you directly to discuss their enquiry.</p>\n                                              {{else}}\n                                                <p>This email is for your information only. The primary contact for this enquiry is the Third Sector Interface (TSI). They can be contacted using details below:</p>\n                                                {{#ifAny tsi_contact_first_name tsi_contact_last_name}}\n                                                  <li>{{tsi_contact_first_name}} {{tsi_contact_last_name}}</li>\n                                                {{/ifAny}}\n                                                <li><a href=\"mailto:{{tsi_contact_email}}\">{{tsi_contact_email}}</a></li>\n                                                {{#if tsi_contact_phone}}\n                                                  <li>{{tsi_contact_phone}}</li>\n                                                {{/if}}\n                                                </ul>\n                                            {{/compare}}\n                                            <p>Thank you</p>\n                                            <p>The Volunteer Scotland Team</p>\n                                            <p>This email was automatically generated by the <a href=\"http://www.volunteerscotland.org.uk\" title=\"Volunteer Scotland\" target=\"_blank\">Volunteer Scotland</a> Website</p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#D7D3CC;background-color:#D7D3CC;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#D7D3CC;background-color:#D7D3CC;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:10px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px 0px 15px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, helvetica, Arial, sans-serif;font-size:14px;line-height:1;text-align:left;color:#ffffff;\">\n                                          <p style=\"margin:0px;\"> &#169; {{momentFormat (moment) \"YYYY\"}} Volunteer Development Scotland Ltd. (also known as Volunteer Scotland) is a registered Scottish charity No. SC013740 and a company limited by guarantee, registered in Scotland, No. SC106743. Our registered Office is Jubilee House, Forthside Way, Stirling. FK8 1QZ. </p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                    <tr>\n                                      <td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:125px;\">\n                                                <img height=\"auto\" src=\"https://www.volunteerscotland.net/media/333407/volunteer_scotland_hi-res_png.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"125\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n                  </table>\n                <![endif]-->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      <![endif]-->\n  </div>\n</body>\n\n</html>",
        "emails_register_interest_subject": "Volunteering email opportunity - {{opportunity_title}} (ref: {{opportunity_milo_ref}}) for {{organisation_name}} from {{first_name}} {{last_name}}\n\n\n\n",
        "emails_register_interest_tsi_body": "<!doctype html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">\n\n<head>\n  <title>\n  </title>\n  <!--[if !mso]><!-- -->\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <!--<![endif]-->\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style type=\"text/css\">\n    #outlook a {\n      padding: 0;\n    }\n\n    .ReadMsgBody {\n      width: 100%;\n    }\n\n    .ExternalClass {\n      width: 100%;\n    }\n\n    .ExternalClass * {\n      line-height: 100%;\n    }\n\n    body {\n      margin: 0;\n      padding: 0;\n      -webkit-text-size-adjust: 100%;\n      -ms-text-size-adjust: 100%;\n    }\n\n    table,\n    td {\n      border-collapse: collapse;\n      mso-table-lspace: 0pt;\n      mso-table-rspace: 0pt;\n    }\n\n    img {\n      border: 0;\n      height: auto;\n      line-height: 100%;\n      outline: none;\n      text-decoration: none;\n      -ms-interpolation-mode: bicubic;\n    }\n\n    p {\n      display: block;\n      margin: 13px 0;\n    }\n  </style>\n  <!--[if !mso]><!-->\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      @-ms-viewport {\n        width: 320px;\n      }\n\n      @viewport {\n        width: 320px;\n      }\n    }\n  </style>\n  <!--<![endif]-->\n  <!--[if mso]>\n        <xml>\n        <o:OfficeDocumentSettings>\n          <o:AllowPNG/>\n          <o:PixelsPerInch>96</o:PixelsPerInch>\n        </o:OfficeDocumentSettings>\n        </xml>\n        <![endif]-->\n  <!--[if lte mso 11]>\n        <style type=\"text/css\">\n          .outlook-group-fix { width:100% !important; }\n        </style>\n        <![endif]-->\n  <style type=\"text/css\">\n    @media only screen and (min-width:480px) {\n      .mj-column-per-100 {\n        width: 100% !important;\n        max-width: 100%;\n      }\n    }\n  </style>\n  <style type=\"text/css\">\n    @media only screen and (max-width:480px) {\n      table.full-width-mobile {\n        width: 100% !important;\n      }\n\n      td.full-width-mobile {\n        width: auto !important;\n      }\n    }\n  </style>\n</head>\n\n<body style=\"background-color:#F5F5F5;\">\n  <div style=\"background-color:#F5F5F5;\">\n    <!--[if mso | IE]>\n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:600px;\" width=\"600\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n    <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:600px;\">\n      <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n        <tbody>\n          <tr>\n            <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n              <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#ffffff;background-color:#ffffff;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#ffffff;background-color:#ffffff;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:10px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:560px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:192px;\">\n                                                <img height=\"auto\" src=\"https://storage.googleapis.com/scvo-cms/scvo-cms-content/images/logos/volunteer_scotland_search.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"192\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:20px 0;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:0px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, Helvetica, Arial, sans-serif;font-size:16px;line-height:20px;text-align:left;color:#000000;\">\n                                          <p>Hello {{tsi_contact_first_name}},</p>\n                                          <p>The person below has shown an interest in the following opportunity, <a href=\"https://search.volunteerscotland.net/opportunity/{{opportunity_id}}/{{opportunity_title_slug}}?utm_source=alert&utm_medium=email\" color=\"#42842A\" style=\"color:#42842A;font-weight:bold;\">{{{opportunity_title}}}</a> with {{organisation_name}} (ref:{{opportunity_milo_ref}}) as advertised on Volunteer Scotland's website. <ul style=\"list-style-type:none;\">\n                                              {{#ifAny first_name last_name}}\n                                                <li>Name: {{first_name}} {{last_name}}</li>\n                                              {{/ifAny}}\n                                              {{#ifAny location_address location_city location_postcode}}\n                                                <li>Address: <ul style=\"list-style-type:none;\">\n                                                    {{#if location_address}}\n                                                      <li>{{location_address}}</li>\n                                                    {{/if}}\n                                                    {{#if location_city}}\n                                                      <li>{{location_city}}</li>\n                                                    {{/if}}\n                                                    {{#if location_postcode}}\n                                                      <li>{{location_postcode}}</li>\n                                                    {{/if}}\n                                                  </ul>\n                                                </li>\n                                              {{/ifAny}}\n                                              {{#if phone}}\n                                                <li>Phone: {{phone}}</li>\n                                              {{/if}}\n                                              {{#if email}}\n                                                <li>Email: {{email}}</li>\n                                              {{/if}}\n                                              {{#if message}}\n                                                <li>Message: {{message}}</li>\n                                              {{/if}}\n                                              <li>Date of Enquiry: {{momentFormat (moment) 'YYYY-MM-DD'}}</li>\n                                            </ul>\n                                            {{#compare opportunity_contact_email \"===\" tsi_contact_email}}\n                                              <p>Please contact them at your earliest convenience. They may contact you directly to discuss their enquiry.</p>\n                                              {{else}}\n                                                <p>This email is for your information only. The primary contact for this opportunity is the organisation itself.</p>\n                                            {{/compare}}\n                                            <p>Thank you</p>\n                                            <p>The Volunteer Scotland Team</p>\n                                            <p>This email was automatically generated by the <a href=\"http://www.volunteerscotland.org.uk\" title=\"Volunteer Scotland\" target=\"_blank\">Volunteer Scotland</a> Website</p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n            <tr>\n              <td\n                 class=\"\" width=\"600px\"\n              >\n          \n      <table\n         align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:580px;\" width=\"580\"\n      >\n        <tr>\n          <td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\">\n      <![endif]-->\n              <div style=\"background:#D7D3CC;background-color:#D7D3CC;Margin:0px auto;max-width:580px;\">\n                <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"background:#D7D3CC;background-color:#D7D3CC;width:100%;\">\n                  <tbody>\n                    <tr>\n                      <td style=\"direction:ltr;font-size:0px;padding:0px;text-align:center;vertical-align:top;\">\n                        <!--[if mso | IE]>\n                  <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                \n        <tr>\n      \n            <td\n               class=\"\" style=\"vertical-align:top;width:580px;\"\n            >\n          <![endif]-->\n                        <div class=\"mj-column-per-100 outlook-group-fix\" style=\"font-size:13px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;\">\n                          <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td style=\"vertical-align:top;padding:10px;\">\n                                  <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"\" width=\"100%\">\n                                    <tr>\n                                      <td align=\"left\" style=\"font-size:0px;padding:0px 0px 15px;word-break:break-word;\">\n                                        <div style=\"font-family:Montserrat, helvetica, Arial, sans-serif;font-size:14px;line-height:1;text-align:left;color:#ffffff;\">\n                                          <p style=\"margin:0px;\"> &#169; {{momentFormat (moment) \"YYYY\"}} Volunteer Development Scotland Ltd. (also known as Volunteer Scotland) is a registered Scottish charity No. SC013740 and a company limited by guarantee, registered in Scotland, No. SC106743. Our registered Office is Jubilee House, Forthside Way, Stirling. FK8 1QZ. </p>\n                                        </div>\n                                      </td>\n                                    </tr>\n                                    <tr>\n                                      <td align=\"center\" style=\"font-size:0px;padding:0px;word-break:break-word;\">\n                                        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"border-collapse:collapse;border-spacing:0px;\">\n                                          <tbody>\n                                            <tr>\n                                              <td style=\"width:125px;\">\n                                                <img height=\"auto\" src=\"https://www.volunteerscotland.net/media/333407/volunteer_scotland_hi-res_png.png\" style=\"border:0;display:block;outline:none;text-decoration:none;height:auto;width:100%;\" width=\"125\" />\n                                              </td>\n                                            </tr>\n                                          </tbody>\n                                        </table>\n                                      </td>\n                                    </tr>\n                                  </table>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                        <!--[if mso | IE]>\n            </td>\n          \n        </tr>\n      \n                  </table>\n                <![endif]-->\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      \n              </td>\n            </tr>\n          \n                  </table>\n                <![endif]-->\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!--[if mso | IE]>\n          </td>\n        </tr>\n      </table>\n      <![endif]-->\n  </div>\n</body>\n\n</html>",
        "event_search_form": "<div class=\"mdc-drawer__content\">\n  <form action=\"/events/{{#compare @root.request.url.pathname \"/map\"}}map{{else}}search{{/compare}}\" method=\"GET\" class=\"search-form\" novalidate>\n    <input type=\"hidden\" name=\"sort\" value=\"{{@root.request.params.query.sort}}\" id=\"{{instance_id}}-sort\">\n    {{#if @root.request.params.query.exclude ~}}\n    {{#compare @root.request.params.query.exclude \"!==\" \"\" ~}}\n    <input type=\"hidden\" name=\"exclude\" value=\"locations\">\n    {{/compare ~}}\n    {{/if ~}}\n    <div class=\"h-padding-full\">\n      <div class=\"mdc-layout-grid\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\" style=\"z-index:5;\">\n              <span class=\"far fa-map-marker-alt mdc-text-field__icon geo-lookup\" tabindex=\"0\" title=\"Find my location\" role=\"button\" style=\"pointer-events: initial !important;\"></span>\n              <input type=\"text\" id=\"{{instance_id}}-location\" name=\"location\" class=\"mdc-text-field__input mdc-text-field--fullwidth search-location\" value=\"{{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}{{@root.request.params.query.location}}{{/ifAll}}\" placeholder=\"\" data-lpignore=\"true\" data-location-search='{\n                \"latSelector\": \"[name=\\\"lat\\\"]\",\n                \"lngSelector\": \"[name=\\\"lng\\\"]\",\n                \"laSelector\": \"[name=\\\"la\\\"]\",\n                \"locationServicesSelector\": \".geo-lookup\"\n              }'>\n              <label class=\"mdc-floating-label\" for=\"{{instance_id}}-location\">\n                Location\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n              <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n                <span class=\"mdc-select__dropdown-icon\"></span>\n                <select class=\"mdc-select__native-control\" id=\"distance\" name=\"distance\">\n                  {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n                  <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n                  {{/each}}\n                </select>\n                <label class=\"mdc-floating-label mdc-select__label--float-above\" for=\"sort\">\n                  Within\n                </label>\n                <div class=\"mdc-line-ripple\"></div>\n              </div>\n          </div>\n        </div>\n      </div>\n      {{#if @root.request.params.query.debug_results}}\n        <input type=\"hidden\" name=\"debug_results\" value=\"{{@root.request.params.query.debug_results}}\">\n      {{/if}}\n      <input type=\"hidden\" name=\"lat\" value=\"{{#if @root.request.params.query.location}}{{@root.request.params.query.lat}}{{/if}}\" id=\"location-lat\" />\n      <input type=\"hidden\" name=\"lng\" value=\"{{#if @root.request.params.query.location}}{{@root.request.params.query.lng}}{{/if}}\" id=\"location-lng\" />\n\n      <div class=\"header mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon mdc-text-field-tt b-margin-full\" data-mdc-auto-init=\"MDCTextField\">\n        <input type=\"text\" id=\"what-primary-content\" name=\"keywords\" class=\"mdc-text-field__input\" placeholder=\"\" value=\"{{@root.request.params.query.keywords}}\" data-lpignore=\"true\">\n        <span class=\"fas fa-search active-search-icon mdc-text-field__icon\" role=\"button\" onclick=\" $(this).parents('form:first').submit();\" style=\"pointer-events: initial !important; z-index: 500;\" tabindex=\"-1\"></span></a>\n        <label for=\"what-primary-content\" class=\"mdc-floating-label\">\n          Keywords / categories\n        </label>\n        <div class=\"mdc-line-ripple\"></div>\n      </div>\n      {{!-- {{#each @root.context.metaData.terms ~}}\n        {{#unless noSearchFilter ~}}\n          {{#> components_advanced_checkbox_list name=key label=label}}\n            {{#each termGroups ~}}\n              {{#> components_advanced_checkbox_group\n                  name=(concat ../key '-' key)\n                  label=label\n                  hideParent=(compare (length ../../termGroups) 1)}}\n                {{#each terms ~}}\n                  <!-- termGroups Length: {{length ../../../termGroups}} -->\n                  <!-- noIndent: {{compare (length ../../../termGroups) 1}} -->\n                  {{> components_advanced_checkbox_item\n                      name=../../../../key\n                      value=key\n                      label=label\n                      checked=(contains (getProperty @root.request.params.query ../../../../key) key)\n                      group=(concat ../../../key '-' ../key)\n                      noIndent=(compare (length ../../../termGroups) 1)}}\n                {{/each ~}}\n              {{/components_advanced_checkbox_group}}\n            {{/each ~}}\n          {{/components_advanced_checkbox_list}}\n        {{/unless ~}}\n      {{/each ~}} --}}\n      <div id=\"filter-container-outer\">\n        <div id=\"filter-container-inner\">\n          <button class=\"mdc-button mdc-button--raised mdc-button--large mdc-button--fullwidth mdc-ripple-surface mdc-ripple-surface--primary\" type=\"submit\" id=\"{{instance_id}}-search-submit\" data-mdc-auto-init=\"MDCRipple\">\n            <span class=\"far fa-search fa-fw mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n            Filter\n          </button>\n        </div>\n      </div>\n      <span id=\"filter-indicator\" class=\"fal fa-angle-double-down fa-3x\" style=\"display:none;\"></span>\n    </div>\n  </form>\n</div>",
        "event_search_results": "<aside id=\"save-search-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"save-search-dialog-label\" aria-describedby=\"save-search-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <form action=\"/save-search{{> query_search}}\" method=\"POST\" class=\"mdc-dialog__surface\">\n      <h2 id=\"save-search-dialog-label\" class=\"mdc-dialog__title\">Give your search a name</h2>\n      <section id=\"save-search-dialog-description\" class=\"mdc-dialog__content\">\n        <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n          <input type=\"text\" id=\"saved-search-name\" name=\"name\" class=\"mdc-text-field__input\" value=\"\n{{~#with @root.request.params.query~}}\n            {{~#if keywords~}}\n              {{~keywords~}}\n              {{~#ifAny activities themes services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if activities~}}\n              {{~#each (arrayify activities)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.activities.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny themes services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if themes~}}\n              {{~#each (arrayify themes)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.themes.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if services~}}\n              {{~#each (arrayify services)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.services.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny age_groups availability}}, {{/ifAny~}}\n            {{~/if}}\n            {{~#if age_groups~}}\n              {{~#each (arrayify age_groups)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.age_groups.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny availability}}, {{/ifAny~}}\n            {{~/if}}\n            {{~#if availability~}}\n              {{~#each (arrayify availability)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.availability.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n            {{~/if}}\n            {{~#if location~}}&nbsp;near {{location}} {{/if~}}\n          {{~/with~}}\">\n          <label for=\"saved-search-name\" class=\"mdc-floating-label\">Save search</label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <div class=\"mdc-form-field\">\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"subscribe\" id=\"email-on\"/>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n          <label for=\"email-on\">Send events matching this search by email</label>\n        </div>\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <button type=\"submit\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"accept\">Save</button>\n      </footer>\n    </form>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>\n\n<aside id=\"edit-search-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"edit-search-dialog-label\" aria-describedby=\"edit-search-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <div class=\"mdc-dialog__surface\">\n      {{#if @root.data.auth ~}}\n        {{#with (\n                  querystringify (obj)\n                  keywords=@root.request.params.query.keywords\n                  distance=@root.request.params.query.distance\n                  lat=@root.request.params.query.lat\n                  lng=@root.request.params.query.lng\n                  location=@root.request.params.query.location\n                ) ~}}\n          {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            <h2 id=\"edit-search-dialog-label\" class=\"mdc-dialog__title\">Saved search&ensp;<span class=\"mdc-typography--body1\">{{{partition}}}</span></h2>\n            <section id=\"edit-search-dialog-description\" class=\"mdc-dialog__content\">\n              <div class=\"mdc-chip-set mdc-chip-set--filter\">\n                  {{#> ajax_chip\n                    onUrl=\"/toggle-subscription\"\n                    offUrl=\"/toggle-subscription\"\n                    onText=\"Send me events matching this search by email\"\n                    offText=\"Send me events matching this search by email\"\n                    onMethod=\"POST\"\n                    offMethod=\"POST\"\n                    iconClasses=\"fal fa-fw fa-times\"\n                    on=partitionActive\n                  }}\n                    {\n                    \"onData\": {\n                    \"name\": {{{stringify ../partition}}}\n                    },\n                    \"offData\": {\n                    \"name\": {{{stringify ../partition}}}\n                    }\n                    }\n                  {{/ajax_chip}}\n                </div>\n              </section>\n              <footer class=\"mdc-dialog__actions\">\n                <button type=\"button\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"close\">Close</button>\n              </footer>\n            {{/with ~}}\n          {{/if ~}}\n        {{/with ~}}\n      {{/if ~}}\n    </div>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>\n\n{{> dialog_favourites}}\n\n<div class=\"mdc-layout-grid head\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n      {{#> components_tab_bar}}\n        {{> search_button}}\n        {{> components_tab url=(concat \"/events/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/events/search\")}}\n        {{> components_tab url=(concat \"/events/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/events/map\")}}\n      {{/components_tab_bar}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone pagination-desktop\">\n      {{!-- {{#if @root.data.auth ~}}\n        {{#with (\n          querystringify (obj)\n          keywords=@root.request.params.query.keywords\n          distance=@root.request.params.query.distance\n          lat=@root.request.params.query.lat\n          lng=@root.request.params.query.lng\n          location=@root.request.params.query.location\n        ) ~}}\n          <script>\n            document.addEventListener('DOMContentLoaded', function() {\n              console.log('Current Query String:', {{{stringify this}}});\n              console.log('Saved Search Query Strings:', {{{stringify (map @root.data.searches.items.[0] (getProp 'querystring'))}}});\n            });\n          </script>\n          {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this))}}\n              <div class=\"pull-right\">\n                Saved search&ensp;\n                <span class=\"mdc-typography--body1\">\n                  <a name=\"#\" data-dialog-target=\"#edit-search-dialog\" style=\"cursor:pointer;\">{{{partition}}}</a>\n                </span>\n              </div>\n            {{/with ~}}\n          {{else}}\n            <button class=\"mdc-button mdc-button--raised save-search hide-sm hide-md\" id=\"save-search-button\" data-dialog-target=\"#save-search-dialog\">\n              <span class=\"fas fa-search-plus mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Save/email this search\n            </button>\n            <button class=\"mdc-button mdc-button--raised filter-search hide-lg filter-search-button\" id=\"filter-search-button\">\n              <span class=\"fas fa-search mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Search filters\n            </button>\n          {{/if ~}}\n        {{/with ~}}\n      {{else}}\n        <a href=\"/sign-up\" class=\"mdc-button mdc-button--raised save-search hide-sm hide-md\" id=\"save-search-button\">\n          <span class=\"fas fa-sign-in-alt mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Sign up to create email alerts\n        </a>\n        <button class=\"mdc-button mdc-button--raised filter-search hide-lg filter-search-button\" id=\"filter-search-button\" data-drawer-target=\"#sidebar-temporary\">\n          <span class=\"fas fa-search mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Search filters\n        </button>\n      {{/if ~}} --}}\n    </div>\n  </div>\n</div>\n<div class=\"mdc-layout-grid grid-content\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-9-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n      {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n      {{#compare @root.data.search_data.detailed_results.hits.total \">\" 0 ~}}\n        <form action=\"{{{@root.request.url.path}}}\" method=\"GET\">\n          {{#each (split \"keywords,exclude,location,lat,lng,la\" \",\")}}\n            {{#if (getProperty @root.request.params.query this) ~}}\n              <input type=\"hidden\" name=\"{{this}}\" value=\"{{getProperty @root.request.params.query this}}\" />\n            {{/if ~}}\n          {{/each ~}}\n          <input type=\"hidden\" name=\"distance\" value=\"{{default @root.request.params.query.distance 10}}\" />\n          {{#if @root.request.params.query.debug_results}}\n            <input type=\"hidden\" name=\"debug_results\" value=\"{{@root.request.params.query.debug_results}}\">\n          {{/if}}\n          {{> event_search_sort}}\n        </form>\n      {{/compare ~}}\n    </div>\n  </div>\n</div>\n\n{{#if @root.request.params.query.debug_results}}\n  <div class=\"v-padding-full\">\n    <pre>\n{{{safeStringify @root.data.search_data.detailed_results.request}}}\n    </pre>\n  </div>\n{{/if}}\n\n{{#each @root.data.search_data.detailed_results.hits.hits ~}}\n  {{#if @root.request.params.query.debug_results}}\n    <div class=\"v-padding-full\">\n      <pre>\nSCORE: {{_score}}\nDISTANCE: {{numberFormat fields.distance.[0] \"en-GB\" 1}} miles\nLAST MODIFIED: {{#with (momentDistance (moment _source.date_last_modified \"x\") null \"days\")~}}\n  {{~#compare this \"<=\" 0~}}\n    {{replace (concat this \"\") \"-\" \"\"}} days ago\n  {{~else~}}\n    {{this}} days in the future\n  {{~/compare~}}\n{{/with}}\n\nHIGHLIGHTS:\n{{{safeStringify highlight}}}\n      </pre>\n    </div>\n  {{/if}}\n  {{> event_search_result _source distance=fields.distance.[0]}}\n{{/each ~}}\n\n<div class=\"foot\">\n  {{> pagination firstLastNavigation=true paging=@root.data.search_data.detailed_results.pagination}}\n\n  {{#if @root.data.auth ~}}\n    {{#with (\n      querystringify (obj)\n      keywords=@root.request.params.query.keywords\n      distance=@root.request.params.query.distance\n      lat=@root.request.params.query.lat\n      lng=@root.request.params.query.lng\n      location=@root.request.params.query.location\n    ) ~}}\n      <script>\n        document.addEventListener('DOMContentLoaded', function() {\n          console.log('Current Query String:', {{{stringify this}}});\n          console.log('Saved Search Query Strings:', {{{stringify (map @root.data.searches.items.[0] (getProp 'querystring'))}}});\n        });\n      </script>\n      {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n        {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this))}}\n          <div class=\"pull-right\">\n            Saved search&ensp;\n            <span class=\"mdc-typography--body1\">\n              <a name=\"#\" data-dialog-target=\"#edit-search-dialog\" style=\"cursor:pointer;\">{{{partition}}}</a>\n            </span>\n          </div>\n        {{/with ~}}\n      {{else}}\n        <button class=\"mdc-button mdc-button--raised save-search hide-lg\" id=\"save-search-button\" data-dialog-target=\"#save-search-dialog\">\n          <span class=\"fas fa-search-plus mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Save/email this search\n        </button>\n      {{/if ~}}\n    {{/with ~}}\n  {{else}}\n    <a href=\"/sign-up\" class=\"mdc-button mdc-button--raised save-search hide-lg\" id=\"save-search-button\">\n      <span class=\"fas fa-sign-in-alt mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Sign up to create email alerts\n    </a>\n  {{/if ~}}\n</div>",
        "event_search_sort": "<div class=\"mdc-select pull-right\" data-mdc-auto-init=\"MDCSelect\">\n  <span class=\"mdc-select__dropdown-icon\"></span>\n  <select class=\"mdc-select__native-control\" id=\"sort\" name=\"sort\" onchange=\"this.form.submit();\">\n    <option value=\"relevance\" {{#unless @root.request.params.query.sort}} selected {{/unless}}>Relevance</option>\n    {{#if @root.request.params.query.location}}<option value=\"distance\"{{#compare @root.request.params.query.sort \"===\" \"distance\"}} selected{{/compare}}{{#compare @root.request.params.query.exclude \"===\" \"locations\"}} disabled{{else}}{{#compare @root.request.params.query.location \"===\" \"\"}} disabled{{/compare}}{{/compare}}>Distance</option>{{/if}}\n    <option value=\"newest\"{{#compare @root.request.params.query.sort \"===\" \"newest\"}} selected{{/compare}}>Newest</option>\n    <option value=\"oldest\"{{#compare @root.request.params.query.sort \"===\" \"oldest\"}} selected{{/compare}}>Oldest</option>\n  </select>\n  <div class=\"mdc-floating-label mdc-select__label--float-above\" for=\"sort\">\n    Sort by\n  </div>\n  <div class=\"mdc-line-ripple\"></div>\n</div>",
        "event_actions": "<div class=\"mdc-card__actions\">\n  <div class=\"mdc-card__action-buttons demo-card__action-buttons--text-only mdc-card__actions--full-bleed\">\n    {{#compare action \"===\" \"organisation\" ~}}\n    <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\" class=\"mdc-card__action hide-sm\">Find out more about {{organisation_name}}</a>\n    {{else}}\n    <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action hide-sm\">Find out more</a>\n    <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action hide-md hide-lg\"><span class=\"fal fa-info-circle fa-fw fa-2x\" aria-hidden=\"true\"></span></a>\n    {{/compare ~}}\n  </div>\n  <div class=\"mdc-card__action-icons pull-right\">\n    {{!-- <div id=\"action-chips\" class=\"mdc-chip-set mdc-chip-set--filter\">\n      {{#compare @root.route.name \"!==\" \"home\" ~}}\n      {{#if event_contact_email ~}}\n      {{> register_interest_faux_chip id=Id}}\n      {{else}}\n        {{> register_interest_faux_chip disabled=true}}\n      {{/if ~}}\n      {{/compare ~}}\n      {{> favourite_chip id=Id}}\n    </div>\n    {{#compare action \"===\" \"remove\" ~}}\n    <a href=\"{{{@root.request.fullUrl}}}\" onclick=\"sqlRemoveInterest('{{Id}}')\" class=\"mdc-icon-button mdc-card__action mdc-card__action--icon\" title=\"Remove from this list\"><span class=\"far fa-ban\"></span></a>\n    {{/compare ~}} --}}\n  </div>\n</div>\n",
        "event_availability_selector": "<div class=\"table-responsive\">\n  <table class=\"table table-condensed h-padding\">\n    <thead>\n      <tr>\n        <th></th>\n        <th><p>AM</p></th>\n        <th><p>PM</p></th>\n        <th><p>Eve</p></th>\n      </tr>\n    </thead>\n    <tbody>\n\n      {{#each @root.context.metaData.terms.availability.termGroups}}\n      <tr>\n        <th><p>{{capitalize label}}</p></th>\n        {{#each this.terms}}\n        <td>\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" name=\"availability[]\" class=\"mdc-checkbox__native-control\" value=\"{{@key}}\"{{#if (contains @root.request.params.query.availability @key)}} checked{{/if}}>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark__path\" fill=\"none\" stroke=\"white\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"></path>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n        </td>\n        {{/each}}\n      </tr>\n      {{/each}}\n    </tbody>\n  </table>\n</div>",
        "event_description": "{{#if description ~}}\n  <div class=\"search-result-article__snippet mdc-typography--body1\">\n    <div style=\"max-height: {{limit}};\" class=\"faded-overflow\">\n      {{{description}}}\n    </div>\n  </div>\n{{/if ~}}",
        "event_full": "<div class=\"mdc-card content-primary full\" data-event-id=\"{{Id}}\" data-event-layout=\"Full\" data-event-context=\"{{default viewContext \"Vacancy Page\"}}\">\n  {{> event_key_info}}\n  <hr class=\"mdc-list-divider\" />\n  <div class=\"content-primary-info-container\">\n    <div class=\"mdc-layout-grid\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone action\">\n          {{#>components_tab_bar id=\"event-tab-bar\" defaultTabIdentifier=\"hash\"}}\n          {{>components_tab iconClasses=\"far fa-list-ul fa-fw\" label=\"Information\" active=true tabName=\"information\"}}\n          {{#if geo_coords}}\n          {{>components_tab iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Location\" active=false tabName=\"location\"}}\n          {{/if}}\n          {{!-- {{>components_tab iconClasses=\"far fa-edit fa-fw\" label=\"Notes\" active=false tabName=\"notes\"}} --}}\n          {{/components_tab_bar}}\n        </div>\n      </div>\n    </div>\n    <hr class=\"mdc-list-divider\" />\n    <div class=\"panels\" for=\"event-tab-bar\">\n      <div class=\"panel panel--active mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"false\" data-tab-name=\"information\">\n        {{!-- {{#ifAny activities.length themes.length ~}}\n        <div class=\"key-info-extra\">\n          <ul class=\"fa-ul\">\n            {{#compare (length activities) \">\" 0 ~}}\n            <li class=\"mdc-card__info--content-primary-work-type reference mdc-typography--body1\">\n              <span class=\"fa-li\"><span class=\"far fa-briefcase fa-fw\" title=\"Activites\"></span></span>\n              {{#each activities}}\n              <a href=\"/search?activities={{urlencode (slugify (replace this \"/\" \"-\"))}}\">{{{this}}}</a>{{#unless @last}}, {{/unless}}\n              {{/each}}\n            </li>\n            {{/compare ~}}\n            {{#compare (length themes) \">\" 0 ~}}\n            <li class=\"mdc-card__info--content-primary-client-group mdc-typography--body1\">\n              <span class=\"fa-li\"><span class=\"far fa-users fa-fw\" title=\"Themes\"></span></span>\n              {{#each themes ~}}\n              <a href=\"/search?themes={{urlencode (slugify (replace this \"/\" \"-\"))}}\">{{{this}}}</a>{{#unless @last}}, {{/unless}}\n              {{/each ~}}\n            </li>\n            {{/compare ~}}\n          </ul>\n        </div>\n        {{/ifAny ~}} --}}\n\n        <div class=\"detailed-info\">\n          {{#ifAny description description_html ~}}\n          <h4 class=\"mdc-typography--headline6\">Description</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if description_html}}{{{description_html}}}{{else}}{{description}}{{/if}}\n          </p>\n          {{/ifAny ~}}\n          {{#if weblink ~}}\n          <ul class=\"fa-ul\">\n            <li class=\"mdc-typography--body1\">\n              <span class=\"fa-li\"><span class=\"far fa-link fa-fw\" title=\"Website\"></span></span>\n              <a href=\"{{fixUrl weblink \"http\"}}\"{{#if weblink_tooltip}} title=\"{{weblink_tooltip}}\"{{/if}}>{{#if weblink_title}}{{weblink_title}}{{else}}{{weblink}}{{/if}}</a>\n            </li>\n          </ul>\n          {{/if ~}}\n          {{#if organisation_aims_and_objectives ~}}\n          <h4 class=\"mdc-typography--headline6\">Organisation aims and objectives</h4>\n          <p class=\"mdc-typography--body1\">\n            {{{organisation_aims_and_objectives}}}\n          </p>\n          {{/if ~}}\n          {{#if availability_slugs.length ~}}\n          <h4 class=\"mdc-typography--headline6\">Availability</h4>\n          <p class=\"mdc-typography--body1\">\n            {{>event_timings_display availability_slugs}}\n          </p>\n          {{#if timings_description ~}}\n          <p class=\"mdc-typography--body1\">\n            {{{timings_description}}}\n          </p>\n          {{/if ~}}\n          {{/if ~}}\n          {{#if frequency_commitment_details ~}}\n          <h4 class=\"mdc-typography--headline6\">Frequency and commitment details</h4>\n          <p class=\"mdc-typography--body1\">\n            {{{frequency_commitment_details}}}\n          </p>\n          {{/if ~}}\n          {{#ifAny restriction_details experience_required travel_details minimum_age maximum_age ~}}\n          <h4 class=\"mdc-typography--headline6\">Restrictions</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if restriction_details ~}}\n            {{#compare restriction_details \"!==\" \"n/a\" ~}}\n            {{{restriction_details}}}<br />\n            {{/compare ~}}\n            {{/if ~}}\n            {{#if experience_required ~}}\n            <strong>Experience required: </strong> {{{experience_required}}}<br />\n            {{/if ~}}\n            {{#if travel_details ~}}\n            <strong>Travel details: </strong> {{{travel_details}}}<br />\n            {{/if ~}}\n            {{#if minimum_age ~}}\n            <strong>Minimum age: </strong> {{{minimum_age}}}<br />\n            {{/if ~}}\n            {{#if maximum_age ~}}\n            {{#compare maximum_age \"<=\" 26}}\n            <strong>Maximum age: </strong> {{{maximum_age}}}<br />\n            {{/compare}}\n            {{/if ~}}\n          </p>\n          {{/ifAny ~}}\n\n          {{#ifAny travel_expenses expenses_paid taster_available taster_details support_options ~}}\n          <h4 class=\"mdc-typography--headline6\">Support</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if expenses_paid ~}}\n            <strong>Expenses paid: </strong> {{#compare expenses_paid \"===\" true}}Yes{{else}}No{{/compare}}<br />\n            {{/if ~}}\n            {{#if travel_expenses ~}}\n            <strong>Expenses details: </strong> {{{travel_expenses}}}<br />\n            {{/if ~}}\n            {{#if taster_available ~}}\n            <strong>Taster available: </strong> {{#compare taster_available \"===\" true}}Yes{{else}}No{{/compare}}<br />\n            {{/if ~}}\n            {{#if taster_details ~}}\n            <strong>Taster details: </strong> {{{taster_details}}}<br />\n            {{/if ~}}\n            {{#if support_options ~}}\n            <strong>Support: </strong>\n            {{#compare (getType support_options) \"===\" \"string\" ~}}\n            {{{support_options}}}<br />\n            {{else}}\n            {{#each support_options ~}}\n            {{{this}}}{{#unless @last}}, {{/unless}}<br />\n            {{/each ~}}\n            {{/compare ~}}\n            {{/if ~}}\n          </p>\n          {{/ifAny ~}}\n\n          {{#unless event_contact_email}}\n          <p class=\"mdc-typography--body1\">You can't volunteer for this event using this site. {{#if organisation_website}}Please contact the organisation directly using <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a> for more information.{{/if}}</p>\n          {{/unless}}\n\n          <div class=\"mdc-typography--body1 report pull-right\">\n            <span class=\"fas fa-flag fa-fw\" title=\"Report this event\"></span>\n            <a href=\"mailto:milosupport@scvo.org.uk?subject=Report%20event:%20{{urlencode title}}%20({{urlencode milo_ref}})%20via%20Volunteer%20Scotland%20Search&body=I%20would%20like%20to%20report%20this%20event%20for%20the%20following%20reasons:\">Report this event</a>\n          </div>\n\n          <div class=\"mdc-typography--body2 last-modified\">\n            <span class=\"far fa-calendar-alt\" aria-hidden=\"true\"></span>\n            <span title=\"Updated on {{momentFormat (moment date_last_modified \"x\") \"YYYY-MM-DD hh:mm\"}}\">Last updated {{momentFromNow date_last_modified}}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"panel mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"true\" data-tab-name=\"notes\">\n        <div class=\"text-field-container user-notes\">\n          {{#if @root.data.auth ~}}\n          <form action=\"/save-notes\" method=\"POST\" data-ajax-form='{\"successMessage\": \"Notes saved\",\"failureMessage\": \"Failed to save notes\",\"successCallback\": \"notesSaved\",\"id\": \"{{Id}}\"}'>\n            <div>\n              <textarea class=\"mdc-text-field__input\" data-simple-mde='{\n                \"forceSync\": true,\n                \"toolbar\": [\"heading-1\", \"heading-2\", \"bold\", \"italic\", \"|\", \"unordered-list\", \"ordered-list\", \"link\"]\n              }' name=\"notes\" id=\"notes-{{Id}}\" data-id=\"{{Id}}\">{{getProperty @root.data.profileInfo.notes Id}}</textarea>\n              <input type=\"hidden\" name=\"id\" value=\"{{Id}}\">\n            </div>\n            <div class=\"save-button-block\">\n              <button type=\"submit\" class=\"mdc-button mdc-button--raised\">\n                <span class=\"far fa-save mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                Save notes\n              </button>\n              <button type=\"button\" class=\"mdc-button mdc-button--raised mdc-button--warning\" id=\"delete-notes-{{Id}}\" data-id=\"{{Id}}\" data-ajax-button='{\"url\": \"/delete-notes\",\"method\": \"POST\",\"successMessage\": \"Notes deleted\",\"failureMessage\": \"Failed to delete notes\",\"successCallback\": \"clearNotes\",\"postBody\": { \"id\": \"{{Id}}\"}}'{{#unless (getProperty @root.data.profileInfo.notes Id)}} disabled{{/unless}}>\n                <span class=\"far fa-remove mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                Delete notes\n              </button>\n              <div class=\"mdc-typography--caption\">\n                Any notes you write here are private on your account and are not shared with {{organisation_name}}. Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>.\n              </div>\n            </div>\n          </form>\n          {{else}}\n          <div class=\"detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              If you <a href=\"/sign-up\">sign up</a>, you can private write notes here.\n              <a href=\"/sign-in\">Sign in</a> if you already have a My Volunteer account.\n            </p>\n          </div>\n          {{/if ~}}\n        </div>\n      </div>\n\n      <div class=\"panel mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"true\" data-tab-name=\"location\">\n        <div class=\"location-info\">\n          {{#compare (length (arrayify geo_coords)) \">\" 0 ~}}\n          <div class=\"container-content container-map\">\n            <div id=\"map-content-primary\" data-map-name=\"eventMap\" data-map-clustered-options='{}'>\n              {{#each (arrayify geo_coords) ~}}\n              <marker style=\"display:none;\" data-map=\"eventMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-title=\"{{../organisation_name}} - {{../title}}\">\n                <h4 class=\"mdc-typography--headline7\">{{../organisation_name}}</h4>\n                {{#if (itemAt (arrayify (split ../postcode \",\")) @index) ~}}\n                <div class=\"mdc-typography--body2 v-margin\">\n                  Postcode: {{itemAt (arrayify (split ../postcode \",\")) @index}}\n                </div>\n                {{/if ~}}\n                <p class=\"mdc-typography--body2\">{{../title}}</p>\n              </marker>\n              {{/each ~}}\n            </div>\n          </div>\n          {{#compare advertised_areas.length \">\" 0 ~}}\n          <div class=\"detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              This event is also advertised across\n              {{#compare (getType advertised_areas) \"string\" ~}}\n              {{{advertised_areas}}}.\n              {{else}}\n              {{#each advertised_areas ~}}\n              {{#if @last}} and {{/if}}{{{this}}}{{#unless @last}}{{#compare ../advertised_areas.length \">\" 2}},{{/compare}} {{else}}.{{/unless}}\n              {{/each ~}}\n              {{/compare ~}}\n            </p>\n          </div>\n          {{/compare ~}}\n          {{else}}\n          <div class=\"container-content detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              {{#compare advertised_areas.length \">\" 0 ~}}\n              This event is not listed at a specific location but is advertised across\n              {{#compare (getType advertised_areas) \"string\" ~}}\n              {{{advertised_areas}}}.\n              {{else}}\n              {{#each advertised_areas ~}}\n              {{#if @last}} and {{/if}}{{{this}}}{{#unless @last}}{{#compare ../advertised_areas.length \">\" 2}},{{/compare}} {{else}}.{{/unless}}\n              {{/each ~}}\n              {{/compare ~}}\n              {{else}}\n              This event is not listed at a specific location.\n              {{/compare ~}}\n            </p>\n          </div>\n          {{/compare ~}}\n        </div>\n      </div>\n    </div>\n\n    {{> event_actions slug=slug Id=Id action=\"organisation\"}}\n  </div>\n</div>\n<script>\nfunction clearNotes(data) {\n  $('#notes-' + this.request.data.id)[0].mde.value('');\n  this.$button.prop('disabled', true);\n}\nfunction notesSaved(evt, data) {\n  // console.log('notesSaved Arguments:', arguments);\n  $('#delete-notes-' + data.id).prop('disabled', false);\n}\nwindow.eventId = '{{Id}}';\n</script>",
        "event_gist": "<div class=\"mdc-card content-primary gist\" data-event-id=\"{{Id}}\">\n  <div class=\"mdc-card__info--content-primary-row\">\n    <div class=\"mdc-card__media mdc-card__media--square demo-card__media search-result-card__media--content-secondary\" style=\"background-image:url({{organisation_logo_url}});\"></div>\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline7\">\n        {{title}}\n      </div>\n      <div class=\"mdc-card__info--content-primary-secondary mdc-typography--body1\">\n        <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">{{organisation_name}}</a>\n      </div>\n    </div>\n  </div>\n  {{> event_actions slug=slug Id=Id}}\n</div>",
        "event_json_ld": "{\n  \n}",
        "event_key_info": "<div class=\"mdc-card__info--content-primary-row\">\n  <div class=\"mdc-card__info--content-primary\">\n    {{#ifAny (compare @root.route.name \"===\" \"event_search\") ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n    <div class=\"v-margin pull-right mdc-card__info--search-distance\">\n      {{#if distance ~}}\n      {{#ifAll (compare distance \"!==\" \"\") (compare distance \"!==\" \"Infinity\") (compare distance \"<=\" @root.request.params.query.distance) ~}}\n      {{> event_location_distance distance=distance}}\n      {{else}}\n      {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n      {{> event_location_home}}\n      {{else}}\n      {{#ifAny (compare (getType advertised_areas) \"string\") (compare advertised_areas.length \">\" 0) ~}}\n      {{> event_location_areas advertised_areas=advertised_areas}}\n      {{/ifAny ~}}\n      {{/if ~}}\n      {{/ifAll ~}}\n      {{else}}\n      {{#compare distance \"===\" 0 ~}}\n      {{> event_location_distance distance=0.1}}\n      {{else}}\n      {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n      {{> event_location_home}}\n      {{else}}\n      {{> event_location_areas advertised_areas=advertised_areas}}\n      {{/if ~}}\n      {{/compare ~}}\n      {{/if ~}}\n    </div>\n    {{else}}\n    {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n    <div class=\"v-margin pull-right mdc-card__info--search-distance\">\n      {{> event_location_home}}\n    </div>\n    {{/if ~}}\n    {{/ifAll ~}}\n    {{/ifAny ~}}\n    {{#compare @root.route.name \"===\" \"event\" ~}}\n    {{#if goodhq_organisation.image_url ~}}\n    <div class=\"mdc-card__media mdc-card__media--content-secondary pull-right\">\n      <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">\n        <img src=\"{{goodhq_organisation.image_url}}\" alt=\"{{organisation_name}}\" />\n      </a>\n    </div>\n    {{/if ~}}\n    {{#unless (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null) \"\") ~}}\n    {{#compare view \"===\" \"full\" ~}}\n    {{#ifAny @root.request.params.query.page @root.request.params.query.keywords @root.request.params.query.location @root.request.params.query.activities @root.request.params.query.themes @root.request.params.query.organisation_activities @root.request.params.query.has_events @root.request.params.query.volunteersearch_types @root.request.params.query.age_groups @root.request.params.query.services ~}}\n    <div class=\"b-margin\">\n      <a href=\"/search{{> query_search}}\" class=\"back-to-results\"><span class=\"far fa-chevron-circle-left\" aria-hidden=\"true\"></span> <span class=\"underline\">Back to search results</span></a>\n    </div>\n    {{/ifAny ~}}\n    {{/compare ~}}\n    {{/unless ~}}\n    {{/compare ~}}\n    <h2 class=\"mdc-card__info--content-primary-title mdc-typography--headline6\">\n      <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}\">\n        <span class=\"hover-underline\">{{title}}</span>\n      </a>\n    </h2>\n    {{#ifAll organisation_id organisation_name organisation_name_slug ~}}\n    <ul class=\"fa-ul organisation\">\n      <li class=\"mdc-card__info--content-primary-organisation mdc-typography--body1\">\n        <span class=\"fa-li\"><span class=\"far fa-home-heart\" title=\"Organisation\"></span></span>\n        <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">{{organisation_name}}</a>\n      </li>\n    </ul>\n    {{/ifAll ~}}\n    {{#ifAny start_date end_date milo_ref volunteersearch_type ~}}\n    <ul class=\"fa-ul first\">\n      {{#ifAll start_date end_date ~}}\n      {{#compare (momentFormat (moment start_date \"x\") \"Do MMMM YYYY\") (momentFormat (moment end_date \"x\") \"Do MMMM YYYY\") ~}}\n      <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n        <span class=\"fa-li\"><span class=\"far fa-calendar-alt fa-fw\" title=\"Start date\"></span></span>\n        Date: {{momentFormat (moment start_date \"x\") \"Do MMMM YYYY\"}}\n      </li>\n      {{else}}\n      <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n        <span class=\"fa-li\"><span class=\"far fa-calendar-alt fa-fw\" title=\"Start date\"></span></span>\n        Dates: {{momentFormat (moment start_date \"x\") \"Do MMMM YYYY\"}} – {{momentFormat (moment end_date \"x\") \"Do MMMM YYYY\"}}\n      </li>\n      {{/compare ~}}\n      {{else}}\n      {{#compare start_date \">\" (moment) ~}}\n      <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n        <span class=\"fa-li\"><span class=\"far fa-calendar-alt fa-fw\" title=\"Start date\"></span></span>\n        Date: {{momentFormat (moment start_date \"x\") \"Do MMMM YYYY\"}}\n      </li>\n      {{/compare ~}}\n      {{/ifAll ~}}\n      {{#if milo_ref ~}}\n        <li class=\"mdc-card__info--content-primary-reference mdc-typography--body1\">\n          <span class=\"fa-li\"><span class=\"far fa-hashtag\" title=\"Reference\"></span></span>\n          {{milo_ref}}\n        </li>\n      {{/if ~}}\n      {{#if volunteersearch_type ~}}\n      {{#compare volunteersearch_type.length \">\" 0 ~}}\n        <li class=\"mdc-card__info--content-primary-reference mdc-typography--body1\">\n          <span class=\"fa-li\"><span class=\"far fa-info-circle\" title=\"Specialist role\"></span></span>\n          {{#each volunteersearch_type ~}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}\n        </li>\n      {{/compare ~}}\n      {{/if ~}}\n    </ul>\n    {{/ifAny ~}}\n  </div>\n  {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) Id) ~}}\n  {{#ifAny event_contact_first_name event_contact_last_name organisation_website ~}}\n  <div class=\"mdc-card__info--content-primary\">\n    <h4 class=\"mdc-typography--headline6 t-margin-full\">Contact</h4>\n    {{#ifAny event_contact_first_name event_contact_last_name ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Name: </strong> {{{event_contact_first_name}}} {{{event_contact_last_name}}}\n    </div>\n    {{/ifAny ~}}\n\n    {{#if event_contact_email ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Email: </strong> <a href=\"mailto:{{{event_contact_email}}}\">{{{event_contact_email}}}</a>\n    </div>\n    {{/if ~}}\n\n    {{#if organisation_website ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n    </div>\n    {{/if ~}}\n  </div>\n  {{/ifAny ~}}\n  {{/if ~}}\n</div>",
        "event_list": "<div class=\"mdc-card content-primary list\" data-event-id=\"{{Id}}\" data-event-layout=\"List\" data-event-context=\"{{default viewContext \"Other\"}}\">\n  {{> event_key_info}}\n  <hr class=\"mdc-list-divider\" />\n  {{> event_description limit=\"10.5rem\" description=description}}\n  {{> event_actions slug=slug Id=Id}}\n</div>",
        "event_location_areas": "<ul class=\"fa-ul areas\">\n  <li class=\"mdc-typography--body2\">\n    <span class=\"fa-li\"><span class=\"far fa-location-arrow fa-fw\" title=\"Location\"></span></span>\n    {{#compare (getType advertised_areas) \"string\" ~}}\n    {{{advertised_areas}}}\n    {{else}}\n    {{#compare advertised_areas.length \">\" 3 ~}}\n    {{advertised_areas.length}} areas\n    {{else}}\n    {{#each advertised_areas ~}}\n    {{#if (contains (map @root.data.location_data.la_results.aggregations.local_authority_areas.buckets (getProp \"key\")) this) ~}}\n    <span class=\"area\">{{{this}}}</span>\n    {{/if ~}}\n    {{/each ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n  </li>\n</ul>",
        "event_location_distance": "<ul class=\"fa-ul\">\n  <li class=\"mdc-typography--body2\">\n    <span class=\"fa-li\"><span class=\"fas fa-location-arrow fa-fw\" title=\"Distance\"></span></span>\n    {{#compare distance \"<\" 4 ~}}\n      Less than {{inflect (round distance \"up\") \"mile\" \"miles\" true}} away\n    {{else}}\n      {{#compare distance \"<\" 10 ~}}\n        Within {{round distance \"up\"}} miles\n      {{else}}\n        {{round distance \"up\"}} miles away\n      {{/compare ~}}\n    {{/compare ~}}\n  </li>\n</ul>",
        "event_location_home": "<ul class=\"fa-ul\">\n  <li class=\"mdc-typography--body2\">\n    <span class=\"fa-li\"><span class=\"far fa-location-arrow fa-fw\" title=\"Location\"></span></span>\n    Home-based\n  </li>\n</ul>",
        "event_map": "<div class=\"map-content\" data-event-id=\"{{Id}}\" data-event-layout=\"Map\" data-event-context=\"{{default viewContext \"Map\"}}\">\n  <h3 class=\"mdc-typography--headline7 map-info post-title\">\n    <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}\">{{title}}</a>\n  </h3>\n  {{#if organisation_name ~}}\n  <div class=\"mdc-typography--body1 v-margin post-info-item\">\n    {{organisation_name}}\n  </div>\n  {{/if ~}}\n  {{#if map_postcode ~}}\n  <div class=\"mdc-typography--body2 v-margin post-info-extra\">\n    Postcode: {{map_postcode}}\n  </div>\n  {{/if ~}}\n  <div class=\"mdc-typography--body2 post-info post-info-extra\">\n    {{#if description ~}}\n    <div style=\"max-height: 2.8rem;\"  class=\"post-info-item post-info-description faded-overflow\">\n      {{{description}}}\n    </div>\n    {{/if ~}}\n  </div>\n  <div class=\"mdc-typography--body2\">\n    <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action\">Find out more</a>\n  </div>\n</div>",
        "event_mini": "<div class=\"mdc-card content-primary mini\" data-event-id=\"{{Id}}\" data-event-layout=\"Mini\" data-event-context=\"{{default viewContext \"Other\"}}\">\n  {{> event_key_info}}\n  {{> event_description limit=\"4.5rem\" description=description}}\n  {{> event_actions slug=slug Id=Id}}\n</div>",
        "event_notes": "{{#compare (trim (getProperty @root.data.profileInfo.notes Id)) \"!==\" \"\" ~}}\n  <div class=\"search-result-article__notes\">\n    <h4 class=\"mdc-typography--headline7\">\n      Your notes&ensp;\n      <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}#notes\" class=\"mdc-typography--body2\">Edit</a>\n    </h4>\n    <div class=\"mdc-typography--body1\">\n      {{#if limit ~}}\n        {{#compare @root.route.name \"===\" \"notes\" ~}}\n          {{{markdown (getProperty @root.data.profileInfo.notes Id)}}}\n        {{else}}\n          <div style=\"max-height: {{limit}};\" class=\"faded-overflow\">\n          {{{markdown (truncate (getProperty @root.data.profileInfo.notes Id) limit)}}}\n          </div>\n          <a href=\"/event/{{Id}}/{{title_slug}}{{> query_search}}#notes\">Read more</a>\n        {{/compare ~}}\n      {{else}}\n        {{{markdown (getProperty @root.data.profileInfo.notes Id)}}}\n      {{/if ~}}\n    </div>\n  </div>\n{{/compare ~}}\n",
        "event_search_result": "<div class=\"mdc-card content-primary search-result\" data-event-id=\"{{Id}}\" data-event-layout=\"Search Result\" data-event-context=\"{{default viewContext \"Search Results\"}}\">\n  {{> event_key_info}}\n  <hr class=\"mdc-list-divider\" />\n  {{#compare (trim (getProperty @root.data.profileInfo.notes Id)) \"!==\" \"\" ~}}\n    {{> event_description limit=\"3rem\" description=description}}\n    {{> event_notes limit=\"3rem\"}}\n  {{else}}\n    {{> event_description limit=\"6rem\" description=description}}\n  {{/compare ~}}\n  {{> event_actions slug=slug Id=Id home_based=home_based distance=distance action=action}}\n</div>",
        "event_timings_display": "<div class=\"table-responsive\">\n  <table class=\"table table-condensed\">\n    <thead>\n      <tr>\n        <th></th>\n        <th><p>Mon</p></th>\n        <th><p>Tue</p></th>\n        <th><p>Wed</p></th>\n        <th><p>Thu</p></th>\n        <th><p>Fri</p></th>\n        <th><p>Sat</p></th>\n        <th><p>Sun</p></th>\n      </tr>\n    </thead>\n    <tbody>\n      {{#each (split \"morning,afternoon,evening\" \",\")}}\n      <tr>\n        <th>{{capitalize this}}</th>\n        {{#each (split \"monday,tuesday,wednesday,thursday,friday,saturday,sunday\" \",\")}}\n        <td style=\"font-weight:normal;\">\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" name=\"availability[]\" class=\"mdc-checkbox__native-control\" disabled value=\"{{concat this \"-\" ../this}}\"{{#if (contains ../../this (concat this \"-\" ../this))}} checked{{/if}}>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark__path\" fill=\"none\" stroke=\"white\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"></path>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n        </td>\n        {{/each}}\n      </tr>\n      {{/each}}\n    </tbody>\n  </table>\n</div>",
        "favourite_chip": "{{#if @root.data.auth ~}}\n  {{#> ajax_chip\n    onUrl=(concat \"/add-to-favourites?id=\" id)\n    offUrl=(concat \"/remove-from-favourites?id=\" id)\n    onText=\"Favourite\"\n    offText=\"Favourite\"\n    iconClasses=\"far fa-heart\"\n    on=(contains (map @root.data.favourites.items.[0] (getProp \"value\")) id)\n  }}\n  {\n    \"extraAttributes\": \"data-opportunity-id=\\\"{{../id}}\\\"\",\n    \"onClasses\": {\n      \".mdc-card[data-opportunity-id=\\\"{{../id}}\\\"]\": \"added-to-favourites\"\n      },\n    \"offClasses\": {\n      \".mdc-card[data-opportunity-id=\\\"{{../id}}\\\"]\": \"removed-from-favourites\"\n    }\n  }\n  {{/ajax_chip}}\n{{else}}\n  <div class=\"mdc-chip\" data-dialog-target=\"#favourite-dialog\">\n    <span class=\"far fa-heart mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>\n    <div class=\"mdc-chip__text noselect\">Favourite</div>\n  </div>\n{{/if ~}}",
        "form_validation_attributes": "{{#if type}} type=\"{{type}}\" {{else}} type=\"text\" {{/if}}{{#if maxlength}} maxlength = \"{{maxlength}}\"{{/if}}{{#if required}} required {{/if}}{{#if pattern}} pattern=\"{{pattern}}\" {{/if}}",
        "ga": "",
        "goodhq_heart_rating": "{{#compare stars '>' 0 ~}}\n  <span class=\"inline review-stars review-stars-summary\">{{> goodhq_hearts}}</span>\n{{else}}\n  <!-- <span class=\"inline noinfo\">Not yet rated</span> -->\n{{/compare ~}}",
        "goodhq_hearts": "{{#if stars ~}}\n  <ul class=\"hearts\">\n    {{#compare stars '<' 0.25 ~}}\n      <li class=\"empty\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n    {{/compare ~}}\n    {{#compare stars '>=' 0.25 ~}}\n      {{#compare stars '<' 0.75 ~}}\n        <li class=\"half\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n      {{#compare stars '>=' 0.75 ~}}\n        <li class=\"filled\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n    {{/compare ~}}\n    {{#compare stars '<' 1.25 ~}}\n      <li class=\"empty\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n    {{/compare ~}}\n    {{#compare stars '>=' 1.25 ~}}\n      {{#compare stars '<' 1.75 ~}}\n        <li class=\"half\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n      {{#compare stars '>=' 1.75 ~}}\n        <li class=\"filled\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n    {{/compare ~}}\n    {{#compare stars '<' 2.25 ~}}\n      <li class=\"empty\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n    {{/compare ~}}\n    {{#compare stars '>=' 2.25 ~}}\n      {{#compare stars '<' 2.75 ~}}\n        <li class=\"half\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n      {{#compare stars '>=' 2.75 ~}}\n        <li class=\"filled\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n    {{/compare ~}}\n    {{#compare stars '<' 3.25 ~}}\n      <li class=\"empty\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n    {{/compare ~}}\n    {{#compare stars '>=' 3.25 ~}}\n      {{#compare stars '<' 3.75 ~}}\n        <li class=\"half\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n      {{#compare stars '>=' 3.75 ~}}\n        <li class=\"filled\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n    {{/compare ~}}\n    {{#compare stars '<' 4.25 ~}}\n      <li class=\"empty\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n    {{/compare ~}}\n    {{#compare stars '>=' 4.25 ~}}\n      {{#compare stars '<' 4.75 ~}}\n        <li class=\"half\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n      {{#compare stars '>=' 4.75 ~}}\n        <li class=\"filled\"><span aria-hidden=\"true\" class=\"icon-heart\"></span></li>\n      {{/compare ~}}\n    {{/compare ~}}\n  </ul>\n{{/if ~}}",
        "handle_404": "{{#if @root.data.primaryResponse.hits.hits.[0] ~}}\n{{> @partial-block }}\n{{else}}\n<div class=\"mdc-layout-grid\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n      <h2>The page you requested could not be found</h2>\n      <p>\n        We recently relaunched our website and some page addresses may have changed.\n      </p>\n      {{#ifAll @root.data.opportunitySupplimentary.not_found (compare @root.data.opportunitySupplimentary.not_found.hits.total \">\" 0) ~}}\n      <h3>Did you mean?</h3>\n      {{#each @root.data.opportunitySupplimentary.not_found.hits.hits ~}}\n      {{#compare @index \"===\" 0 ~}}\n      {{>highlight_result}}\n      {{else}}\n      {{/compare ~}}\n      {{/each ~}}\n      {{/ifAll ~}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone\">\n      <img src=\"{{~>asset_url url='images/404.png'~}}\" class=\"responsive\">\n    </div>\n  </div>\n</div>\n{{#ifAll @root.data.opportunitySupplimentary.not_found (compare @root.data.opportunitySupplimentary.not_found.hits.total \">\" 1) ~}}\n<hr />\n<h3>Other relevant content</h3>\n{{#each @root.data.opportunitySupplimentary.not_found.hits.hits ~}}\n{{#compare @index \"===\" 0 ~}}\n{{else}}\n{{>highlight_result}}\n{{/compare ~}}\n{{/each ~}}\n{{else}}\n<h3>Try searching for a topic</h3>\n{{/ifAll ~}}\n\n{{/if ~}}\n",
        "newsletter_post_body": "{\n  \"EmailAddress\": \"{{@root.data.auth.email}}\",\n  \"Name\": \"{{default @root.request.body.first_name 'Subscriber'}}\",\n  \"Resubscribe\": true,\n  \"ConsentToTrack\":\"No\"\n}",
        "opportunity_search_form": "<div class=\"mdc-drawer__content\">\n  <form action=\"{{#if (regexMatch @root.request.url.pathname \"^/opportunities-in\" \"gi\")}}/opportunities-in/area{{else}}/{{#compare @root.request.url.pathname \"/map\"}}map{{else}}search{{/compare}}{{/if}}\" method=\"GET\" class=\"search-form\" novalidate>\n    {{#if (regexMatch @root.request.url.pathname \"^/opportunities-in\" \"gi\") ~}}\n    <input type=\"hidden\" name=\"search_la\" value=\"{{@root.request.params.local_authority}}\" />\n    {{/if ~}}\n    <input type=\"hidden\" name=\"sort\" value=\"{{@root.request.params.query.sort}}\" id=\"{{instance_id}}-sort\">\n    {{#if @root.request.params.query.exclude ~}}\n    {{#compare @root.request.params.query.exclude \"!==\" \"\" ~}}\n    <input type=\"hidden\" name=\"exclude\" value=\"locations\">\n    {{/compare ~}}\n    {{/if ~}}\n    <div class=\"h-padding-full\">\n      <div class=\"mdc-layout-grid\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\" style=\"z-index:5;\">\n              <span class=\"far fa-map-marker-alt mdc-text-field__icon geo-lookup\" tabindex=\"0\" title=\"Find my location\" role=\"button\" style=\"pointer-events: initial !important;\"></span>\n              <input type=\"text\" id=\"{{instance_id}}-location\" name=\"location\" class=\"mdc-text-field__input mdc-text-field--fullwidth search-location\" value=\"{{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}{{@root.request.params.query.location}}{{/ifAll}}\" placeholder=\"\" data-lpignore=\"true\" data-location-search='{\n                \"latSelector\": \"[name=\\\"lat\\\"]\",\n                \"lngSelector\": \"[name=\\\"lng\\\"]\",\n                \"laSelector\": \"[name=\\\"la\\\"]\",\n                \"locationServicesSelector\": \".geo-lookup\"\n              }'>\n              <label class=\"mdc-floating-label\" for=\"{{instance_id}}-location\">\n                Location\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n              <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n                <span class=\"mdc-select__dropdown-icon\"></span>\n                <select class=\"mdc-select__native-control\" id=\"distance\" name=\"distance\">\n                  {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n                  <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n                  {{/each}}\n                </select>\n                <label class=\"mdc-floating-label mdc-select__label--float-above\" for=\"sort\">\n                  Within\n                </label>\n                <div class=\"mdc-line-ripple\"></div>\n              </div>\n          </div>\n        </div>\n      </div>\n      {{#if @root.request.params.query.debug_results}}\n        <input type=\"hidden\" name=\"debug_results\" value=\"{{@root.request.params.query.debug_results}}\">\n      {{/if}}\n      <input type=\"hidden\" name=\"lat\" value=\"{{#if @root.request.params.query.location}}{{@root.request.params.query.lat}}{{/if}}\" id=\"location-lat\" />\n      <input type=\"hidden\" name=\"lng\" value=\"{{#if @root.request.params.query.location}}{{@root.request.params.query.lng}}{{/if}}\" id=\"location-lng\" />\n\n      <div class=\"header mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon mdc-text-field-tt\" data-mdc-auto-init=\"MDCTextField\">\n        <input type=\"text\" id=\"what-primary-content\" name=\"keywords\" class=\"mdc-text-field__input\" placeholder=\"\" value=\"{{@root.request.params.query.keywords}}\" data-lpignore=\"true\" data-typeahead='{\n          \"typeaheadOptions\": {\n            \"highlight\": true,\n            \"minlength\": 0\n          },\n          \"outputs\": [\n          {\n            \"type\": \"prop\",\n            \"options\": {\n              \"selectorTemplate\": \"#cb-\\{{item.datasetName}}-\\{{item.value}}\",\n              \"prop\": \"checked\",\n              \"valueTemplate\": \"checked\"\n            }\n          }\n          ],\n          \"datasets\": [\n          {{#each @root.context.metaData.terms}}\n          {{#each termGroups}}\n          {\n            \"name\": {{{stringify ../key}}},\n            \"templates\": {\n              {{#compare (length ../termGroups) 1}}\n              \"header\": \"<h3>{{{../label}}}</h3>\"\n              {{else}}\n              \"header\": \"<h3>{{{../label}}} &gt; {{{label}}}</h3>\"\n              {{/compare}}\n            },\n            \"display\": \"other\",\n            \"items\": [\n            {{#each terms}}\n            {\n              \"label\": {{{stringify (concat ../key ' ' textBag)}}},\n              \"value\": {{{stringify key}}},\n              \"other\": {{{stringify label}}}\n            }{{#unless @last}},{{/unless}}\n            {{/each}}\n            ]\n          }{{#unlessAll @last @../last}},{{/unlessAll}}\n          {{/each}}\n          {{/each}}\n          ]\n        }'>\n        <span class=\"fas fa-search active-search-icon mdc-text-field__icon\" role=\"button\" onclick=\" $(this).parents('form:first').submit();\" style=\"pointer-events: initial !important; z-index: 500;\" tabindex=\"-1\"></span></a>\n        <label for=\"what-primary-content\" class=\"mdc-floating-label\">\n          Keywords / categories\n        </label>\n        <div class=\"mdc-line-ripple\"></div>\n      </div>\n      {{#each @root.context.metaData.terms ~}}\n        {{#unless noSearchFilter ~}}\n          {{#> components_advanced_checkbox_list name=key label=label}}\n            {{#each termGroups ~}}\n              {{#> components_advanced_checkbox_group \n                  name=(concat ../key '-' key) \n                  label=label \n                  hideParent=(compare (length ../../termGroups) 1)}}\n                {{#each terms ~}}\n                  <!-- termGroups Length: {{length ../../../termGroups}} -->\n                  <!-- noIndent: {{compare (length ../../../termGroups) 1}} -->\n                  {{> components_advanced_checkbox_item \n                      name=../../../../key \n                      value=key \n                      label=label \n                      checked=(contains (getProperty @root.request.params.query ../../../../key) key) \n                      group=(concat ../../../key '-' ../key) \n                      noIndent=(compare (length ../../../termGroups) 1)}}\n                {{/each ~}}\n              {{/components_advanced_checkbox_group}}\n            {{/each ~}}\n          {{/components_advanced_checkbox_list}}\n        {{/unless ~}}\n      {{/each ~}}\n      <div id=\"filter-container-outer\">\n        <div id=\"filter-container-inner\">\n          <button class=\"mdc-button mdc-button--raised mdc-button--large mdc-button--fullwidth mdc-button--disabled mdc-ripple-surface mdc-ripple-surface--primary\" type=\"submit\" id=\"{{instance_id}}-search-submit\" data-mdc-auto-init=\"MDCRipple\" disabled>\n            <span class=\"far fa-search fa-fw mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n            Filter\n          </button>\n        </div>\n      </div>\n      <span id=\"filter-indicator\" class=\"fal fa-angle-double-down fa-3x\" style=\"display:none;\"></span>\n    </div>\n  </form>\n</div>",
        "opportunity_search_results": "<aside id=\"save-search-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"save-search-dialog-label\" aria-describedby=\"save-search-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <form action=\"/save-search{{> query_search}}\" method=\"POST\" class=\"mdc-dialog__surface\">\n      <h2 id=\"save-search-dialog-label\" class=\"mdc-dialog__title\">Give your search a name</h2>\n      <section id=\"save-search-dialog-description\" class=\"mdc-dialog__content\">\n        <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n          <input type=\"text\" id=\"saved-search-name\" name=\"name\" class=\"mdc-text-field__input\" value=\"\n{{~#with @root.request.params.query~}}\n            {{~#if keywords~}}\n              {{~keywords~}}\n              {{~#ifAny activities themes services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if activities~}}\n              {{~#each (arrayify activities)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.activities.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny themes services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if themes~}}\n              {{~#each (arrayify themes)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.themes.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny services age_groups availability}}, {{/ifAny~}}\n            {{~/if~}}\n            {{~#if services~}}\n              {{~#each (arrayify services)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.services.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny age_groups availability}}, {{/ifAny~}}\n            {{~/if}}\n            {{~#if age_groups~}}\n              {{~#each (arrayify age_groups)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.age_groups.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n              {{~#ifAny availability}}, {{/ifAny~}}\n            {{~/if}}\n            {{~#if availability~}}\n              {{~#each (arrayify availability)~}}\n                {{~getProperty (getProperty @root.data.termsMaps.availability.slugsMap this) \"term\"~}}\n                {{~#unless @last}}, {{/unless~}}\n              {{~/each~}}\n            {{~/if}}\n            {{~#if location~}}&nbsp;near {{location}} {{/if~}}\n          {{~/with~}}\">\n          <label for=\"saved-search-name\" class=\"mdc-floating-label\">Save search</label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <div class=\"mdc-form-field\">\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"subscribe\" id=\"email-on\"/>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n          <label for=\"email-on\">Send opportunities matching this search by email</label>\n        </div>\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <button type=\"submit\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"accept\">Save</button>\n      </footer>\n    </form>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>\n\n<aside id=\"edit-search-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"edit-search-dialog-label\" aria-describedby=\"edit-search-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <div class=\"mdc-dialog__surface\">\n      {{#if @root.data.auth ~}}\n        {{#with (\n                  querystringify (obj)\n                  keywords=@root.request.params.query.keywords\n                  volunteersearch_types=@root.request.params.query.volunteersearch_types\n                  activities=(sort @root.request.params.query.activities)\n                  themes=(sort @root.request.params.query.themes)\n                  services=(sort @root.request.params.query.services)\n                  age_groups=@root.request.params.query.age_groups\n                  availability=@root.request.params.query.availability\n                  distance=@root.request.params.query.distance\n                  lat=@root.request.params.query.lat\n                  lng=@root.request.params.query.lng\n                  location=@root.request.params.query.location\n                ) ~}}\n          {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            <h2 id=\"edit-search-dialog-label\" class=\"mdc-dialog__title\">Saved search&ensp;<span class=\"mdc-typography--body1\">{{{partition}}}</span></h2>\n            <section id=\"edit-search-dialog-description\" class=\"mdc-dialog__content\">\n              <div class=\"mdc-chip-set mdc-chip-set--filter\">\n                  {{#> ajax_chip\n                    onUrl=\"/toggle-subscription\"\n                    offUrl=\"/toggle-subscription\"\n                    onText=\"Send me opportunities matching this search by email\"\n                    offText=\"Send me opportunities matching this search by email\"\n                    onMethod=\"POST\"\n                    offMethod=\"POST\"\n                    iconClasses=\"fal fa-fw fa-times\"\n                    on=partitionActive\n                  }}\n                    {\n                    \"onData\": {\n                    \"name\": {{{stringify ../partition}}}\n                    },\n                    \"offData\": {\n                    \"name\": {{{stringify ../partition}}}\n                    }\n                    }\n                  {{/ajax_chip}}\n                </div>\n              </section>\n              <footer class=\"mdc-dialog__actions\">\n                <button type=\"button\" class=\"mdc-button mdc-dialog__button\" data-mdc-dialog-action=\"close\">Close</button>\n              </footer>\n            {{/with ~}}\n          {{/if ~}}\n        {{/with ~}}\n      {{/if ~}}\n    </div>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>\n\n{{> dialog_favourites}}\n\n<div class=\"mdc-layout-grid head\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n      {{#> components_tab_bar}}\n        {{> search_button}}\n        {{> components_tab url=(concat \"/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/search\")}}\n        {{> components_tab url=(concat \"/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/map\")}}\n      {{/components_tab_bar}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone pagination-desktop\">\n      {{#if @root.data.auth ~}}\n        {{#with (\n          querystringify (obj)\n          keywords=@root.request.params.query.keywords\n          volunteersearch_types=@root.request.params.query.volunteersearch_types\n          activities=@root.request.params.query.activities\n          themes=@root.request.params.query.themes\n          services=@root.request.params.query.services\n          age_groups=@root.request.params.query.age_groups\n          availability=@root.request.params.query.availability\n          distance=@root.request.params.query.distance\n          lat=@root.request.params.query.lat\n          lng=@root.request.params.query.lng\n          location=@root.request.params.query.location\n        ) ~}}\n          <script>\n            document.addEventListener('DOMContentLoaded', function() {\n              console.log('Current Query String:', {{{stringify this}}});\n              console.log('Saved Search Query Strings:', {{{stringify (map @root.data.searches.items.[0] (getProp 'querystring'))}}});\n            });\n          </script>\n          {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n            {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this))}}\n              <div class=\"pull-right\">\n                Saved search&ensp;\n                <span class=\"mdc-typography--body1\">\n                  <a name=\"#\" data-dialog-target=\"#edit-search-dialog\" style=\"cursor:pointer;\">{{{partition}}}</a>\n                </span>\n              </div>\n            {{/with ~}}\n          {{else}}\n            <button class=\"mdc-button mdc-button--raised save-search hide-sm hide-md\" id=\"save-search-button\" data-dialog-target=\"#save-search-dialog\">\n              <span class=\"fas fa-search-plus mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Save/email this search\n            </button>\n            <button class=\"mdc-button mdc-button--raised filter-search hide-lg filter-search-button\" id=\"filter-search-button\">\n              <span class=\"fas fa-search mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Search filters\n            </button>\n          {{/if ~}}\n        {{/with ~}}\n      {{else}}\n        <a href=\"/sign-up\" class=\"mdc-button mdc-button--raised save-search hide-sm hide-md\" id=\"save-search-button\">\n          <span class=\"fas fa-sign-in-alt mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Sign up to create email alerts\n        </a>\n        <button class=\"mdc-button mdc-button--raised filter-search hide-lg filter-search-button\" id=\"filter-search-button\" data-drawer-target=\"#sidebar-temporary\">\n          <span class=\"fas fa-search mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Search filters\n        </button>\n      {{/if ~}}\n    </div>\n  </div>\n</div>\n<div class=\"mdc-layout-grid grid-content\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-9-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n      {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n      {{#compare @root.data.search_data.detailed_results.hits.total \">\" 0 ~}}\n        <form action=\"{{{@root.request.url.path}}}\" method=\"GET\">\n          {{#each (split \"volunteersearch_types,activities,themes,services,age_groups\" \",\")}}\n            {{#if (getProperty @root.request.params.query this) ~}}\n              {{#each (arrayify (getProperty @root.request.params.query this)) ~}}\n                <input type=\"hidden\" name=\"{{../this}}[]\" value=\"{{this}}\" />\n              {{/each ~}}\n            {{/if ~}}\n          {{/each ~}}\n          {{#each (split \"keywords,exclude,location,lat,lng,la\" \",\")}}\n            {{#if (getProperty @root.request.params.query this) ~}}\n              <input type=\"hidden\" name=\"{{this}}\" value=\"{{getProperty @root.request.params.query this}}\" />\n            {{/if ~}}\n          {{/each ~}}\n          <input type=\"hidden\" name=\"distance\" value=\"{{default @root.request.params.query.distance 10}}\" />\n          {{#if @root.request.params.query.debug_results}}\n            <input type=\"hidden\" name=\"debug_results\" value=\"{{@root.request.params.query.debug_results}}\">\n          {{/if}}\n          {{> opportunity_search_sort}}\n        </form>\n      {{/compare ~}}\n    </div>\n  </div>\n</div>\n\n{{#if @root.request.params.query.debug_results}}\n  <div class=\"v-padding-full\">\n    <pre>\n{{{safeStringify @root.data.search_data.detailed_results.request}}}\n    </pre>\n  </div>\n{{/if}}\n\n{{#each @root.data.search_data.detailed_results.hits.hits ~}}\n  {{#if @root.request.params.query.debug_results}}\n    <div class=\"v-padding-full\">\n      <pre>\nSCORE: {{_score}}\nDISTANCE: {{numberFormat fields.distance.[0] \"en-GB\" 1}} miles\nLAST MODIFIED: {{#with (momentDistance (moment _source.date_last_modified \"x\") null \"days\")~}}\n  {{~#compare this \"<=\" 0~}}\n    {{replace (concat this \"\") \"-\" \"\"}} days ago\n  {{~else~}}\n    {{this}} days in the future\n  {{~/compare~}}\n{{/with}}\n\nHIGHLIGHTS:\n{{{safeStringify highlight}}}\n      </pre>\n    </div>\n  {{/if}}\n  {{> opportunity_search_result _source distance=fields.distance.[0]}}\n{{/each ~}}\n\n<div class=\"foot\">\n  {{> pagination firstLastNavigation=true paging=@root.data.search_data.detailed_results.pagination}}\n\n  {{#if @root.data.auth ~}}\n    {{#with (\n      querystringify (obj)\n      keywords=@root.request.params.query.keywords\n      volunteersearch_types=@root.request.params.query.volunteersearch_types\n      activities=@root.request.params.query.activities\n      themes=@root.request.params.query.themes\n      services=@root.request.params.query.services\n      age_groups=@root.request.params.query.age_groups\n      availability=@root.request.params.query.availability\n      distance=@root.request.params.query.distance\n      lat=@root.request.params.query.lat\n      lng=@root.request.params.query.lng\n      location=@root.request.params.query.location\n    ) ~}}\n      <script>\n        document.addEventListener('DOMContentLoaded', function() {\n          console.log('Current Query String:', {{{stringify this}}});\n          console.log('Saved Search Query Strings:', {{{stringify (map @root.data.searches.items.[0] (getProp 'querystring'))}}});\n        });\n      </script>\n      {{#if (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this)) ~}}\n        {{#with (itemAt @root.data.searches.items.[0] (indexOf (map @root.data.searches.items.[0] (getProp 'querystring')) this))}}\n          <div class=\"pull-right\">\n            Saved search&ensp;\n            <span class=\"mdc-typography--body1\">\n              <a name=\"#\" data-dialog-target=\"#edit-search-dialog\" style=\"cursor:pointer;\">{{{partition}}}</a>\n            </span>\n          </div>\n        {{/with ~}}\n      {{else}}\n        <button class=\"mdc-button mdc-button--raised save-search hide-lg\" id=\"save-search-button\" data-dialog-target=\"#save-search-dialog\">\n          <span class=\"fas fa-search-plus mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          Save/email this search\n        </button>\n      {{/if ~}}\n    {{/with ~}}\n  {{else}}\n    <a href=\"/sign-up\" class=\"mdc-button mdc-button--raised save-search hide-lg\" id=\"save-search-button\">\n      <span class=\"fas fa-sign-in-alt mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Sign up to create email alerts\n    </a>\n  {{/if ~}}\n</div>",
        "opportunity_search_sort": "<div class=\"mdc-select pull-right\" data-mdc-auto-init=\"MDCSelect\">\n  <span class=\"mdc-select__dropdown-icon\"></span>\n  <select class=\"mdc-select__native-control\" id=\"sort\" name=\"sort\" onchange=\"this.form.submit();\">\n    <option value=\"relevance\" {{#unless @root.request.params.query.sort}} selected {{/unless}}>Relevance</option>\n    {{#if @root.request.params.query.location}}<option value=\"distance\"{{#compare @root.request.params.query.sort \"===\" \"distance\"}} selected{{/compare}}{{#compare @root.request.params.query.exclude \"===\" \"locations\"}} disabled{{else}}{{#compare @root.request.params.query.location \"===\" \"\"}} disabled{{/compare}}{{/compare}}>Distance</option>{{/if}}\n    <option value=\"newest\"{{#compare @root.request.params.query.sort \"===\" \"newest\"}} selected{{/compare}}>Newest</option>\n    <option value=\"oldest\"{{#compare @root.request.params.query.sort \"===\" \"oldest\"}} selected{{/compare}}>Oldest</option>\n  </select>\n  <div class=\"mdc-floating-label mdc-select__label--float-above\" for=\"sort\">\n    Sort by\n  </div>\n  <div class=\"mdc-line-ripple\"></div>\n</div>",
        "opportunity_actions": "<div class=\"mdc-card__actions\">\n  <div class=\"mdc-card__action-buttons demo-card__action-buttons--text-only mdc-card__actions--full-bleed\">\n    {{#compare action \"===\" \"organisation\" ~}}\n    <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\" class=\"mdc-card__action hide-sm\">Find out more about {{organisation_name}}</a>\n    {{else}}\n    <a href=\"{{#compare view 'widget'}}https://{{/compare}}/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action hide-sm\">Find out more</a>\n    <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action hide-md hide-lg\"><span class=\"fal fa-info-circle fa-fw fa-2x\" aria-hidden=\"true\"></span></a>\n    {{/compare ~}}\n  </div>\n  <div class=\"mdc-card__action-icons pull-right\">\n    <div id=\"action-chips\" class=\"mdc-chip-set mdc-chip-set--filter\">\n      {{#compare @root.route.name \"!==\" \"home\" ~}}\n      {{#if opportunity_contact_email ~}}\n      {{> register_interest_faux_chip id=Id}}\n      {{else}}\n        {{> register_interest_faux_chip disabled=true}}\n      {{/if ~}}\n      {{/compare ~}}\n      {{> favourite_chip id=Id}}\n    </div>\n    {{#compare action \"===\" \"remove\" ~}}\n    <a href=\"{{{@root.request.fullUrl}}}\" onclick=\"sqlRemoveInterest('{{Id}}')\" class=\"mdc-icon-button mdc-card__action mdc-card__action--icon\" title=\"Remove from this list\"><span class=\"far fa-ban\"></span></a>\n    {{/compare ~}}\n  </div>\n</div>\n",
        "opportunity_availability_selector": "<div class=\"table-responsive\">\n  <table class=\"table table-condensed h-padding\">\n    <thead>\n      <tr>\n        <th></th>\n        <th><p>AM</p></th>\n        <th><p>PM</p></th>\n        <th><p>Eve</p></th>\n      </tr>\n    </thead>\n    <tbody>\n\n      {{#each @root.context.metaData.terms.availability.termGroups}}\n      <tr>\n        <th><p>{{capitalize label}}</p></th>\n        {{#each this.terms}}\n        <td>\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" name=\"availability[]\" class=\"mdc-checkbox__native-control\" value=\"{{@key}}\"{{#if (contains @root.request.params.query.availability @key)}} checked{{/if}}>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark__path\" fill=\"none\" stroke=\"white\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"></path>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n        </td>\n        {{/each}}\n      </tr>\n      {{/each}}\n    </tbody>\n  </table>\n</div>",
        "opportunity_description": "{{#if description ~}}\n<div class=\"search-result-article__snippet {{#compare view 'widget'}}mdl-card__supporting-text{{else}}mdc-typography--body1{{/compare}} faded-overflow\" style=\"height:{{limit}};\">\n  {{{description}}}\n</div>\n{{/if ~}}",
        "opportunity_full": "<div class=\"{{#compare view 'widget'}}x-padding-full{{else}}mdc-card{{/compare}} content-primary full\" data-opportunity-id=\"{{Id}}\" data-opportunity-layout=\"Full\" data-opportunity-context=\"{{default viewContext \"Vacancy Page\"}}\">\n  {{> opportunity_key_info type=\"full\"}}\n  <hr class=\"mdc-list-divider\" />\n  <div class=\"content-primary-info-container\">\n    {{#unless (compare view 'widget') ~}}\n    <div class=\"mdc-layout-grid\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone action\">\n          {{#>components_tab_bar id=\"opportunity-tab-bar\" defaultTabIdentifier=\"hash\"}}\n          {{>components_tab iconClasses=\"far fa-list-ul fa-fw\" label=\"Information\" active=true tabName=\"information\"}}\n          {{#if geo_coords}}\n          {{>components_tab iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Location\" active=false tabName=\"location\"}}\n          {{/if}}\n          {{>components_tab iconClasses=\"far fa-edit fa-fw\" label=\"Notes\" active=false tabName=\"notes\"}}\n          {{/components_tab_bar}}\n        </div>\n      </div>\n    </div>\n    {{/unless ~}}\n    <hr class=\"mdc-list-divider\" />\n    <div{{#unless (compare view 'widget')}} class=\"panels\" for=\"opportunity-tab-bar\"{{/unless}}>\n      <div{{#unless (compare view 'widget')}} class=\"panel panel--active mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"false\" data-tab-name=\"information\"{{/unless}}>\n        {{#ifAny activities.length themes.length end_date (compare start_date \">\" (moment)) ~}}\n        <div class=\"key-info-extra\">\n          <ul class=\"fa-ul\">\n            {{#compare (length activities) \">\" 0 ~}}\n            <li class=\"mdc-card__info--content-primary-work-type reference mdc-typography--body1\">\n              {{#unless (compare view 'widget') ~}}\n              <span class=\"fa-li\"><span class=\"far fa-briefcase fa-fw\" title=\"Activites\"></span></span>\n              {{/unless ~}}\n              {{#each activities}}\n              <a href=\"{{#compare ../view 'widget'}}#{{/compare}}/search?activities={{urlencode (slugify (replace this \"/\" \"-\"))}}{{#compare ../view 'widget'}}&view=widget{{/compare}}\">{{{this}}}</a>{{#unless @last}}, {{/unless}}\n              {{/each}}\n            </li>\n            {{/compare ~}}\n            {{#compare (length themes) \">\" 0 ~}}\n            <li class=\"mdc-card__info--content-primary-client-group mdc-typography--body1\">\n              {{#unless (compare view 'widget') ~}}\n              <span class=\"fa-li\"><span class=\"far fa-users fa-fw\" title=\"Themes\"></span></span>\n              {{/unless ~}}\n              {{#each themes ~}}\n              <a href=\"{{#compare ../view 'widget'}}#{{/compare}}/search?themes={{urlencode (slugify (replace this \"/\" \"-\"))}}{{#compare ../view 'widget'}}&view=widget{{/compare}}\">{{{this}}}</a>{{#unless @last}}, {{/unless}}\n              {{/each ~}}\n            </li>\n            {{/compare ~}}\n            {{#ifAll start_date end_date ~}}\n            <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n              {{#unless (compare view 'widget') ~}}\n              <span class=\"fa-li\"><span class=\"far fa-calendar-plus fa-fw\" title=\"Start date\"></span></span>\n              {{/unless ~}}\n              Opportunity start date: {{momentFormat (moment start_date \"x\") \"Do MMMM YYYY\"}}\n            </li>\n            <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n              <span class=\"fa-li\"><span class=\"far fa-calendar-times fa-fw\" title=\"End date\"></span></span>\n              Opportunity end date: {{momentFormat (moment end_date \"x\") \"Do MMMM YYYY\"}}\n            </li>\n            {{else}}\n            {{#compare start_date \">\" (moment) ~}}\n            <li class=\"mdc-card__info--content-primary-from mdc-typography--body1\">\n              {{#unless (compare view 'widget') ~}}\n              <span class=\"fa-li\"><span class=\"far fa-calendar-plus fa-fw\" title=\"Start date\"></span></span>\n              {{/unless ~}}\n              Opportunity start date: {{momentFormat (moment start_date \"x\") \"Do MMMM YYYY\"}}\n            </li>\n            {{/compare ~}}\n            {{/ifAll ~}}\n          </ul>\n        </div>\n        {{/ifAny ~}}\n\n        <div class=\"detailed-info\">\n          {{#ifAny description description_html ~}}\n          <h4 class=\"mdc-typography--headline6\">Description</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if description_html}}{{{description_html}}}{{else}}{{description}}{{/if}}\n          </p>\n          {{/ifAny ~}}\n          {{#if weblink ~}}\n          <ul class=\"fa-ul\">\n            <li class=\"mdc-typography--body1\">\n              {{#unless (compare view 'widget') ~}}\n              <span class=\"fa-li\"><span class=\"far fa-link fa-fw\" title=\"Website\"></span></span>\n              {{/unless ~}}\n              <a href=\"{{fixUrl weblink \"http\"}}\"{{#if weblink_tooltip}} title=\"{{weblink_tooltip}}\"{{/if}}>{{#if weblink_title}}{{weblink_title}}{{else}}{{weblink}}{{/if}}</a>\n            </li>\n          </ul>\n          {{/if ~}}\n          {{#if organisation_aims_and_objectives ~}}\n          <h4 class=\"mdc-typography--headline6\">Organisation aims and objectives</h4>\n          <p class=\"mdc-typography--body1\">\n            {{{organisation_aims_and_objectives}}}\n          </p>\n          {{/if ~}}\n          {{#if availability_slugs.length ~}}\n          <h4 class=\"mdc-typography--headline6\">Availability</h4>\n          <p class=\"mdc-typography--body1\">\n            {{>opportunity_timings_display availability=availability_slugs view=view}}\n          </p>\n          {{#if timings_description ~}}\n          <p class=\"mdc-typography--body1\">\n            {{{timings_description}}}\n          </p>\n          {{/if ~}}\n          {{/if ~}}\n          {{#if frequency_commitment_details ~}}\n          <h4 class=\"mdc-typography--headline6\">Frequency and commitment details</h4>\n          <p class=\"mdc-typography--body1\">\n            {{{frequency_commitment_details}}}\n          </p>\n          {{/if ~}}\n          {{#ifAny restriction_details experience_required travel_details minimum_age maximum_age ~}}\n          <h4 class=\"mdc-typography--headline6\">Restrictions</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if restriction_details ~}}\n            {{#compare restriction_details \"!==\" \"n/a\" ~}}\n            {{{restriction_details}}}<br />\n            {{/compare ~}}\n            {{/if ~}}\n            {{#if experience_required ~}}\n            <strong>Experience required: </strong> {{{experience_required}}}<br />\n            {{/if ~}}\n            {{#if travel_details ~}}\n            <strong>Travel details: </strong> {{{travel_details}}}<br />\n            {{/if ~}}\n            {{#if minimum_age ~}}\n            <strong>Minimum age: </strong> {{{minimum_age}}}<br />\n            {{/if ~}}\n            {{#if maximum_age ~}}\n            {{#compare maximum_age \"<=\" 26}}\n            <strong>Maximum age: </strong> {{{maximum_age}}}<br />\n            {{/compare}}\n            {{/if ~}}\n          </p>\n          {{/ifAny ~}}\n\n          {{#ifAny training_details travel_expenses expenses_paid taster_available taster_details support_options ~}}\n          <h4 class=\"mdc-typography--headline6\">Support</h4>\n          <p class=\"mdc-typography--body1\">\n            {{#if expenses_paid ~}}\n            <strong>Expenses paid: </strong> {{#compare expenses_paid \"===\" true}}Yes{{else}}No{{/compare}}<br />\n            {{/if ~}}\n            {{#if travel_expenses ~}}\n            <strong>Expenses details: </strong> {{{travel_expenses}}}<br />\n            {{/if ~}}\n            {{#if taster_available ~}}\n            <strong>Taster available: </strong> {{#compare taster_available \"===\" true}}Yes{{else}}No{{/compare}}<br />\n            {{/if ~}}\n            {{#if taster_details ~}}\n            <strong>Taster details: </strong> {{{taster_details}}}<br />\n            {{/if ~}}\n            {{#if training_details ~}}\n            <strong>Training details: </strong> {{{training_details}}}<br />\n            {{/if ~}}\n            {{#if support_options ~}}\n            <strong>Support: </strong>\n            {{#compare (getType support_options) \"===\" \"string\" ~}}\n            {{{support_options}}}<br />\n            {{else}}\n            {{#each support_options ~}}\n            {{{this}}}{{#unless @last}}, {{/unless}}<br />\n            {{/each ~}}\n            {{/compare ~}}\n            {{/if ~}}\n          </p>\n          {{/ifAny ~}}\n\n          {{#unless opportunity_contact_email ~}}\n          <p class=\"mdc-typography--body1\">You can't volunteer for this opportunity using this site. {{#if organisation_website}}Please contact the organisation directly using <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a> for more information.{{/if}}</p>\n          {{/unless ~}}\n\n          {{#unless (compare view 'widget') ~}}\n          <div class=\"mdc-typography--body1 report pull-right\">\n            <span class=\"fas fa-flag fa-fw\" title=\"Report this opportunity\"></span>\n            <a href=\"mailto:milosupport@scvo.org.uk?subject=Report%20opportunity:%20{{urlencode title}}%20({{urlencode milo_ref}})%20via%20Volunteer%20Scotland%20Search&body=I%20would%20like%20to%20report%20this%20opportunity%20for%20the%20following%20reasons:\">Report this opportunity</a>\n          </div>\n          {{/unless ~}}\n\n          {{#unless (compare view 'widget') ~}}\n          <div class=\"mdc-typography--body2 last-modified\">\n            <span class=\"far fa-calendar-alt\" aria-hidden=\"true\"></span>\n            <span title=\"Updated on {{momentFormat (moment date_last_modified \"x\") \"YYYY-MM-DD hh:mm\"}}\">Last updated {{momentFromNow date_last_modified}}</span>\n          </div>\n          {{/unless ~}}\n        </div>\n      </div>\n\n      {{#unless (compare view 'widget') ~}}\n      <div class=\"panel mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"true\" data-tab-name=\"notes\">\n        <div class=\"text-field-container user-notes\">\n          {{#if @root.data.auth ~}}\n          <form action=\"/save-notes\" method=\"POST\" data-ajax-form='{\"successMessage\": \"Notes saved\",\"failureMessage\": \"Failed to save notes\",\"successCallback\": \"notesSaved\",\"id\": \"{{Id}}\"}'>\n            <div>\n              <textarea class=\"mdc-text-field__input\" data-simple-mde='{\n                \"forceSync\": true,\n                \"toolbar\": [\"heading-1\", \"heading-2\", \"bold\", \"italic\", \"|\", \"unordered-list\", \"ordered-list\", \"link\"]\n              }' name=\"notes\" id=\"notes-{{Id}}\" data-id=\"{{Id}}\">{{getProperty @root.data.profileInfo.notes Id}}</textarea>\n              <input type=\"hidden\" name=\"id\" value=\"{{Id}}\">\n            </div>\n            <div class=\"save-button-block\">\n              <button type=\"submit\" class=\"mdc-button mdc-button--raised\">\n                <span class=\"far fa-save mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                Save notes\n              </button>\n              <button type=\"button\" class=\"mdc-button mdc-button--raised mdc-button--warning\" id=\"delete-notes-{{Id}}\" data-id=\"{{Id}}\" data-ajax-button='{\"url\": \"/delete-notes\",\"method\": \"POST\",\"successMessage\": \"Notes deleted\",\"failureMessage\": \"Failed to delete notes\",\"successCallback\": \"clearNotes\",\"postBody\": { \"id\": \"{{Id}}\"}}'{{#unless (getProperty @root.data.profileInfo.notes Id)}} disabled{{/unless}}>\n                <span class=\"far fa-remove mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                Delete notes\n              </button>\n              <div class=\"mdc-typography--caption\">\n                Any notes you write here are private on your account and are not shared with {{organisation_name}}. Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>.\n              </div>\n            </div>\n          </form>\n          {{else}}\n          <div class=\"detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              If you <a href=\"/sign-up\">sign up</a>, you can private write notes here.\n              <a href=\"/sign-in\">Sign in</a> if you already have a My Volunteer account.\n            </p>\n          </div>\n          {{/if ~}}\n        </div>\n      </div>\n      {{/unless ~}}\n\n      {{#compare view 'widget' ~}}\n      {{#if @root.request.headers.widget-disable-mva ~}}\n      {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}\n      <p class=\"t-margin-full mdc-typography--body1\">\n        <strong>Contact name:</strong> {{opportunity_contact_first_name}} {{opportunity_contact_last_name}}\n      </p>\n      {{/ifAny}}\n      {{#if opportunity_contact_email ~}}\n      <a href=\"mailto:{{opportunity_contact_email}}?subject=Re:%20{{milo_ref}}\" class=\"register-interest mdl-button mdl-button--raised mdl-button--colored\">\n        <span class=\"material-icons icon-left\" aria-hidden=\"true\">email</span>\n        <span class=\"underline\">I want to volunteer</span>\n      </a>\n      {{else}}\n      {{#if opportunity_contact_phone ~}}\n      <p class=\"mdc-typography--body1\">\n        <strong>Contact phone:</strong> {{{opportunity_contact_phone}}}\n      </p>\n      {{/if ~}}\n      {{/if ~}}\n      {{else}}\n      <a href=\"https://search.volunteerscotland.net/register-interest/{{Id}}/{{title_slug}}?utm_source={{default (urlencode (replace (replace @root.request.headers.referer 'http://' '') 'https://' '')) 'widget'}}&utm_campaign=search&utm_medium=widget\" class=\"register-interest mdl-button mdl-button--raised mdl-button--colored v-margin-full\" target=\"_blank\">\n        <span class=\"material-icons icon-left\" aria-hidden=\"true\">open_in_new</span>\n        <span class=\"underline\">I want to volunteer</span>\n      </a>\n      {{/if ~}}\n      {{/compare ~}}\n\n      <div{{#unless (compare view 'widget')}} class=\"panel mdc-card--full-content\" role=\"tabpanel\" aria-hidden=\"true\" data-tab-name=\"location\"{{/unless}}>\n        <div class=\"location-info\">\n          {{#compare (length (arrayify geo_coords)) \">\" 0 ~}}\n          {{#compare view \"widget\" ~}}\n          <h4 class=\"mdc-typography--headline6\">Location</h4>\n          <div class=\"map-results v-margin-full\" data-component=\"LeafletMap\" data-LeafletMap='{{#json}}\n            {{#json key=\"points\" type=\"array\"}}{{/json}},\n            {{#json key=\"mapOptions\"}}\n              {{{json key=\"fullscreenControl\" value=true}}},\n              {{{json key=\"scrollWheelZoom\" value=false}}},\n              {{{json key=\"trackResize\" value=false}}}\n            {{/json}},\n            {{#json key=\"initialLatLng\"}}\n              {{{json key=\"lat\" value=55.94528820000001}}},\n              {{{json key=\"lng\" value=-3.200755699999945}}}\n            {{/json}},\n            {{{json key=\"initialZoom\" value=9}}},\n            {{#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}}\n              {{#json key=\"featureGroups\" type=\"array\"}}\n                {{#json}}\n                  {{{json key=\"boundToThis\" value=true}}},\n                  {{#json key=\"features\" type=\"array\"}}\n                    {{#json}}\n                      {{{json key=\"type\" value=\"Circle\"}}},\n                      {{#json key=\"latLng\"}}\n                        {{{json key=\"lat\" value=@root.request.params.query.lat}}},\n                        {{{json key=\"lng\" value=@root.request.params.query.lng}}}\n                      {{/json}},\n                      {{#json key=\"options\"}}\n                        {{{json key=\"radius\" value=(multiply @root.request.params.query.distance 1609.344)}}}\n                      {{/json}}\n                    {{/json}}\n                  {{/json}}\n                {{/json}}\n              {{/json}},\n            {{/ifAll}}\n            {{#json key=\"markerClusterGroups\" type=\"array\"}}\n              {{#json}}\n                {{#json key=\"options\"}}\n                  {{{json key=\"showCoverageOnHover\" value=false}}}\n                {{/json}},\n                {{{json key=\"boundToThis\" value=true}}},\n                {{#json key=\"markers\" type=\"array\"}}\n                  {{#each (arrayify geo_coords) ~}}\n                    {{#json}}\n                      {{#json key=\"latLng\"}}\n                        {{{json key=\"lat\" value=lat}}},\n                        {{{json key=\"lng\" value=lon}}}\n                      {{/json}},\n                      {{#json key=\"popupContent\" type=\"string\"~}}\n                        <h4>{{../organisation_name}}</h4>\n                        <p>Postcode: {{itemAt (arrayify (split ../postcode \",\")) @index}}</p>\n                        <p>{{../title}}</p>\n                      {{~/json}},\n                      {{#json key=\"options\"}}\n                        {{{json key=\"title\" value=(replace ../title \"'\" \"&apos;\")}}}\n                      {{/json}}\n                    {{/json}},\n                  {{/each ~}}\n                {{/json}}\n              {{/json}}\n            {{/json}}\n          {{/json}}'></div>\n          {{else}}\n          <div class=\"container-content container-map\">\n            <div id=\"map-content-primary\" data-map-name=\"opportunityMap\" data-map-clustered-options='{}'>\n              {{#each (arrayify geo_coords) ~}}\n              <marker style=\"display:none;\" data-map=\"opportunityMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-title=\"{{../organisation_name}} - {{../title}}\">\n                <h4 class=\"mdc-typography--headline7\">{{../organisation_name}}</h4>\n                {{#if (itemAt (arrayify (split ../postcode \",\")) @index) ~}}\n                <div class=\"mdc-typography--body2 v-margin\">\n                  Postcode: {{itemAt (arrayify (split ../postcode \",\")) @index}}\n                </div>\n                {{/if ~}}\n                <p class=\"mdc-typography--body2\">{{../title}}</p>\n              </marker>\n              {{/each ~}}\n            </div>\n          </div>\n          {{/compare ~}}\n          {{#compare advertised_areas.length \">\" 0 ~}}\n          <div class=\"detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              This opportunity is also advertised across\n              {{#compare (getType advertised_areas) \"string\" ~}}\n              {{{advertised_areas}}}.\n              {{else}}\n              {{#each advertised_areas ~}}\n              {{#if @last}} and {{/if}}{{{this}}}{{#unless @last}}{{#compare ../advertised_areas.length \">\" 2}},{{/compare}} {{else}}.{{/unless}}\n              {{/each ~}}\n              {{/compare ~}}\n            </p>\n          </div>\n          {{/compare ~}}\n          {{else}}\n          <div class=\"container-content detailed-info\">\n            <p class=\"mdc-typography--body1\">\n              {{#compare advertised_areas.length \">\" 0 ~}}\n              This opportunity is not listed at a specific location but is advertised across\n              {{#compare (getType advertised_areas) \"string\" ~}}\n              {{{advertised_areas}}}.\n              {{else}}\n              {{#each advertised_areas ~}}\n              {{#if @last}} and {{/if}}{{{this}}}{{#unless @last}}{{#compare ../advertised_areas.length \">\" 2}},{{/compare}} {{else}}.{{/unless}}\n              {{/each ~}}\n              {{/compare ~}}\n              {{else}}\n              This opportunity is not listed at a specific location.\n              {{/compare ~}}\n            </p>\n          </div>\n          {{/compare ~}}\n        </div>\n      </div>\n    </div>\n\n    {{#unless (compare view 'widget') ~}}\n    {{> opportunity_actions slug=slug Id=Id action=\"organisation\"}}\n    {{/unless ~}}\n  </div>\n</div>\n<script>\nfunction clearNotes(data) {\n  $('#notes-' + this.request.data.id)[0].mde.value('');\n  this.$button.prop('disabled', true);\n}\nfunction notesSaved(evt, data) {\n  // console.log('notesSaved Arguments:', arguments);\n  $('#delete-notes-' + data.id).prop('disabled', false);\n}\nwindow.opportunityId = '{{Id}}';\n</script>",
        "opportunity_gist": "<div class=\"mdc-card content-primary gist\" data-opportunity-id=\"{{Id}}\">\n  <div class=\"mdc-card__info--content-primary-row\">\n    <div class=\"mdc-card__media mdc-card__media--square demo-card__media search-result-card__media--content-secondary\" style=\"background-image:url({{organisation_logo_url}});\"></div>\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline7\">\n        {{title}}\n      </div>\n      <div class=\"mdc-card__info--content-primary-secondary mdc-typography--body1\">\n        <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">{{organisation_name}}</a>\n      </div>\n    </div>\n  </div>\n  {{> opportunity_actions slug=slug Id=Id}}\n</div>",
        "opportunity_json_ld": "{\n  \n}",
        "opportunity_key_info": "<div class=\"mdc-card__info--content-primary-row\">\n  <div class=\"mdc-card__info--content-primary\">\n    {{#ifAny (compare @root.route.name \"===\" \"opportunity_search\") (compare @root.route.name \"===\" \"opportunities_in\") ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n    <div class=\"v-margin pull-right mdc-card__info--search-distance\">\n      {{#if distance ~}}\n      {{#ifAll (compare distance \"!==\" \"\") (compare distance \"!==\" \"Infinity\") (compare distance \"<=\" @root.request.params.query.distance) ~}}\n      {{> opportunity_location_distance distance=distance}}\n      {{else}}\n      {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n      {{> opportunity_location_home}}\n      {{else}}\n      {{#ifAny (compare (getType advertised_areas) \"string\") (compare advertised_areas.length \">\" 0) ~}}\n      {{> opportunity_location_areas advertised_areas=advertised_areas}}\n      {{/ifAny ~}}\n      {{/if ~}}\n      {{/ifAll ~}}\n      {{else}}\n      {{#compare distance \"===\" 0 ~}}\n      {{> opportunity_location_distance distance=0.1}}\n      {{else}}\n      {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n      {{> opportunity_location_home}}\n      {{else}}\n      {{> opportunity_location_areas advertised_areas=advertised_areas}}\n      {{/if ~}}\n      {{/compare ~}}\n      {{/if ~}}\n    </div>\n    {{else}}\n    {{#if (contains volunteersearch_type \"Home-based volunteering\") ~}}\n    <div class=\"v-margin pull-right mdc-card__info--search-distance\">\n      {{> opportunity_location_home}}\n    </div>\n    {{/if ~}}\n    {{/ifAll ~}}\n    {{/ifAny ~}}\n    {{#compare @root.route.name \"===\" \"opportunity\" ~}}\n    {{#unless (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null) \"\") ~}}\n    {{#compare type \"full\" ~}}\n    <div class=\"b-margin\">\n      {{#compare view 'widget' ~}}\n      {{#ifAny @root.request.params.query.page @root.request.params.query.keywords @root.request.params.query.location @root.request.params.query.activities @root.request.params.query.themes @root.request.params.query.organisation_activities @root.request.params.query.has_opportunities @root.request.params.query.volunteersearch_types @root.request.params.query.age_groups @root.request.params.query.services ~}}\n      <a href=\"#/search{{> query_search}}\" class=\"pull-left mdl-button mdl-button--raised b-margin-full\">\n        <span class=\"material-icons icon-left\" aria-hidden=\"true\">arrow_back_ios</span>\n        Back to results\n      </a>\n      {{/ifAny ~}}\n      <a href=\"https://search.volunteerscotland.net/opportunity-pdf/{{Id}}/{{title_slug}}?view=widget\" class=\"pull-right mdl-button mdl-button--raised b-margin-full\" download>\n        Print\n        <span class=\"material-icons icon-right\" aria-hidden=\"true\">print</span>\n      </a>\n      <div style=\"clear:both;\" />\n      {{else}}\n      {{#ifAny @root.request.params.query.page @root.request.params.query.keywords @root.request.params.query.location @root.request.params.query.activities @root.request.params.query.themes @root.request.params.query.organisation_activities @root.request.params.query.has_opportunities @root.request.params.query.volunteersearch_types @root.request.params.query.age_groups @root.request.params.query.services ~}}\n      <a href=\"/search{{> query_search}}\" class=\"back-to-results\"><span class=\"far fa-chevron-circle-left\" aria-hidden=\"true\"></span> <span class=\"underline\">Back to search results</span></a>\n      {{/ifAny ~}}\n      {{/compare ~}}\n    </div>\n    {{/compare ~}}\n    {{/unless ~}}\n    {{#if goodhq_organisation.image_url ~}}\n    <div class=\"mdc-card__media mdc-card__media--content-secondary pull-right\">\n      <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">\n        <img src=\"{{goodhq_organisation.image_url}}\" alt=\"{{organisation_name}}\" />\n      </a>\n    </div>\n    {{/if ~}}\n    {{/compare ~}}\n    <h2 class=\"mdc-card__info--content-primary-title mdc-typography--headline6\">\n      {{#compare type 'full' ~}}\n      {{{title}}}\n      {{else}}\n      {{#compare view 'widget' ~}}\n      {{#compare type 'list'}}\n      <a href=\"https://search.volunteerscotland.net/opportunity/{{Id}}/{{title_slug}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null view=null}}}\">{{{title}}}</a>\n      {{else}}\n      <a href=\"#/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\">{{{title}}}</a>\n      {{/compare}}\n      {{else}}\n      <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\">\n        <span class=\"hover-underline\">{{{title}}}</span>\n      </a>\n      {{/compare}}\n      {{/compare ~}}\n      {{#compare view 'widget' ~}}\n      {{#if organisation_name ~}}\n      – {{{organisation_name}}}\n      {{/if ~}}\n      {{/compare ~}}\n    </h2>\n    {{#unless (compare view 'widget') ~}}\n    {{#ifAll organisation_id organisation_name organisation_name_slug ~}}\n    <ul class=\"fa-ul organisation\">\n      <li class=\"mdc-card__info--content-primary-organisation mdc-typography--body1\">\n        <span class=\"fa-li\"><span class=\"far fa-home-heart\" title=\"Organisation\"></span></span>\n        <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}{{> query_search}}\">{{{organisation_name}}}</a>\n      </li>\n    </ul>\n    {{/ifAll ~}}\n    {{/unless ~}}\n    {{#ifAny milo_ref (compare volunteersearch_type.length \">\" 0) ~}}\n    <ul class=\"fa-ul first\">\n      {{#if milo_ref ~}}\n        {{#unless (compare type 'list') ~}}\n        <li class=\"mdc-card__info--content-primary-reference mdc-typography--body1\">\n          {{#unless (compare view 'widget') ~}}\n          <span class=\"fa-li\"><span class=\"far fa-hashtag\" title=\"Reference\"></span></span>\n          {{/unless ~}}\n          {{milo_ref}}\n        </li>\n        {{/unless ~}}\n      {{/if ~}}\n      {{#compare volunteersearch_type.length \">\" 0 ~}}\n        <li class=\"mdc-card__info--content-primary-info mdc-typography--body1\">\n          {{#unless (compare view 'widget') ~}}\n          <span class=\"fa-li\"><span class=\"far fa-info-circle\" title=\"Specialist role\"></span></span>\n          {{/unless ~}}\n          {{#each volunteersearch_type ~}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}\n        </li>\n      {{/compare ~}}\n    </ul>\n    {{/ifAny ~}}\n  </div>\n  {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) Id) ~}}\n  {{#ifAny opportunity_contact_first_name opportunity_contact_last_name organisation_website ~}}\n  <div class=\"mdc-card__info--content-primary\">\n    <h4 class=\"mdc-typography--headline6 t-margin-full\">Contact</h4>\n    {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Name: </strong> {{{opportunity_contact_first_name}}} {{{opportunity_contact_last_name}}}\n    </div>\n    {{/ifAny ~}}\n\n    {{#if opportunity_contact_email ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Email: </strong> <a href=\"mailto:{{{opportunity_contact_email}}}\">{{{opportunity_contact_email}}}</a>\n    </div>\n    {{/if ~}}\n\n    {{#if organisation_website ~}}\n    <div class=\"mdc-typography--body1\">\n      <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n    </div>\n    {{/if ~}}\n  </div>\n  {{/ifAny ~}}\n  {{/if ~}}\n</div>",
        "opportunity_list": "<div class=\"mdc-card content-primary list\" data-opportunity-id=\"{{Id}}\" data-opportunity-layout=\"List\" data-opportunity-context=\"{{default viewContext \"Other\"}}\">\n  {{> opportunity_key_info type=\"list\"}}\n  {{#unless (compare view 'widget') ~}}\n  <hr class=\"mdc-list-divider\" />\n  {{/unless ~}}\n  {{> opportunity_description description=description}}\n  {{#unless (compare view 'widget') ~}}\n  {{> opportunity_actions slug=slug Id=Id}}\n  {{/unless ~}}\n</div>",
        "opportunity_location_areas": "<ul class=\"fa-ul areas\">\n  <li class=\"mdc-typography--body2\">\n    <span class=\"fa-li\"><span class=\"far fa-location-arrow fa-fw\" title=\"Location\"></span></span>\n    {{#compare (getType advertised_areas) \"string\" ~}}\n    {{{advertised_areas}}}\n    {{else}}\n    {{#compare advertised_areas.length \">\" 3 ~}}\n    {{advertised_areas.length}} areas\n    {{else}}\n    {{#each advertised_areas ~}}\n    {{#if (contains (map @root.data.location_data.la_results.aggregations.local_authority_areas.buckets (getProp \"key\")) this) ~}}\n    <span class=\"area\">{{{this}}}</span>\n    {{/if ~}}\n    {{/each ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n  </li>\n</ul>",
        "opportunity_location_distance": "<ul class=\"fa-ul\">\n  <li class=\"mdc-typography--body2\">\n    {{#compare view 'widget' ~}}\n    <span class=\"material-icons\" aria-hidden=\"true\">near_me</span>\n    {{else}}\n    <span class=\"fa-li\"><span class=\"fas fa-location-arrow fa-fw\" title=\"Distance\"></span></span>\n    {{/compare ~}}\n    {{#compare distance \"<\" 4 ~}}\n      Less than {{inflect (round distance \"up\") \"mile\" \"miles\" true}} away\n    {{else}}\n      {{#compare distance \"<\" 10 ~}}\n        Within {{round distance \"up\"}} miles\n      {{else}}\n        {{round distance \"up\"}} miles away\n      {{/compare ~}}\n    {{/compare ~}}\n  </li>\n</ul>",
        "opportunity_location_home": "<ul class=\"fa-ul\">\n  <li class=\"mdc-typography--body2\">\n    <span class=\"fa-li\"><span class=\"far fa-location-arrow fa-fw\" title=\"Location\"></span></span>\n    Home-based\n  </li>\n</ul>",
        "opportunity_map_json": "{{#json}}\n  {{#json key=\"latLng\"}}\n    {{{json key=\"lat\" value=lat}}},\n    {{{json key=\"lng\" value=lng}}}\n  {{/json}},\n  {{#json key=\"popupContent\" type=\"string\"~}}\n    <h3 class=\"map-info post-title\">\n      <a href=\"#/opportunity/{{this.Id}}/{{this.title_slug}}{{> query_search}}\">{{replace this.title '\"' \"&quot;\"}}</a>\n    </h3>\n    {{#if this.organisation_name ~}}\n    <div class=\"v-margin post-info-item\">\n      {{this.organisation_name}}\n    </div>\n    {{/if ~}}\n    {{#if map_postcode ~}}\n    <div class=\"v-margin post-info-extra\">\n      Postcode: {{map_postcode}}\n    </div>\n    {{/if ~}}\n    {{#if this.description ~}}\n    <div style=\"max-height: 2.8rem;\"  class=\"post-info-item post-info-extra post-info-description faded-overflow\">\n      {{truncate (replace this.description '\"' \"&quot;\") \"255\"}}\n    </div>\n    {{/if ~}}\n    <div class=\"post-info-extra\">\n      <a href=\"#/opportunity/{{this.Id}}/{{this.title_slug}}{{> query_search}}\">Find out more</a>\n    </div>\n  {{~/json}},\n  {{#json key=\"options\"}}\n    {{{json key=\"title\" value=(replace this.title \"'\" \"&apos;\")}}}\n  {{/json}}\n{{/json}},",
        "opportunity_map": "<div class=\"map-content\" data-opportunity-id=\"{{Id}}\" data-opportunity-layout=\"Map\" data-opportunity-context=\"{{default viewContext \"Map\"}}\">\n  <h3 class=\"mdc-typography--headline7 map-info post-title\">\n    <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\">{{title}}</a>\n  </h3>\n  {{#if organisation_name ~}}\n  <div class=\"mdc-typography--body1 v-margin post-info-item\">\n    {{organisation_name}}\n  </div>\n  {{/if ~}}\n  {{#if map_postcode ~}}\n  <div class=\"mdc-typography--body2 v-margin post-info-extra\">\n    Postcode: {{map_postcode}}\n  </div>\n  {{/if ~}}\n  <div class=\"mdc-typography--body2 post-info post-info-extra\">\n    {{#if description ~}}\n    <div style=\"max-height: 2.8rem;\"  class=\"post-info-item post-info-description faded-overflow\">\n      {{{description}}}\n    </div>\n    {{/if ~}}\n  </div>\n  <div class=\"mdc-typography--body2\">\n    <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action\">Find out more</a>\n  </div>\n</div>",
        "opportunity_mini": "<div class=\"mdc-card content-primary mini\" data-opportunity-id=\"{{Id}}\" data-opportunity-layout=\"Mini\" data-opportunity-context=\"{{default viewContext \"Other\"}}\">\n  {{> opportunity_key_info}}\n  {{> opportunity_description limit=\"4.5rem\" description=description}}\n  {{> opportunity_actions slug=slug Id=Id}}\n</div>",
        "opportunity_notes": "{{#compare (trim (getProperty @root.data.profileInfo.notes Id)) \"!==\" \"\" ~}}\n  <div class=\"search-result-article__notes\">\n    <h4 class=\"mdc-typography--headline7\">\n      Your notes&ensp;\n      <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}#notes\" class=\"mdc-typography--body2\">Edit</a>\n    </h4>\n    <div class=\"mdc-typography--body1\">\n      {{#if limit ~}}\n        {{#compare @root.route.name \"===\" \"notes\" ~}}\n          {{{markdown (getProperty @root.data.profileInfo.notes Id)}}}\n        {{else}}\n          <div style=\"height: {{limit}};\" class=\"faded-overflow\">\n          {{{markdown (truncate (getProperty @root.data.profileInfo.notes Id) limit)}}}\n          </div>\n          <a href=\"/opportunity/{{Id}}/{{title_slug}}{{> query_search}}#notes\">Read more</a>\n        {{/compare ~}}\n      {{else}}\n        {{{markdown (getProperty @root.data.profileInfo.notes Id)}}}\n      {{/if ~}}\n    </div>\n  </div>\n{{/compare ~}}\n",
        "opportunity_search_result": "<div class=\"{{#compare view 'widget'}}mdl-card full-width v-margin-full{{else}}mdc-card content-primary search-result{{/compare}}\" data-opportunity-id=\"{{Id}}\" data-opportunity-layout=\"Search Result\" data-opportunity-context=\"{{default viewContext \"Search Results\"}}\">\n  <div class=\"{{#compare view 'widget'}}mdl-card__subtitle-text h-padding-full{{/compare}}\">\n    {{> opportunity_key_info type=\"search_result\"}}\n  </div>\n  {{#unless (compare view 'widget') ~}}\n  <hr class=\"mdc-list-divider\" />\n  {{/unless ~}}\n  {{#compare (trim (getProperty @root.data.profileInfo.notes Id)) \"!==\" \"\" ~}}\n    {{> opportunity_description limit=\"3rem\" description=description}}\n    {{> opportunity_notes limit=\"5rem\"}}\n  {{else}}\n    {{> opportunity_description limit=\"6rem\" description=description}}\n  {{/compare ~}}\n  {{#unless (compare view 'widget') ~}}\n  {{> opportunity_actions slug=slug Id=Id home_based=home_based distance=distance action=action}}\n  {{/unless ~}}\n</div>",
        "opportunity_timings_display": "<div class=\"table-responsive\">\n  <table class=\"table table-condensed\">\n    <thead>\n      <tr>\n        <th></th>\n        <th><p>Mon</p></th>\n        <th><p>Tue</p></th>\n        <th><p>Wed</p></th>\n        <th><p>Thu</p></th>\n        <th><p>Fri</p></th>\n        <th><p>Sat</p></th>\n        <th><p>Sun</p></th>\n      </tr>\n    </thead>\n    <tbody>\n      {{#each (split \"morning,afternoon,evening\" \",\")}}\n      <tr>\n        <th>{{capitalize this}}</th>\n        {{#each (split \"monday,tuesday,wednesday,thursday,friday,saturday,sunday\" \",\")}}\n        <td style=\"font-weight:normal;\">\n          {{#compare ../../view 'widget' ~}}\n          <label class=\"mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect\">\n            <input type=\"checkbox\" name=\"availability[]\" class=\"mdl-checkbox__input\" disabled value=\"{{concat this \"-\" ../this}}\"{{#if (contains ../../availability (concat this \"-\" ../this))}} checked{{/if}}>\n          </label>\n          {{else}}\n          <div class=\"mdc-checkbox\">\n            <input type=\"checkbox\" name=\"availability[]\" class=\"mdc-checkbox__native-control\" disabled value=\"{{concat this \"-\" ../this}}\"{{#if (contains ../../availability (concat this \"-\" ../this))}} checked{{/if}}>\n            <div class=\"mdc-checkbox__background\">\n              <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                <path class=\"mdc-checkbox__checkmark__path\" fill=\"none\" stroke=\"white\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"></path>\n              </svg>\n              <div class=\"mdc-checkbox__mixedmark\"></div>\n            </div>\n          </div>\n          {{/compare ~}}\n        </td>\n        {{/each}}\n      </tr>\n      {{/each}}\n    </tbody>\n  </table>\n</div>",
        "organisation_search_form": "{{#*inline \"term_filter\"}}\n  <h3 class=\"mdc-drawer__content-heading cursor-pointer noselect mdc-drawer--occasional-ie11\" data-checkbox-collapse-target=\"#{{../instance_id}}-{{type}}-collapse\" role=\"button\" aria-pressed=\"false\" aria-label=\"Show {{getProperty @root.context.metaData.termTypeLabels (concat type \".plural\")}}\" tabindex=\"0\">\n    {{getProperty @root.context.metaData.termTypeLabels (concat type \".plural\")}}\n    <span class=\"mdc-icon-toggle pull-right\">\n      <span class=\"far fa-chevron-down\" aria-hidden=\"true\"></span>\n    </span>\n  </h3>\n  <div class=\"mdc-drawer--occasional-ie11 checkbox-toggle-display-checked\" id=\"{{../instance_id}}-{{type}}-collapse\" >\n    {{#each (getProperty @root.data.organisationSupplimentary.types.aggregations (concat type \"_slugs.buckets\")) ~}}\n      {{#if key ~}}\n        {{> term_checkbox slug=key field=../type selected=(getProperty @root.request.params.query ../type) instance_id=../../instance_id value=(lookup (getProperty @root.data.organisationSupplimentary.types.aggregations (concat ../type \".buckets\")) @index)}}\n      {{/if ~}}\n    {{/each ~}}\n  </div>\n{{/inline}}\n\n{{#*inline \"term_checkbox\"}}\n  <div class=\"mdc-form-field\">\n    <div class=\"mdc-checkbox\">\n      <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" id=\"{{instance_id}}_{{field}}_{{slug}}\" name=\"{{#compare field \"===\" \"type\"}}{{field}}{{else}}{{field}}[]{{/compare}}\" value=\"{{slug}}\"{{#if (contains (arrayify selected) slug)}} checked{{/if}} />\n      <div class=\"mdc-checkbox__background\">\n        <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n        <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" stroke=\"white\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/></svg>\n        <div class=\"mdc-checkbox__mixedmark\"></div>\n      </div>\n    </div>\n    <label for=\"{{instance_id}}_{{field}}_{{slug}}\">\n      {{{default value.key value}}}\n    </label>\n  </div>\n{{/inline}}\n\n<div class=\"mdc-drawer__content\">\n  <form action=\"/{{#compare @root.request.url.pathname \"organisations/map\"}}organisations/map{{else}}organisations/search{{/compare}}\" method=\"GET\" class=\"search-form\" novalidate>\n    <div class=\"h-padding-full\">\n      <input type=\"hidden\" name=\"sort\" value=\"{{@root.request.params.query.sort}}\" id=\"{{instance_id}}-sort\">\n      <div class=\"\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\" style=\"z-index:5;\">\n              <span class=\"fas fa-map-marker-alt mdc-text-field__icon geo-lookup\" tabindex=\"0\" title=\"Find my location\" role=\"button\" style=\"pointer-events: initial !important;\"></span>\n              <input type=\"text\" id=\"{{instance_id}}-location\" name=\"location\" class=\"mdc-text-field__input mdc-text-field--fullwidth search-location\" value=\"{{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}{{@root.request.params.query.location}}{{/ifAll}}\" placeholder=\"\" data-lpignore=\"true\" data-location-search='{\n                  \"latSelector\": \"[name=\\\"lat\\\"]\",\n                  \"lngSelector\": \"[name=\\\"lng\\\"]\",\n                  \"locationServicesSelector\": \".geo-lookup\"\n                }'>\n              <label class=\"mdc-floating-label\" for=\"{{instance_id}}-location\">\n                Location\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n              <span class=\"mdc-select__dropdown-icon\"></span>\n              <select class=\"mdc-select__native-control\" id=\"distance\" name=\"distance\">\n                {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n                  <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n                {{/each}}\n              </select>\n              <label class=\"mdc-floating-label mdc-select__label--float-above\" for=\"distance\">\n                Within\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <input type=\"hidden\" name=\"lat\" value=\"{{@root.request.params.query.lat}}\">\n      <input type=\"hidden\" name=\"lng\" value=\"{{@root.request.params.query.lng}}\">\n\n      <!-- <div class=\"h-padding\">\n        <strong>Refine by</strong>\n      </div> -->\n\n      <div class=\"\">\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-trailing-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <input type=\"text\" id=\"{{instance_id}}-keywords\" name=\"keywords\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" value=\"{{@root.request.params.query.keywords}}\" data-lpignore=\"true\" autocomplete=\"off\">\n          <label class=\"mdc-floating-label\" for=\"keywords\">\n            Keywords\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n          <span class=\"fas fa-search active-search-icon mdc-text-field__icon\" role=\"button\" onclick=\" $(this).parents('form:first').submit();\" style=\"pointer-events: initial !important; z-index: 500;\" tabindex=\"-1\"></span></a>\n        </div>\n      </div>\n\n      {{#each (split \"organisation_activities\" \",\") ~}}\n        {{> term_filter type=this instance_id=instance_id ~}}\n      {{/each ~}}\n\n      <div class=\"mdc-drawer--occasional-ie11\">\n        <button class=\"mdc-button mdc-button--raised mdc-button--large mdc-button--fullwidth mdc-ripple-surface mdc-ripple-surface--primary\" type=\"submit\" id=\"{{instance_id}}-search-submit\" data-mdc-auto-init=\"MDCRipple\">\n          Search\n          <span class=\"far fa-search fa-fw\" aria-hidden=\"true\"></span>\n        </button>\n      </div>\n    </div>\n  </form>\n</div>\n",
        "organisation_search_results": "<div class=\"mdc-layout-grid head\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone action\">\n      {{#> components_tab_bar}}\n        {{> search_button}}\n        {{> components_tab url=(concat \"/organisations/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/organisations/search\")}}\n        {{> components_tab url=(concat \"/organisations/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/organisations/map\")}}\n      {{/components_tab_bar}}\n    </div>\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-5-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone pagination-desktop\">\n    </div>\n  </div>\n</div>\n\n<div class=\"mdc-layout-grid grid-content equal-height\">\n  <div class=\"mdc-layout-grid__inner\">\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n      {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n    </div>\n  </div>\n  <div class=\"mdc-layout-grid__inner\">\n    {{#each @root.data.search_data.detailed_results.hits.hits ~}}\n    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone\">\n      {{> organisation_search_result _source}}\n    </div>\n    {{/each ~}}\n  </div>\n</div>\n\n<div class=\"foot t-margin-full\">\n  {{> pagination firstLastNavigation=true paging=@root.data.search_data.detailed_results.pagination}}\n</div>",
        "organisation_full": "<div class=\"{{#compare view 'widget'}}x-padding-full{{else}}mdc-card{{/compare}} full content-secondary\" data-organisation-id=\"{{Id}}\">\n  {{#compare view 'widget' ~}}\n  <div class=\"\">\n    {{#ifAny @root.request.params.query.page @root.request.params.query.keywords @root.request.params.query.location @root.request.params.query.organisation_activities ~}}\n    <a href=\"#/organisations-all/search{{> query_search}}\" class=\"pull-left mdl-button b-margin-full\">\n      <span class=\"material-icons icon-left\" aria-hidden=\"true\">arrow_back_ios</span>\n      Back to results\n    </a>\n    {{/ifAny ~}}\n    {{!-- <a href=\"https://search.volunteerscotland.net/organisation-pdf/{{Id}}/{{title_slug}}?view=widget\" class=\"pull-right mdl-button b-margin-full\" download>\n    Print\n    <span class=\"material-icons icon-right\" aria-hidden=\"true\">print</span>\n    </a> --}}\n    <div style=\"clear:both;\" />\n  </div>\n  {{/compare ~}}\n  <div class=\"mdc-card__info--content-secondary-row\">\n    <div class=\"mdc-card__info--content-secondary\">\n      {{#if goodhq_organisation.image_url ~}}\n      <div class=\"mdc-card__media mdc-card__media--content-secondary\">\n        <img src=\"{{goodhq_organisation.image_url}}\" alt=\"{{title}}\" />\n      </div>\n      {{/if ~}}\n      <h2 class=\"mdc-card__info--content-secondary-title mdc-typography--headline3\">\n        {{{title}}}\n      </h2>\n      {{#if rendered.charity_info ~}}\n      {{{rendered.charity_info}}}\n      {{/if ~}}\n\n      <div class=\"detailed-info\">\n        {{#ifAny description description_html ~}}\n        <div class=\"mdc-typography--body1 v-margin\">\n          {{#if description_html}}{{{description_html}}}{{else}}{{{replace (replace description \"\\r\\n\" \"<br />\") \"\\n\" \"<br />\"}}}{{/if}}\n        </div>\n        {{/ifAny ~}}\n      </div>\n      <div class=\"key-info-extra\">\n        <ul class=\"fa-ul\">\n          {{#compare (length main_activities_global) \">\" 0 ~}}\n          <li class=\"mdc-card__info--content-primary-work-type reference mdc-typography--body1\">\n            {{#compare view 'widget' ~}}\n            {{#each main_activities_global ~}}\n            {{{this}}}{{#unless @last}}, {{/unless}}\n            {{/each ~}}\n            {{else}}\n            <span class=\"fa-li\"><span class=\"far fa-briefcase fa-fw\" title=\"Activities\"></span></span>\n            {{#each main_activities_global ~}}\n            <a href=\"/organisations/search?organisation_activities%5B%5D={{urlencode (slugify (replace this \"/\" \"-\"))}}\">{{{this}}}</a>{{#unless @last}}, {{/unless}}\n            {{/each ~}}\n            {{/compare}}\n          </li>\n          {{/compare ~}}\n\n          {{#ifAny location_street location_city location_region ~}}\n          <li class=\"mdc-card__info--content-primary-work-type reference mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"far fa-map-marker-alt fa-fw\" title=\"Location\"></span></span>\n            {{/unless ~}}\n            {{#if location_street}}{{location_street}}, {{/if}}\n            {{#if location_city}}{{location_city}}, {{/if}}\n            {{#if location_region}}{{replace (replace location_region \"City of \" \"\") \" City\" \"\"}}, {{/if}}\n            {{#if location_postcode}}{{location_postcode}}{{/if}}\n          </li>\n          {{else}}\n          {{#if geo ~}}\n          <li class=\"mdc-card__info--content-primary-work-type reference mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"far fa-map-marker-alt fa-fw\" title=\"Location\"></span></span>\n            {{/unless ~}}\n            {{geo.admin_ward}}, {{replace (replace geo.admin_district \"City of \" \"\") \" City\" \"\"}}\n          </li>\n          {{/if ~}}\n          {{/ifAny ~}}\n\n          {{#if website ~}}\n          {{#compare website \"!==\" null ~}}\n          {{#compare website \"!==\" \"http://\" ~}}\n          <li class=\"mdc-card__info--content-secondary-website mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"far fa-link fa-fw\" title=\"Website\"></span></span>\n            {{/unless ~}}\n            <a href=\"{{fixUrl website \"http\"}}\">{{website}}</a>\n          </li>\n          {{/compare ~}}\n          {{/compare ~}}\n          {{/if ~}}\n          {{#if twitter ~}}\n          {{#compare twitter \"!==\" null ~}}\n          {{#compare twitter \"!==\" \"http://\" ~}}\n          <li class=\"mdc-card__info--content-secondary-twitter mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"fab fa-twitter fa-fw\" title=\"Twitter\"></span></span>\n            {{/unless ~}}\n            <a href=\"{{#unless (contains twitter \"twitter.com\")}}https://twitter.com/{{/unless}}{{twitter}}\">{{#unless (contains twitter \"@\")}}@{{/unless}}{{replace twitter \"https://twitter.com/\" \"\"}}</a>\n          </li>\n          {{/compare ~}}\n          {{/compare ~}}\n          {{/if ~}}\n          {{#if facebook ~}}\n          {{#compare facebook \"!==\" null ~}}\n          {{#compare facebook \"!==\" \"http://\" ~}}\n          <li class=\"mdc-card__info--content-secondary-facebook mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"fab fa-facebook fa-fw\" title=\"Facebook\"></span></span>\n            {{/unless ~}}\n            <a href=\"{{fixUrl facebook \"http\"}}\">{{facebook}}</a>\n          </li>\n          {{/compare ~}}\n          {{/compare ~}}\n          {{/if ~}}\n          {{#if linkedin ~}}\n          {{#compare linkedin \"!==\" null ~}}\n          {{#compare linkedin \"!==\" \"http://\" ~}}\n          <li class=\"mdc-card__info--content-secondary-linkedin mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"fab fa-linkedin fa-fw\" title=\"LinkedIn\"></span></span>\n            {{/unless ~}}\n            <a href=\"{{fixUrl linkedin \"http\"}}\">{{linkedin}}</a>\n          </li>\n          {{/compare ~}}\n          {{/compare ~}}\n          {{/if ~}}\n\n          {{#if goodhq_organisation ~}}\n          {{#compare goodhq_organisation.xid \"!==\" null ~}}\n          <li class=\"mdc-card__info--content-secondary-goodhq mdc-typography--body1\">\n            {{#unless (compare view 'widget') ~}}\n            <span class=\"fa-li\"><span class=\"far fa-heart fa-fw\" title=\"Good HQ\"></span></span>\n            {{/unless ~}}\n            <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}\">@{{goodhq_organisation.xid}}</a>\n            {{#compare goodhq_organisation.status \"===\" \"Open\" ~}}\n            <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}?mode=reviews\" class=\"no-underline\">{{> goodhq_heart_rating stars=goodhq_organisation.stars}}</a>\n            {{#compare @root.data.goodhq.reviews.hits.total \">\" 0 ~}}\n            from <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}?mode=reviews\">{{inflect @root.data.goodhq.reviews.hits.total \"review\" \"reviews\" true}}</a> {{#compare @root.data.goodhq.posts.hits.total \">\" 0}} and {{/compare ~}}\n            {{/compare ~}}\n            {{#compare @root.data.goodhq.posts.hits.total \">\" 0 ~}}\n            <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}?mode=posts\">{{inflect @root.data.goodhq.posts.hits.total \"post\" \"posts\" true}}</a>\n            {{/compare ~}}\n            {{/compare ~}}\n            on\n            <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}\">Good HQ</a>\n          </li>\n          {{/compare ~}}\n          {{/if ~}}\n\n          {{#unless (compare view 'widget') ~}}\n          <li class=\"mdc-card__info--content-secondary-report report mdc-typography--body1\">\n            <span class=\"fa-li\"><span class=\"fas fa-flag fa-fw\" title=\"Report this organisation\"></span></span>\n            <a href=\"mailto:milosupport@scvo.org.uk?subject=Report%20on%20organisation:%20{{urlencode title}},%20via Volunteer%20Scotland%20Search&body=I%20would%20like%20to%20report%20this%20organisation%20for%20the%20following%20reasons:\">Report this organisation</a>\n          </li>\n          {{/unless ~}}\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>",
        "organisation_map_json": "{{#json}}\n  {{#json key=\"latLng\"}}\n    {{{json key=\"lat\" value=lat}}},\n    {{{json key=\"lng\" value=lng}}}\n  {{/json}},\n  {{#json key=\"popupContent\" type=\"string\"~}}\n    <h3 class=\"map-info post-title\">\n      <a href=\"#/organisation-all/{{this.Id}}/{{this.title_slug}}{{> query_search}}\">{{replace this.title '\"' \"&quot;\"}}</a>\n    </h3>\n    {{#if this.description ~}}\n    <div style=\"max-height: 2.8rem;\"  class=\"post-info-item post-info-extra post-info-description faded-overflow\">\n      {{truncate (replace this.description '\"' \"&quot;\") \"255\"}}\n    </div>\n    {{/if ~}}\n    <div class=\"post-info-extra\">\n      <a href=\"#/organisation-all/{{this.Id}}/{{this.name_slug}}{{> query_search}}\">Find out more</a>\n    </div>\n  {{~/json}},\n  {{#json key=\"options\"}}\n    {{{json key=\"title\" value=(replace this.title \"'\" \"&apos;\")}}}\n  {{/json}}\n{{/json}},",
        "organisation_map": "<div class=\"map-content\">\n  <h3 class=\"mdc-typography--headline7\">\n    <a href=\"/organisation/{{Id}}/{{title_slug}}{{> query_search}}\">{{title}}</a>\n  </h3>\n  {{#if postcode ~}}\n  <div class=\"mdc-typography--body1 post-title v-margin\">\n    Postcode: {{postcode}}\n  </div>\n  {{/if ~}}\n  <div class=\"mdc-typography--body2\">\n    {{#if description ~}}\n    <div style=\"max-height: 4.2rem;\"  class=\"post-info-extra post-info-description faded-overflow\">\n      {{{description}}}\n    </div>\n    {{/if ~}}\n  </div>\n  <div class=\"mdc-typography--body2\">\n    <a href=\"/organisation/{{Id}}/{{title_slug}}{{> query_search}}\" class=\"mdc-card__action\">Find out more</a>\n  </div>\n</div>\n",
        "organisation_search_result": "<div class=\"mdc-card search-result\" data-organisation-id=\"{{Id}}\">\n  <div class=\"mdc-card__info--content-secondary-row\">\n    <div class=\"mdc-card__info--content-secondary\">\n      {{#unless (compare view 'widget') ~}}\n      {{#if goodhq_organisation.image_url ~}}\n      <div class=\"mdc-card__media mdc-card__media--content-secondary\">\n        <a href=\"{{#compare view 'widget' ~}}#/organisation-all{{else}}/organisation{{/compare}}/{{Id}}/{{title_slug}}{{> query_search}}\">\n          <img src=\"{{goodhq_organisation.image_url}}\" alt=\"{{title}}\" />\n        </a>\n      </div>\n      {{/if ~}}\n      {{/unless ~}}\n      <h3 class=\"mdc-card__info--content-secondary-title mdc-typography--headline7\">\n        <a href=\"{{#compare view 'widget' ~}}#/organisation-all{{else}}/organisation{{/compare}}/{{Id}}/{{title_slug}}{{> query_search}}\">{{title}}</a>\n      </h3>\n      <div class=\"search-result-article__snippet mdc-typography--body1\">\n        {{{truncate (default og_summary description) 280}}}\n      </div>\n    </div>\n  </div>\n</div>",
        "pagination": "{{#unless (contains (lowercase @root.request.headers.user-agent) \"bot\")}}\n  {{#compare paging.totalPages \">\" 1 ~}}\n    <ul class=\"pagination inline-list\">\n      {{#if firstLastNavigation ~}}\n        <li class=\"{{#if paging.prevPage}}{{else}}disabled{{/if}}\">\n          <a class=\"pagination-arrow\" href=\"{{#compare type 'widget'}}#{{/compare}}{{@root.request.params.uri.pathname}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null page=1 json=false}}}\">\n            <i class=\"far fa-fw fa-chevron-double-left\"></i>\n          </a>\n        </li>\n      {{/if ~}}\n      <li class=\"{{#if paging.prevPage}}{{else}}disabled{{/if}}\">\n        <a class=\"pagination-arrow\" href=\"{{#compare type 'widget'}}#{{/compare}}{{@root.request.params.uri.pathname}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null page=paging.prevPage json=false}}}\">\n          {{#compare type 'widget' ~}}\n          <span class=\"material-icons\" aria-hidden=\"true\">chevron_left</span>\n          {{else}}\n          <i class=\"far fa-fw fa-chevron-left\"></i>\n          {{/compare ~}}\n        </a>\n      </li>\n      {{#each paging.pageRange ~}}\n        <li class=\"{{#compare ../paging.currentPage \"===\" this.pageNumber}}current-page {{/compare}}pagination-distance-{{this.distance}}\">\n          <a class=\"pagination-page\" href=\"{{#compare ../type 'widget'}}#{{/compare}}{{@root.request.params.uri.pathname}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null page=this.pageNumber json=false}}}\">\n            {{this.pageNumber}}\n          </a>\n        </li>\n      {{/each ~}}\n      <li class=\"{{#if paging.nextPage}}{{else}}disabled{{/if}}\">\n        <a class=\"pagination-arrow\" href=\"{{#compare type 'widget'}}#{{/compare}}{{@root.request.params.uri.pathname}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null page=paging.nextPage json=false}}}\">\n          {{#compare type 'widget' ~}}\n          <span class=\"material-icons\" aria-hidden=\"true\">chevron_right</span>\n          {{else}}\n          <i class=\"far fa-fw fa-chevron-right\"></i>\n          {{/compare ~}}\n        </a>\n      </li>\n      {{#if firstLastNavigation ~}}\n        <li class=\"{{#if paging.nextPage}}{{else}}disabled{{/if}}\">\n          <a class=\"pagination-arrow\" href=\"{{#compare type 'widget'}}#{{/compare}}{{@root.request.params.uri.pathname}}?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null page=paging.totalPages json=false}}}\">\n            <i class=\"far fa-fw fa-chevron-double-right\"></i>\n          </a>\n        </li>\n      {{/if ~}}\n    </ul>\n  {{/compare ~}}\n{{/unless}}",
        "queries_age_range": "\n{\n  \"bool\" : {\n    \"should\" : [\n\n    ]\n  }\n}\n",
        "queries_boolean": "{\n  \"exists\": {\n    \"field\": \"{{field}}\"\n  }\n}\n",
        "queries_bounding_box": "{{#ifAll bounds_ne_lat bounds_ne_lon bounds_sw_lat bounds_sw_lon}}\n{\n  \"geo_bounding_box\": {\n    \"geo_coords\": {\n      \"top_right\": {\n        \"lat\": {{bounds_ne_lat}},\n        \"lon\": {{bounds_ne_lon}}\n      },\n      \"bottom_left\": {\n        \"lat\": {{bounds_sw_lat}},\n        \"lon\": {{bounds_sw_lon}}\n      }\n    }\n  }\n},\n{{/ifAll}}\n{{>queries_do_nothing}}\n",
        "queries_date_range": "{\n  \"range\": {\n    \"{{field}}\": {\n      {{#if lte~}}\n      \"lte\": {{{stringify lte}}},\n      {{~/if}}\n      {{#if lt~}}\n      \"lt\": {{{stringify lt}}},\n      {{~/if}}\n      {{#if gte~}}\n      \"gte\": {{{stringify gte}}},\n      {{~/if}}\n      {{#if gt~}}\n      \"gt\": {{{stringify gt}}},\n      {{~/if}}\n      \"boost\": {{default boost 1.0}}\n    }\n  }\n}",
        "queries_do_nothing": "{\n  \"exists\": {\n    \"field\": \"title\"\n  }\n}",
        "queries_email_days": "{{#if @root.data.searches.items.[0] ~}}\n  {{~#with @root.data.searches.items.[0] ~}}\n    {{~#each (split \"sunday,monday,tuesday,wednesday,thursday,friday,saturday\" \",\")~}}\n      {{~#if (contains ../days (add @index 1))~}}\n        {{~ this ~}},\n      {{~/if~}}\n    {{~/each~}}\n  {{~/with~}}\n{{~/if}}\n",
        "queries_email_frequency": "{{#if @root.data.auth ~}}\n  {{#with @root.data.searches.items.[0].[0] ~}}\n    {{#>components_radio_button\n        id=\"daily\"\n        name=\"frequency\"\n        label=\"Daily\"\n        active=(compare days \"1234567\")~}}\n      {\n        \"url\": \"/update-email-preferences\",\n        \"method\": \"POST\",\n        \"successMessage\": \"You will now recieve an email every day if there are new opportunities matching your preferences\",\n        \"failureMessage\": \"Failed to update email frequency setting to daily\",\n        \"postBody\": {\n          {{~#each (split \"sunday,monday,tuesday,wednesday,thursday,friday,saturday\" \",\")~}}\n            \"{{this}}\": true\n            {{~#unless @last}},{{/unless~}}\n          {{~/each~}}\n        }\n      }\n    {{~/components_radio_button}}\n    {{#>components_radio_button\n        id=\"weekly\"\n        name=\"frequency\"\n        label=\"Weekly\"\n        active=(compare (length days) 1)~}}\n      {\n        \"url\": \"/update-email-preferences\",\n        \"method\": \"POST\",\n        \"successMessage\": \"You will now recieve an email every every {{momentFormat (moment (dateMath \"now+1d\") \"x\") \"dddd\"}} (starting tomorrow) if there are new opportunities matching your preferences\",\n        \"failureMessage\": \"Failed to update email frequency setting to weekly\",\n        \"postBody\": {\n          \"{{lowercase (momentFormat (moment (dateMath \"now+1d\") \"x\") \"dddd\")}}\": true\n        }\n      }\n    {{~/components_radio_button}}\n  {{else}}\n    <div class=\"mdc-form-field\">\n      <label>You don't have any saved searches</label>\n    </div>\n  {{/with}}\n{{/if ~}}\n\n",
        "queries_multi_field_boolean": "{\n  \"bool\" : {\n    \"should\" : [\n      {{#eachJoin this \",\"}}\n        {{#if this}}\n          {{stringify @key}} : {{this}}\n        {{/if}}\n      {{/each}}\n    ]\n  }\n}\n\n",
        "queries_number_range": "{\n  \"range\": {\n    \"{{field}}\": {\n      {{#if lte~}}\n      \"lte\": {{replace (trim lte) \",\" \"\"}},\n      {{~/if}}\n      {{#if lt~}}\n      \"lt\": {{replace (trim lt) \",\" \"\"}},\n      {{~/if}}\n      {{#if gte~}}\n      \"gte\": {{replace (trim gte) \",\" \"\"}},\n      {{~/if}}\n      {{#if gt~}}\n      \"gt\": {{replace (trim gt) \",\" \"\"}},\n      {{~/if}}\n      \"boost\": {{default boost 1.0}}\n    }\n  }\n}",
        "queries_opportunity_common_filters": "{{>queries_date_range field=\"date_last_modified\" gt=\"now-12M\"}},\n{{>queries_do_nothing}}",
        "queries_opportunity_search_filters_areas": "{\n  \"terms\": {\n    \"advertised_areas\": [\n      {{#each @root.data.location_data.la_results.aggregations.local_authority_areas.buckets ~}}\n        {{{stringify (replace (replace (replace key \" and \" \" & \") \"City of \" \"\") \" City\" \"\")}}}\n        {{#unless @last}},{{/unless}}\n      {{/each}}\n    ]\n  }\n},",
        "queries_opportunity_search_filters_home": "{{>queries_term field=\"volunteersearch_type_slugs\" term=\"home-based-volunteering\"}},",
        "queries_opportunity_search_filters_locations": "{{#ifAll location lat lng distance ~}}\n{\n  \"geo_distance\": {\n    \"distance\": \"{{default distance \"10\"}}mi\",\n    \"geo_coords\": {\n      \"lat\": {{lat}},\n      \"lon\": {{lng}}\n    }\n  }\n},\n{{/ifAll ~}}",
        "queries_opportunity_search_filters": "{{#if location ~}}\n{\n  \"bool\": {\n    \"should\": [\n      {{>queries_opportunity_search_filters_locations @root.request.params.query}}\n      {{>queries_opportunity_search_filters_areas @root.request.params.query}}\n      {{>queries_do_nothing}}\n    ],\n    \"minimum_should_match\": 2\n  }\n},\n{{/if ~}}\n{{#if volunteersearch_types ~}}\n{{>queries_terms field=\"volunteersearch_type_slugs\" terms=volunteersearch_types}},\n{{/if ~}}\n{{#if activities ~}}\n{{>queries_terms field=\"activities_slugs\" terms=activities}},\n{{/if ~}}\n{{#if themes ~}}\n{{>queries_terms field=\"themes_slugs\" terms=themes}},\n{{/if ~}}\n{{#if services ~}}\n{{>queries_terms field=\"volunteersearch_support_option_slugs\" terms=services}},\n{{/if ~}}\n{{#if age_groups ~}}\n{{>queries_terms field=\"volunteersearch_age_group_slugs\" terms=age_groups}},\n{{/if ~}}\n{{#if availability ~}}\n{{>queries_terms field=\"availability_slugs\" terms=availability}},\n{{/if ~}}\n{{#if @root.request.headers.widget-tsi ~}}\n{{>queries_term field=\"tsi_name_slug\" term=@root.request.headers.widget-tsi}},\n{{/if ~}}\n{{>queries_do_nothing}}",
        "queries_opportunity_search_must": "{{#if keywords ~}}\n{{>queries_query_string\n  querystring=keywords\n  fields=(split (concat \"text_bag_boost^\" @root.context.metaData.searchKnobs.textBagBoost \",text_bag\") \",\")\n}}\n{{/if ~}}",
        "queries_opportunity_search_should": "{\n  \"exists\": {\n    \"field\": \"geo_coords\",\n    \"boost\": {{{stringify @root.context.metaData.searchKnobs.geoCoordBoost}}}\n  }\n},\n{{>queries_do_nothing}}",
        "queries_organisation_common_filters": "{{#compare @root.request.params.query.view 'widget' ~}}\n{\n  \"match_all\": {}\n}\n{{else}}\n{\n  \"terms\": {\n    \"Id\": {{{stringify (map @root.data.organisationsWithOpportunities.opportunities.aggregations.organisations.buckets (getProp \"key\"))}}}\n  }\n}\n{{/compare ~}}",
        "queries_organisation_search_filters": "{{#ifAny regions location home_based ~}}\n{\n  \"bool\": {\n    \"should\": [\n      {{#if regions ~}}\n        {{>queries_terms field=\"region_group_slug\" terms=regions}},\n      {{/if ~}}\n      {{#ifAll location lat lng distance ~}}\n        {\n          \"geo_distance\": {\n            \"distance\": \"{{default distance \"10\"}}mi\",\n            \"geo_coords\": {\n              \"lat\": {{lat}},\n              \"lon\": {{lng}}\n            }\n          }\n        },\n      {{/ifAll ~}}\n      {{>queries_do_nothing}}\n    ],\n    \"minimum_should_match\": 2\n  }\n},\n{{/ifAny ~}}\n{{#if organisation_activities ~}}\n  {{>queries_terms field=\"main_activities_global_slugs\" terms=organisation_activities}},\n{{/if ~}}\n{{>queries_bounding_box}},\n{{#if @root.request.headers.widget-tsi ~}}\n{{>queries_term field=\"tsi_name_slug\" term=@root.request.headers.widget-tsi}},\n{{/if ~}}\n{{>queries_do_nothing}}\n",
        "queries_organisation_search_must_not": "{\n  \"prefix\": {\n    \"title\": \"ceased\"\n  }\n}",
        "queries_organisation_search_must": "{{#if keywords ~}}\n{{>queries_query_string\n  querystring=keywords\n  fields=(split \"text_bag_boost^5,text_bag\" \",\")\n}},\n{{/if ~}}\n{{>queries_do_nothing}}\n",
        "queries_organisation_search_should": "{\n  \"exists\": {\n    \"field\": \"goodhq_organisation.image_url\",\n    \"boost\": 1.5\n  }\n},\n{\n  \"exists\": {\n    \"field\": \"description\",\n    \"boost\": 0.5\n  }\n}",
        "queries_query_string": "{\n  \"query_string\": {\n    \"query\": {{{stringify querystring}}},\n    \"fields\": {{{stringify (arrayify fields)}}},\n    \"default_operator\": \"{{default operator \"AND\"}}\",\n    \"analyzer\": \"{{default analyzer \"snowball\"}}\"\n  }\n}",
        "queries_return_false": "{\n  \"exists\": {\n    \"field\": \"nosuchfield\"\n  }\n}\n",
        "queries_term": "{\n  \"term\": {\n    \"{{field}}\": {{{stringify term}}}\n  }\n}",
        "queries_terms": "{\n  \"terms\": {\n    \"{{field}}\": {{{stringify (arrayify terms)}}}\n  }\n}",
        "query_search": "{{if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null) \"\") \"\" else=\"?\"}}{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null}}}",
        "register_interest_faux_chip": "{{#if disabled ~}}\n<div title=\"You can't volunteer for this opportunity using this site\" class=\"mdc-chip mdc-chip--register-interest mdc-chip--disabled noselect\">\n  <span class=\"far fa-envelope mdc-chip__icon\" aria-hidden=\"true\"></span>\n  <span class=\"mdc-chip__text\">I want to volunteer</span>\n</div>\n{{else}}\n{{#unless (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) id) ~}}\n<a href=\"/register-interest/{{Id}}/{{title_slug}}\" class=\"mdc-chip mdc-chip--register-interest\">\n  <span class=\"far fa-hand-paper mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>\n  <span class=\"mdc-chip__text noselect hide-lg hide-md\">Volunteer</span>\n  <span class=\"mdc-chip__text noselect hide-sm\">I want to volunteer</span>\n</a>\n{{else}}\n<div class=\"mdc-chip mdc-chip--selected mdc-chip--register-interest\">\n  <span class=\"far fa-envelope mdc-chip__icon\" aria-hidden=\"true\"></span>\n  <span class=\"mdc-chip__text noselect\">Interest registered</span>\n</div>\n{{/unless ~}}\n{{/if ~}}",
        "search_button": "{{#unless @root.route.metaData.hideSearch ~}}\n<button class=\"mdc-top-app-bar__navigation-icon hide-lg mdc-typography--body1\" id=\"sidebar-button\" title=\"Search\">\n  <span class=\"far fa-fw fa-2x fa-search\"></span>\n  Filters\n</button>\n{{/unless ~}}",
        "search_info": "{{#if paging.totalResults ~}}\n<div class=\"search-info\">\n  <strong>\n    {{addCommas paging.totalResults}}\n  </strong>\n  {{#if (contains @root.route.name \"organisation_search\") ~}}\n  {{inflect paging.totalResults \"organisation\" \"organisations\"}}\n  {{#compare @root.request.params.query.view \"!==\" \"widget\" ~}}\n  with current volunteering opportunities\n  {{/compare ~}}\n  {{else}}\n  {{#if (contains @root.route.name \"volunteering_event_search\") ~}}\n  volunteering {{inflect paging.totalResults \"event\" \"events\"}}\n  {{else}}\n  volunteering {{inflect paging.totalResults \"opportunity\" \"opportunities\"}}\n  {{/if ~}}\n  {{/if ~}}\n  {{if @root.request.params.query.exclude \"(filtered)\"}}\n  {{#compare @root.route.name \"!==\" \"opportunity_map\" ~}}\n  {{#compare paging.totalResults \">\" 10 ~}} -\n  <span class=\"hide-sm\">showing</span>\n  page {{addCommas paging.currentPage}} of {{addCommas paging.totalPages}}\n  {{/compare ~}}\n  {{/compare ~}}\n  {{#if @root.request.params.query.exclude ~}}\n  <a href=\"{{#compare @root.request.params.query.view \"widget\"}}#{{/compare}}/search?{{{querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null}}}\">Show all</a>\n  {{/if ~}}\n</div>\n{{else}}\n{{#ifAny @root.request.params.query.keywords @root.request.params.query.location @root.request.params.query.activities @root.request.params.query.themes @root.request.params.query.organisation_activities @root.request.params.query.has_opportunities @root.request.params.query.volunteersearch_types @root.request.params.query.age_groups @root.request.params.query.services ~}}\n<div class=\"search-info\">\n  No results could be found, please try a different search query\n  {{#compare @root.route.name \"opportunities_in\" ~}}\n  or <a href=\"/search{{> query_search}}\">search across all areas</a>\n  {{/compare ~}}\n</div>\n{{/ifAny ~}}\n{{/if ~}}",
        "share_register_interest": "<div class=\"\">Thanks</div>\n\n<a class=\"resp-sharing-button__link noext\" href=\"https://facebook.com/sharer/sharer.php?u=http%3A%2F%2Fsharingbuttons.io\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Facebook\">\n  <div class=\"resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large\"><div aria-hidden=\"true\" class=\"resp-sharing-button__icon resp-sharing-button__icon--solid\">\n  </div><span class=\"fab fa-facebook resp-sharing-logo\" aria-label=\"Menu\"></span> Share on Facebook</div>\n</a>\n\n<a class=\"resp-sharing-button__link noext\" href=\"https://twitter.com/intent/tweet/?text={{> social_link_text}}\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Twitter\">\n  <span class=\"fab fa-3x fa-twitter \" aria-label=\"Share on Twitter\"></span><span class=\"\" Share on Twitter</div>\n</a>",
        "social_link_text": "{{encodeURI (concat \"I'm volunteering as \" opportunity.title \" with \" opportunity.organisation_name \"! Find out more on Volunteer Scotland.\n\" opportunity.url)}}",
        "social_links": "<div class=\"mdc-typography--body1\">Let other people know about this opportunity using social media:</div>\n\n<div class=\"mdc-card__share\">\n  <a class=\"resp-sharing-button resp-sharing-button--facebook mdc-button mdc-button--raised noext\" href=\"https://facebook.com/sharer/sharer.php?display=popup&u={{opportunity.url}}\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Facebook\">\n    <span class=\"fab fa-facebook resp-sharing-logo mdc-list-item__graphic\" aria-label=\"Share on Facebook\"></span> Share on Facebook\n  </a>\n\n  <a class=\"resp-sharing-button resp-sharing-button--twitter mdc-button mdc-button--raised noext\" href=\"https://twitter.com/intent/tweet/?text={{> social_link_text opportunity=opportunity}}\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Twitter\">\n    <span class=\"fab fa-twitter resp-sharing-logo mdc-list-item__graphic\" aria-label=\"Share on Twitter\"></span> Share on Twitter\n  </a>\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n\n$('.resp-sharing-button').click(function(e) {\ne.preventDefault();\nwindow.open($(this).attr('href'), 'fbShareWindow', 'height=450, width=550, top=' + ($(window).height() / 2 - 275) + ', left=' + ($(window).width() / 2 - 225) + ', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0');\nreturn false;\n});\n});\n</script>",
        "terms_maps": "{\n  {{#each @root.context.metaData.terms}}\n    \"{{key}}\": {\n    \"slugsMap\" : {\n    {{#each termGroups}}\n      {{#each terms}}\n        \"{{key}}\" : {\n        \"term\": \"{{{label}}}\"\n        } {{#unless @last}},{{/unless}}\n      {{/each}} {{#unless @last}},{{/unless}}\n    {{/each}}\n    }\n  }\n  {{#unless @last}},{{/unless}}\n  {{/each}}\n}\n",
        "widget_opportunity_search_form": "<h3 class=\"h-padding-full v-margin\">Search for volunteering opportunities</h3>\n<form action=\"/{{#compare @root.request.url.pathname \"/map\"}}map{{else}}search{{/compare}}?view=widget\" method=\"GET\" data-component=\"AjaxForm\" data-AjaxForm='{{#json}}\n      {{#json key=\"onSuccessRules\"}}\n        {{#json key=\"contents\"}}\n          {{{json key=\"#volopps-main\" value=\"{{{response}}}\"}}}\n        {{/json}}\n      {{/json}}\n    {{/json}}'>\n  <div class=\"mdl-grid\">\n    {{#each (filter @root.context.metaData.terms \"noSearchFilter\" \"===\" undefined) ~}}\n      <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--4-col-tablet mdl-cell--4-col-desktop\">\n        <div class=\"multi-select\" data-component=\"MultiSelect\" data-MultiSelect='{ \"selectedListLimit\": 4, \"selectedListLabel\": \"Selected\" }'>\n          <div class=\"mdl-badge mdl-badge--overlap multi-select-count\" data-badge=\"0\"></div>\n          <button type=\"button\" id=\"multi-{{key}}\" class=\"mdl-button mdl-js-button full-width\">\n            {{{label}}}\n          </button>\n          <ul class=\"mdl-menu mdl-js-menu\" for=\"multi-{{key}}\">\n            {{#each termGroups ~}}\n              {{#unless (compare label \"Other\") ~}}\n              <li class=\"mdl-list__item\">\n                <strong>{{{label}}}</strong>\n              </li>\n              {{/unless ~}}\n              {{#each terms ~}}\n                <li class=\"mdl-list__item mdl-js-ripple-effect\" for=\"volopps-{{../../key}}_{{key}}\">\n                  <span class=\"mdl-list__item-primary-content\">\n                    {{{label}}}\n                  </span>\n                  <span class=\"mdl-list__item-secondary-action\">\n                    <label class=\"mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect\" for=\"volopps-{{../../key}}_{{key}}\">\n                      <input type=\"checkbox\" name=\"{{../../key}}\" id=\"volopps-{{../../key}}_{{key}}\" class=\"mdl-checkbox__input\" value=\"{{key}}\"{{#if (contains (getProperty @root.request.params.query ../../key) key)}} checked{{/if}} />\n                    </label>\n                  </span>\n                </li>\n              {{/each ~}}\n            {{/each ~}}\n          </ul>\n        </div>\n      </div>\n    {{/each ~}}\n  </div>\n  <div class=\"mdl-grid\">\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--5-col-tablet mdl-cell--4-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width\n        {{~#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}} typeahead-locked{{/ifAll~}}\"\n          data-component=\"Typeahead\" data-Typeahead='{\n              \"typeaheadOptions\": {\n                \"highlight\": 2,\n                \"minLength\": 3\n              },\n              \"itemSelectedRules\": {\n                \"addClasses\": {\n                  \">\": [\n                    \"typeahead-locked\"\n                  ]\n                },\n                \"focus\": \"#volopps-distance\",\n                \"run\": [\n                  \"console.log(\\\"Location\\\", this.suggestion);\\n\"\n                ],\n                \"attributes\": {\n                  \"#volopps-lat\": {\n                    \"value\": \"\\{{suggestion.point.lat}}\"\n                  },\n                  \"#volopps-lng\": {\n                    \"value\": \"\\{{suggestion.point.lon}}\"\n                  },\n                  \">input\": {\n                    \"readonly\": \"readonly\"\n                  }\n                }\n              },\n              \"nothingSelectedRules\": {\n                \"run\": [\n                  \"$(`#volopps-location`).typeahead(`val`, ``)\",\n                  \"console.log(\\\"Location cleared\\\");\\n\"\n                ],\n                \"attributes\": {\n                  \"#volopps-lat\": {\n                    \"value\": \"\"\n                  },\n                  \"#volopps-lng\": {\n                    \"value\": \"\"\n                  },\n                  \"#volopps-location\": {\n                    \"readonly\": null\n                  }\n                },\n                \"removeClasses\": {\n                  \">\": [\n                    \"typeahead-locked\"\n                  ]\n                }\n              },\n              \"datasets\": [\n                {\n                  \"name\": \"geo_lookup\",\n                  \"display\": \"display\",\n                  \"bloodhound\": {\n                    \"datumTokenizer\": \"objWhitespace\",\n                    \"datumTokenizerField\": \"place\",\n                    \"queryTokenizer\": \"whitespace\",\n                    \"remote\": {\n                      \"url\": \"https://{{#compare @root.request.url.hostname \"volunteerscotland-search.local\"}}volunteerscotland-search.local:8080{{else}}search.volunteerscotland.net{{/compare}}/geo-lookup?q=*\",\n                      \"wildcard\": \"*\"\n                    }\n                  }\n                }\n              ],\n              \"clearIfNothingSelected\": true\n            }'>\n        <button type=\"button\" class=\"mdl-button mdl-js-button mdl-button--icon typeahead-lock\"\n            data-component=\"DomManipulatorTrigger\" data-DomManipulatorTrigger='{\n                \"click\": {\n                  \"attributes\": {\n                    \"#volopps-lat\": {\n                      \"value\": null\n                    },\n                    \"#volopps-lng\": {\n                      \"value\": null\n                    },\n                    \"#volopps-location\": {\n                      \"readonly\": null\n                    }\n                  },\n                  \"removeClasses\": {\n                    \"<\": [\n                      \"typeahead-locked\"\n                    ]\n                  },\n                  \"run\": [\n                    \"$(`#volopps-location`).typeahead(`val`, ``)\"\n                  ],\n                  \"focus\": \"#volopps-location\"\n                }\n              }'>\n          <span class=\"material-icons\">clear</span>\n        </button>\n        <input class=\"mdl-textfield__input\" type=\"text\" name=\"location\" id=\"volopps-location\" value=\"{{@root.request.params.query.location}}\"\n          {{#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}}readonly=\"readonly\"{{/ifAll}}>\n        <label class=\"mdl-textfield__label\" for=\"volopps-location\">Location</label>\n      </div>\n    </div>\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--3-col-tablet mdl-cell--2-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n        <select class=\"mdl-textfield__input\" id=\"volopps-distance\" name=\"distance\">\n          {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n          <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n          {{/each}}\n        </select>\n        <label class=\"mdl-textfield__label\" for=\"volopps-distance\">Distance</label>\n      </div>\n    </div>\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--6-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width\"\n          data-component=\"Typeahead\" data-Typeahead='{{#json}}\n            {{#json key=\"typeaheadOptions\"}}\n              {{{json key=\"highlight\" value=2}}},\n              {{{json key=\"minLength\" value=0}}}\n            {{/json}},\n            {{#json key=\"itemSelectedRules\"}}\n              {{#json key=\"run\" type=\"array\"}}\n                {{#json type=\"string\"}}\n                  $(\"#volopps-\" + this.dataset.name + \"_\" + this.suggestion.value).parent().trigger(\"click\")\n                {{/json}},\n                {{#json type=\"string\"}}\n                  this.instance.textbox.typeahead(\"val\", \"\").typeahead(\"close\")\n                {{/json}}\n              {{/json}}\n            {{/json}},\n            {{#json key=\"datasets\" type=\"array\"}}\n              {{#each @root.context.metaData.terms}}\n                {{#each termGroups}}\n                  {{#json}}\n                    {{{json key=\"name\" value=../key}}},\n                    {{#json key=\"templates\"}}\n                      {{#compare (length ../termGroups) 1}}\n                        {{#json key=\"header\" type=\"string\"}}\n                          <h3>{{{../label}}}</h3>\n                        {{/json}}\n                      {{else}}\n                        {{#json key=\"header\" type=\"string\"}}\n                          <h3>{{{../label}}} &gt; {{{label}}}</h3>\n                        {{/json}}\n                      {{/compare}}\n                    {{/json}},\n                    {{{json key=\"display\" value=\"label\"}}},\n                    {{#json key=\"bloodhound\"}}\n                      {{{json key=\"datumTokenizer\" value=\"objWhitespace\"}}},\n                      {{{json key=\"datumTokenizerField\" value=\"label\"}}},\n                      {{{json key=\"queryTokenizer\" value=\"whitespace\"}}},\n                      {{#json key=\"local\" type=\"array\"}}\n                        {{#each terms}}\n                          {{#json}}\n                            \"label\": {{{stringify label}}},\n                            \"value\": {{{stringify key}}},\n                            \"other\": {{{stringify (concat ../key ' ' textBag)}}}\n                          {{/json}},\n                        {{/each}}\n                      {{/json}}\n                    {{/json}}\n                  {{/json}},\n                {{/each}}\n              {{/each}}\n            {{/json}},\n            {{{json key=\"clearIfNothingSelected\" value=true}}}\n          {{/json}}'>\n        <input class=\"mdl-textfield__input full-width\" type=\"text\" name=\"keywords\" id=\"volopps-keywords\" value=\"{{@root.request.params.query.keywords}}\">\n        <label class=\"mdl-textfield__label\" for=\"volopps-keywords\">Keywords</label>\n      </div>\n    </div>\n  </div>\n  <div style=\"text-align: right;\" class=\"h-padding-full\">\n    <input type=\"hidden\" name=\"lat\" id=\"volopps-lat\" value=\"{{@root.request.params.query.lat}}\">\n    <input type=\"hidden\" name=\"lng\" id=\"volopps-lng\" value=\"{{@root.request.params.query.lng}}\">\n    <button type=\"submit\" class=\"mdl-button mdl-button--colored\">\n      Search\n      <span class=\"material-icons icon-right\" aria-hidden=\"true\">search</span>\n    </button>\n  </div>\n</form>",
        "widget_organisation_search_form": "<h3 class=\"h-padding-full v-margin\">Search for organisations</h3>\n<form action=\"/{{#compare @root.request.url.pathname \"/organisations/map\"}}organisations-all/map{{else}}organisations-all/search{{/compare}}?view=widget\" method=\"GET\" data-component=\"AjaxForm\" data-AjaxForm='{{#json}}\n      {{#json key=\"onSuccessRules\"}}\n        {{#json key=\"contents\"}}\n          {{{json key=\"#volorgs-main\" value=\"{{{response}}}\"}}}\n        {{/json}}\n      {{/json}}\n    {{/json}}'>\n  <div class=\"mdl-grid\">\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--4-col-tablet mdl-cell--4-col-desktop\">\n      <div class=\"multi-select\" data-component=\"MultiSelect\" data-MultiSelect='{ \"selectedListLimit\": 4, \"selectedListLabel\": \"Selected\" }'>\n        <div class=\"mdl-badge mdl-badge--overlap multi-select-count\" data-badge=\"0\"></div>\n        <button type=\"button\" id=\"multi-activities\" class=\"mdl-button mdl-js-button full-width\">\n          Activities\n        </button>\n        <ul class=\"mdl-menu mdl-js-menu\" for=\"multi-activities\">\n          {{#each @root.data.organisationSupplimentary.types.aggregations.organisation_activities_slugs.buckets ~}}\n            <li class=\"mdl-list__item mdl-js-ripple-effect\" for=\"volorgs-organisation_activities_{{key}}\">\n              <span class=\"mdl-list__item-primary-content\">\n                {{{getProperty (lookup @root.data.organisationSupplimentary.types.aggregations.organisation_activities.buckets @index) \"key\"}}}\n              </span>\n              <span class=\"mdl-list__item-secondary-action\">\n                <label class=\"mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect\" for=\"volorgs-organisation_activities_{{key}}\">\n                  <input type=\"checkbox\" name=\"organisation_activities\" id=\"volorgs-organisation_activities_{{key}}\" class=\"mdl-checkbox__input\" value=\"{{key}}\"{{#if (contains @root.request.params.query.organisation_activities key)}} checked{{/if}} />\n                </label>\n              </span>\n            </li>\n          {{/each ~}}\n        </ul>\n      </div>\n    </div>\n  </div>\n  <div class=\"mdl-grid\">\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--6-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width\"\n          data-component=\"Typeahead\" data-Typeahead='{{#json}}\n            {{#json key=\"typeaheadOptions\"}}\n              {{{json key=\"highlight\" value=2}}},\n              {{{json key=\"minLength\" value=0}}}\n            {{/json}},\n            {{#json key=\"itemSelectedRules\"}}\n              {{#json key=\"run\" type=\"array\"}}\n                {{#json type=\"string\"}}\n                  $(\"#volorgs-\" + this.dataset.name + \"_\" + this.suggestion.value).parent().trigger(\"click\")\n                {{/json}},\n                {{#json type=\"string\"}}\n                  this.instance.textbox.typeahead(\"val\", \"\").typeahead(\"close\")\n                {{/json}}\n              {{/json}}\n            {{/json}},\n            {{#json key=\"datasets\" type=\"array\"}}\n              {{#json}}\n                {{{json key=\"name\" value=\"organisation_activities\"}}},\n                {{#json key=\"templates\"}}\n                  {{#json key=\"header\" type=\"string\"}}\n                    <h3>Activities</h3>\n                  {{/json}}\n                {{/json}},\n                {{{json key=\"display\" value=\"label\"}}},\n                {{#json key=\"bloodhound\"}}\n                  {{{json key=\"datumTokenizer\" value=\"objWhitespace\"}}},\n                  {{{json key=\"datumTokenizerField\" value=\"label\"}}},\n                  {{{json key=\"queryTokenizer\" value=\"whitespace\"}}},\n                  {{#json key=\"local\" type=\"array\"}}\n                    {{#each @root.data.organisationSupplimentary.types.aggregations.organisation_activities_slugs.buckets}}\n                      {{#json}}\n                        \"label\": {{{stringify (getProperty (lookup (getProperty @root.data.organisationSupplimentary.types.aggregations \"organisation_activities.buckets\") @index) \"key\")}}},\n                        \"value\": {{{stringify key}}}\n                      {{/json}},\n                    {{/each}}\n                  {{/json}}\n                {{/json}}\n              {{/json}},\n            {{/json}},\n            {{{json key=\"clearIfNothingSelected\" value=true}}}\n          {{/json}}'>\n        <input class=\"mdl-textfield__input full-width\" type=\"text\" name=\"keywords\" id=\"volorgs-keywords\" value=\"{{@root.request.params.query.keywords}}\">\n        <label class=\"mdl-textfield__label\" for=\"volorgs-keywords\">Keywords</label>\n      </div>\n    </div>\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--5-col-tablet mdl-cell--4-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label full-width\n        {{~#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}} typeahead-locked{{/ifAll~}}\"\n          data-component=\"Typeahead\" data-Typeahead='{\n              \"typeaheadOptions\": {\n                \"highlight\": 2,\n                \"minLength\": 3\n              },\n              \"itemSelectedRules\": {\n                \"addClasses\": {\n                  \">\": [\n                    \"typeahead-locked\"\n                  ]\n                },\n                \"focus\": \"#volorgs-distance\",\n                \"run\": [\n                  \"console.log(\\\"Location\\\", this.suggestion);\\n\"\n                ],\n                \"attributes\": {\n                  \"#volorgs-lat\": {\n                    \"value\": \"\\{{suggestion.point.lat}}\"\n                  },\n                  \"#volorgs-lng\": {\n                    \"value\": \"\\{{suggestion.point.lon}}\"\n                  },\n                  \">input\": {\n                    \"readonly\": \"readonly\"\n                  }\n                }\n              },\n              \"nothingSelectedRules\": {\n                \"run\": [\n                  \"$(`#volorgs-location`).typeahead(`val`, ``)\",\n                  \"console.log(\\\"Location cleared\\\");\\n\"\n                ],\n                \"attributes\": {\n                  \"#volorgs-lat\": {\n                    \"value\": \"\"\n                  },\n                  \"#volorgs-lng\": {\n                    \"value\": \"\"\n                  },\n                  \"#volorgs-location\": {\n                    \"readonly\": null\n                  }\n                },\n                \"removeClasses\": {\n                  \">\": [\n                    \"typeahead-locked\"\n                  ]\n                }\n              },\n              \"datasets\": [\n                {\n                  \"name\": \"geo_lookup\",\n                  \"display\": \"display\",\n                  \"bloodhound\": {\n                    \"datumTokenizer\": \"objWhitespace\",\n                    \"datumTokenizerField\": \"place\",\n                    \"queryTokenizer\": \"whitespace\",\n                    \"remote\": {\n                      \"url\": \"https://{{#compare @root.request.url.hostname \"volunteerscotland-search.local\"}}volunteerscotland-search.local:8080{{else}}search.volunteerscotland.net{{/compare}}/geo-lookup?q=*\",\n                      \"wildcard\": \"*\"\n                    }\n                  }\n                }\n              ],\n              \"clearIfNothingSelected\": true\n            }'>\n        <button type=\"button\" class=\"mdl-button mdl-js-button mdl-button--icon typeahead-lock\"\n            data-component=\"DomManipulatorTrigger\" data-DomManipulatorTrigger='{\n                \"click\": {\n                  \"attributes\": {\n                    \"#volorgs-lat\": {\n                      \"value\": null\n                    },\n                    \"#volorgs-lng\": {\n                      \"value\": null\n                    },\n                    \"#volorgs-location\": {\n                      \"readonly\": null\n                    }\n                  },\n                  \"removeClasses\": {\n                    \"<\": [\n                      \"typeahead-locked\"\n                    ]\n                  },\n                  \"run\": [\n                    \"$(`#volorgs-location`).typeahead(`val`, ``)\"\n                  ],\n                  \"focus\": \"#volorgs-location\"\n                }\n              }'>\n          <span class=\"material-icons\">clear</span>\n        </button>\n        <input class=\"mdl-textfield__input\" type=\"text\" name=\"location\" id=\"volorgs-location\" value=\"{{@root.request.params.query.location}}\"\n          {{#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}}readonly=\"readonly\"{{/ifAll}}>\n        <label class=\"mdl-textfield__label\" for=\"volorgs-location\">Location</label>\n      </div>\n    </div>\n    <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--3-col-tablet mdl-cell--2-col-desktop\">\n      <div class=\"mdl-textfield mdl-js-textfield mdl-textfield--floating-label\">\n        <select class=\"mdl-textfield__input\" id=\"volorgs-distance\" name=\"distance\">\n          {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n          <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n          {{/each}}\n        </select>\n        <label class=\"mdl-textfield__label\" for=\"volorgs-distance\">Distance</label>\n      </div>\n    </div>\n  </div>\n  <div style=\"text-align: right;\" class=\"h-padding-full\">\n    <input type=\"hidden\" name=\"lat\" id=\"volorgs-lat\" value=\"{{@root.request.params.query.lat}}\">\n    <input type=\"hidden\" name=\"lng\" id=\"volorgs-lng\" value=\"{{@root.request.params.query.lng}}\">\n    <button type=\"submit\" class=\"mdl-button mdl-button--colored\">\n      Search\n      <span class=\"material-icons icon-right\" aria-hidden=\"true\">search</span>\n    </button>\n  </div>\n</form>",
        "widget_style": "<style type=\"text/css\">\n.scvo-widget .mdc-list-divider {\n  display: none;\n}\n.scvo-widget a {\n  text-decoration: none;\n  color: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget a:hover {\n  text-decoration: underline;\n}\n.scvo-widget a.mdl-button:hover,\n.scvo-widget .pagination a:hover,\n.scvo-widget a.mdl-tabs__tab:hover,\n.scvo-widget .leaflet-control a:hover {\n  text-decoration: none;\n}\n.scvo-widget .map-results {\n  width: 100%;\n  height: 600px;\n  z-index: 0;\n}\n.scvo-widget .map-info.post-title {\n  margin: 0;\n}\n.scvo-widget .post-info-extra {\n  font-size: 0.9rem;\n}\n.scvo-widget .mdl-button .material-icons.icon-left {\n  margin-right: 8px;\n}\n.scvo-widget .mdl-button .material-icons.icon-right {\n  margin-left: 16px;\n}\n.scvo-widget h2,\n.scvo-widget h3,\n.scvo-widget h4,\n.scvo-widget h5,\n.scvo-widget h6 {\n  font-family: inherit;\n  line-height: inherit;\n  font-weight: 400;\n}\n.scvo-widget h2 {\n  font-size: 1.6rem;\n}\n.scvo-widget h3 {\n  font-size: 1.4rem;\n}\n.scvo-widget h4 {\n  font-size: 1.2rem;\n}\n.scvo-widget .mdl-button {\n  font-family: inherit;\n  font-weight: 700;\n  background: rgba(0,0,0,0.05);\n}\n.scvo-widget .mdl-button.mdl-button--icon {\n  background: transparent;\n}\n.scvo-widget .mdl-badge[data-badge]:after,\n.scvo-widget .mdl-button--colored {\n  color: white !important;\n  background: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget .mdl-button--colored:hover,\n.scvo-widget .mdl-button--colored:focus:not(:active) {\n  /* background: #00717c; */\n  background: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget .register-interest.mdl-button--colored {\n  background: #009ddc;\n}\n.scvo-widget .register-interest.mdl-button--colored:hover,\n.scvo-widget .register-interest.mdl-button--colored:focus:not(:active) {\n  background: #0079c1;\n}\n.scvo-widget .mdc-card__info--search-distance {\n  color: rgb(64, 64, 65);\n  opacity: 0.8;\n  margin-top: 0 !important;\n}\n.scvo-widget .mdc-card__info--search-distance ul {\n  margin-top: 0;\n}\n.scvo-widget .mdc-card__info--search-distance .material-icons {\n  vertical-align: text-bottom;\n}\n.scvo-widget .mdc-card__info--content-primary {\n  width: 100%;\n}\n.scvo-widget .mdc-card__info--content-secondary-title {\n  margin: 0;\n}\n.scvo-widget .volorgs-main .mdl-grid.results-list {\n  margin-left: -16px;\n  margin-right: -16px;\n}\n.scvo-widget p,\n.scvo-widget ul,\n.scvo-widget li,\n.scvo-widget div,\n.scvo-widget label,\n.scvo-widget input,\n.scvo-widget select,\n.scvo-widget .mdl-tabs__tab,\n.scvo-widget .mdl-list__item,\n.scvo-widget .mdl-textfield__label,\n.scvo-widget .mdl-textfield__input,\n.scvo-widget .mdc-typography--body1 {\n  font-family: inherit;\n  font-weight: 400;\n  font-size: 1rem;\n}\n.scvo-widget ul {\n  margin-bottom: 0;\n}\n.scvo-widget hr {\n  min-width: 100%;\n  background-image: none;\n}\n.scvo-widget .mdl-textfield__label {\n  color: rgba(0, 0, 0, 0.6);\n}\n.scvo-widget .multi-select .mdl-list__item:hover {\n  background: transparent;\n}\n.scvo-widget .multi-select .mdl-list__item.mdl-js-ripple-effect:hover {\n  background: #eaeaea;\n}\n.scvo-widget .mdl-button {\n  font-size: 1rem;\n}\n.scvo-widget .areas .area {\n  display: inline;\n}\n.scvo-widget .areas .area::after {\n  content: \", \";\n}\n.scvo-widget .areas-fulltext .area:first-child::before {\n  content: \" across \";\n}\n.scvo-widget .areas-fulltext .area:last-child::after {\n  content: \", and \";\n}\n.scvo-widget .areas-fulltext .area:only-child::after {\n  content: \" and \";\n}\n.scvo-widget .areas .area:last-child::after {\n  content: \"\";\n}\n.scvo-widget .content-primary .mdc-card__media,\n.scvo-widget .content-secondary .mdc-card__media {\n  max-width: 20%;\n  margin-left: 1rem;\n}\n.scvo-widget .content-secondary .mdc-card__media {\n  float: right;\n}\n.scvo-widget .content-primary .mdc-card__media img,\n.scvo-widget .content-secondary .mdc-card__media img {\n  max-width: 100%;\n}\n.scvo-widget .content-primary ul {\n  margin: 0;\n}\n.scvo-widget .mdc-card__info--content-primary-title {\n  margin: 0.75rem 0 0.5rem;\n}\n.scvo-widget .key-info-extra ul,\n.scvo-widget .mdc-card__info--content-primary ul {\n  padding-left: 0;\n  margin-left: 0 !important;\n}\n.scvo-widget .key-info-extra li,\n.scvo-widget .mdc-card__info--content-primary li {\n  list-style-type: none;\n}\n.scvo-widget .mdl-card__supporting-text {\n  padding-top: 0;\n  width: 100%;\n  box-sizing: border-box;\n}\n.scvo-widget body,\n.scvo-widget .mdl-card__title-text,\n.scvo-widget .mdl-card__subtitle-text,\n.scvo-widget .mdl-card__supporting-text {\n  color: #000;\n}\n.scvo-widget .mdl-card {\n  min-height: 1px;\n  background: #f5f5f5;\n}\n.scvo-widget .mdc-card {\n  padding: 0 !important;\n}\n.scvo-widget .colorwells .mdc-text-field:not(.mdc-text-field--disabled):not(.mdc-text-field--outlined) {\n  border: none !important;\n}\n.scvo-widget .mdc-card__info--content-primary ul.organisation li {\n  font-weight: 700;\n}\n.scvo-widget .mdc-card__info--content-primary ul:last-child {\n  margin-bottom: 0.75rem;\n}\n.scvo-widget .content-primary.full .mdc-card__info--content-primary-row,\n.scvo-widget .content-secondary.full .mdc-card__info--content-secondary-row {\n  padding-top: 1rem !important;\n  border-top: 2px solid {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget .mdl-checkbox.is-checked .mdl-checkbox__box-outline,\n.scvo-widget .mdl-checkbox.is-checked.is-disabled .mdl-checkbox__box-outline {\n  border-color: {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget .mdl-checkbox.is-checked .mdl-checkbox__tick-outline,\n.scvo-widget .mdl-checkbox.is-checked.is-disabled .mdl-checkbox__tick-outline,\n.scvo-widget fieldset[disabled] .mdl-checkbox.is-checked .mdl-checkbox__tick-outline {\n  background: {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget table.table-condensed {\n  width: 100%;\n  border-collapse: collapse;\n}\n.scvo-widget table.table-condensed thead th,\n.scvo-widget table.table-condensed thead td,\n.scvo-widget table.table-condensed tbody th,\n.scvo-widget table.table-condensed tbody td {\n  vertical-align: top;\n  border-top: 1px solid #ddd;\n  line-height: 2rem;\n}\n.scvo-widget table.table-condensed thead th {\n  vertical-align: bottom;\n  border-bottom: 2px solid #ddd;\n  border-top: none;\n  width: 12.5%;\n}\n.scvo-widget table.table-condensed th p {\n  font-weight: 700;\n  margin-bottom: 0;\n}\n.scvo-widget table.table-condensed td {\n  text-align: center;\n}\n.scvo-widget .mdl-checkbox.is-upgraded {\n  padding-left: 16px;\n}\n@media screen and (max-width: 768px) {\n  .scvo-widget table.table-condensed {\n    margin-bottom: 0;\n    border-top: 0;\n    width: 100%;\n  }\n  .scvo-widget table.table-condensed thead,\n  .scvo-widget table.table-condensed tbody {\n    float: left;\n  }\n  .scvo-widget table.table-condensed thead {\n    width: 20%;\n  }\n  .scvo-widget table.table-condensed thead tr {\n    width: 100%;\n    margin-top: 7px;\n  }\n  .scvo-widget table.table-condensed thead tr th {\n    font-size: 1rem;\n    text-align: left;\n    border-width: 0;\n    height: 40px;\n  }\n  .scvo-widget table.table-condensed thead tr th p {\n    padding: 0.1rem 0;\n  }\n  .scvo-widget table.table-condensed thead tr th:last-child {\n    border-bottom: none;\n  }\n  .scvo-widget table.table-condensed tbody {\n    width: 80%;\n  }\n  .scvo-widget table.table-condensed tbody tr {\n    width: 33.33%;\n  }\n  .scvo-widget table.table-condensed tbody tr th {\n    height: 42px;\n    text-align: center;\n    border-top: none;\n  }\n  .scvo-widget table.table-condensed tbody tr td {\n    height: 41px;\n    text-align: center;\n  }\n  .scvo-widget table.table-condensed tr {\n    display: block;\n    float: left;\n  }\n  .scvo-widget table.table-condensed th,\n  .scvo-widget table.table-condensed td {\n    display: block;\n  }\n}\n.scvo-widget .mdl-checkbox {\n  width: 16px;\n  display: inline-block;\n}\n.scvo-widget .mdl-tabs__tab-bar {\n  border-bottom: 2px solid {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget .mdl-njs-tabs .mdl-tabs__tab {\n  font-size: 1.1rem;\n  color: {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget .mdl-njs-tabs .mdl-tabs__tab:hover {\n  /* color: #27561f; */\n}\n.scvo-widget .mdl-njs-tabs .mdl-tabs__tab.is-active:hover {\n  color: white;\n  /* background: #27561f; */\n}\n.scvo-widget .mdl-njs-tabs .mdl-tabs__tab.is-active {\n  color: white;\n  background: {{default @root.request.headers.widget-color-secondary \"#387c2c\"}};\n}\n.scvo-widget .mdl-njs-tabs a.is-active {\n  border-bottom: none;\n}\n.scvo-widget .mdl-tabs__tab {\n  text-transform: none;\n}\n.scvo-widget .mdl-tabs__tab .material-icons {\n  vertical-align: text-top;\n}\n.scvo-widget .pagination {\n  text-align: center;\n  display: block !important;\n  padding: 1rem 0 2rem;\n}\n.scvo-widget .pagination li {\n  display: inline-block;\n  padding: 0 !important;\n  height: 2.5rem;\n  width: 2.5rem;\n  border-radius: 50%;\n  margin: 0 .2rem;\n  vertical-align: bottom;\n}\n.scvo-widget .pagination li a {\n  font-size: 1.2rem;\n  line-height: 2.5rem;\n  height: 2.5rem;\n  width: 2.5rem;\n  padding: 0;\n  margin: 0;\n  font-weight: 400;\n  display: block;\n  color: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget .pagination li a.pagination-arrow {\n  vertical-align: middle;\n  color: #000;\n}\n.scvo-widget .pagination li a.pagination-arrow .material-icons {\n  line-height: 2.3rem;\n}\n.scvo-widget .pagination li.disabled a.pagination-arrow {\n  cursor: default;\n  pointer-events: none;\n  opacity: 0.9;\n  color: #999;\n}\n.scvo-widget .pagination li:first-child a {\n  padding-left: 0;\n}\n.scvo-widget .pagination li:last-child a {\n  padding-right: 0;\n}\n.scvo-widget .pagination li.current-page {\n  border-radius: 50%;\n  background: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget .pagination li.current-page a {\n  color: #fff;\n}\n.scvo-widget .pagination li:hover a,\n.scvo-widget .pagination li.current-page:hover a {\n  border-radius: 50%;\n  text-decoration: none;\n  color: #fff;\n  /* background: #00717c; */\n  background: {{default @root.request.headers.widget-color-primary \"#00a0af\"}};\n}\n.scvo-widget .pagination li.disabled:hover a {\n  background: inherit !important;\n}\n.scvo-widget .tt-dataset h3,\n.scvo-widget .tt-dataset .tt-selectable {\n  cursor: default;\n}\n.scvo-widget .faded-overflow {\n  overflow: hidden;\n  position: relative;\n  min-height: 2rem;\n}\n.scvo-widget .faded-overflow::before {\n  display: block;\n  margin-top: -1.5rem;\n  height: 1.5rem;\n  width: 100%;\n  content: \"\";\n  position: absolute;\n  top: 100%;\n  background: linear-gradient(rgba(245, 245, 245, 0), rgb(245, 245, 245));\n}\n.scvo-widget .leaflet-popup-content .faded-overflow::before {\n  background: linear-gradient(rgba(255, 255, 255, 0), rgb(255, 255, 255));\n}\n</style>"
      },
      "templates": {
        "account_account-foot": "<script src=\"{{~>asset_url url='downloader.js'~}}\"></script>\n<script>\n\n\n  function stopAllNewsletters(event) {\n    var redirectDone = false;\n    event.preventDefault();\n    var subs = {{{default (stringify @root.data.user-newsletter-subscriptions) []}}};\n    $.ajax({\n        type: \"GET\",\n        url: \"/remove-newsletter-subscription/\" + subs.join(),\n      })\n    $( \".nl-link-block\" ).text(\"Unsubscribed\");\n  }\n\n  function exportUserData() {\n    var dataUrl = 'data:application/json;base64,{{{btoa @root.data.export_user_data}}}';\n    download(dataUrl, 'user-export.json', 'application/json');\n  };\n  $(document).ready(function() {\n    var $changePassword = $('#change-password');\n    var $password1 = $('#change-password-password');\n    var $password2 = $('#change-password-confirm');\n\n    $('[data-provider-link]').each(function(i, o) {\n      var $chip = $(o);\n      var $linkAction = $chip.find('.link-action');\n      var chip = new mdc.chips.MDCChip(o);\n      var providerName = $chip.data('provider-link');\n\n      $chip.on('click', function(evt) {\n        if (!$chip.data('disabled')) {\n          $chip.data('disabled', true);\n          $chip.css('opacity', 0.5);\n          var selected = $chip.hasClass('mdc-chip--selected');\n          if (!selected) {\n            volunteerscotland.auth.linkWithProvider(providerName).then(function(result) {\n              console.log('Linked to', providerName, result);\n              chip.foundation_.setSelected(!selected);\n              $linkAction.text('Unlink from');\n              $chip.data('disabled', false);\n              $chip.css('opacity', 1);\n              checkProviders();\n            }).catch(function(err) {\n              console.error('Failed to link to', providerName, err);\n              $chip.data('disabled', false);\n              $chip.css('opacity', 1);\n              checkProviders();\n              window.setTimeout(function() {\n                window.location.href = '/sign-in?reauth=true';\n              }, 1000);\n            });\n          } else {\n            volunteerscotland.auth.unlinkFromProvider(providerName).then(function(result) {\n              console.log('Unlinked from', providerName, result);\n              chip.foundation_.setSelected(!selected);\n              $linkAction.text('Link to');\n              $chip.data('disabled', false);\n              $chip.css('opacity', 1);\n              checkProviders();\n            }).catch(function(err) {\n              console.error('Failed to unlink from', providerName, err);\n              $chip.data('disabled', false);\n              $chip.css('opacity', 1);\n              checkProviders();\n              if (err.code === 'auth/requires-recent-login') {\n                window.setTimeout(function() {\n                  window.location.href = '/sign-in?reauth=true';\n                }, 1000);\n              }\n            });\n          }\n        }\n      });\n    }); \n\n    function checkProviders() {\n      var enabled = volunteerscotland.auth.providerIds.length > 1;\n      $('.mdc-chip--selected[data-provider-link]')\n        .data('disabled', !enabled)\n        .css({\n          'opacity': enabled ? 1 : 0.5,\n          'cursor': enabled ? 'pointer' : 'default'\n        })\n        .attr('title', !enabled ? 'You cannot unlink your social account as you are using it to sign in' : '');\n    }\n\n    $changePassword.on('click', changePassword);\n    $password1.on('keypress', function(evt) {\n      if (evt.which === 13) {\n        $password2.focus();\n      }\n    });\n    $password2.on('keypress', function(evt) {\n      if (evt.which === 13) {\n        changePassword();\n      }\n    });\n\n    function changePassword() {\n      var password1 = $password1.val();\n      var password2 = $password2.val();\n      volunteerscotland.disable([$changePassword, $password1, $password2]);\n\n      volunteerscotland.auth.changePassword(password1, password2).then(function() {\n        volunteerscotland.snackbarShow({\n          message: 'Password changed, please wait',\n        });\n        window.setTimeout(function() {\n          window.location.reload();\n        }, 1000);\n      }).catch(function(err) {\n        volunteerscotland.disable([$changePassword, $password1, $password2], false);\n        $password1.val('');\n        $password2.val('');\n        $password1.focus();\n        volunteerscotland.snackbarShow({\n          message: err.message || 'There was a problem changing your password',\n          backgroundColor: '#dd4b39'\n        });\n        if (err.code === 'auth/requires-recent-login') {\n          window.setTimeout(function() {\n            window.location.href = '/sign-in?reauth=true';\n          }, 1000);\n        }\n        return;\n      });\n    }\n  });\n</script>",
        "account_account": "{{#*inline \"linkChip\"}}\n<div class=\"mdc-chip{{#if linked}} mdc-chip--selected{{/if}} provider-{{provider}}\" data-provider-link=\"{{provider}}\">\n  <span class=\"fab fa-{{provider}} mdc-chip__icon mdc-chip__icon--leading {{#if linked}}mdc-chip__icon--leading-hidden{{/if}}\" aria-hidden=\"true\"></span>\n  <div class=\"mdc-chip__checkmark\">\n    <svg class=\"mdc-chip__checkmark-svg\" viewBox=\"-2 -3 30 30\">\n      <path class=\"mdc-chip__checkmark-path\" fill=\"none\" stroke=\"#ffffff\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n    </svg>\n  </div>\n  <div class=\"mdc-chip__text noselect\">\n    <span class=\"link-action\">\n      {{#if linked}}\n      Unlink from\n      {{else}}\n      Link to\n      {{/if}}\n    </span>\n    {{capitalize provider}}\n  </div>\n</div>\n{{/inline}}\n\n<div id=\"detailed-results-container\" class=\"container-content settings\">\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    My account\n  </h1>\n\n  <section class=\"settings-section content-settings-email\">\n\n    <h2 class=\"mdc-typography--headline5\">\n      Profile information for volunteering applications\n    </h2>\n    <form action=\"/store-profile-info\" id=\"profile-info-form\" method=\"POST\" data-ajax-form='{\n      \"successMessage\": \"Profile information updated\",\n      \"failureMessage\": \"Failed to update profile\"\n    }'>\n\n    <div class=\"mdc-layout-grid\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"first_name\" name=\"first_name\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.first_name}}class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.first_name}}\">\n            <label class=\"mdc-floating-label\" for=\"first_name\">\n              First name\n            </label>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"last_name\" name=\"last_name\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.last_name}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.last_name}}\">\n            <label class=\"mdc-floating-label\" for=\"last_name\">\n              Last name\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"date_of_birth\" name=\"date_of_birth\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.date_of_birth}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.date_of_birth}}\">\n            <label class=\"mdc-floating-label\" for=\"date_of_birth\">\n              Date of birth\n            </label>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"location_address\" name=\"location_address\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_address}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.location_address}}\">\n            <label class=\"mdc-floating-label\" for=\"location_address\">\n              Address\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"phone\" name=\"phone\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.phone}}\n            class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.phone}}\">\n            <label class=\"mdc-floating-label\" for=\"phone\">\n              Phone number\n            </label>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"location_city\" name=\"location_city\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_city}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.location_city}}\">\n            <label class=\"mdc-floating-label\" for=\"location_city\">\n              Town/city\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"email\" name=\"email\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.email}}\n            value=\"{{@root.data.profileInfo.profile.email}}\">\n            <label class=\"mdc-floating-label\" for=\"email\">\n              Email address\n            </label>\n          </div>\n        </div>\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n            <input id=\"location_postcode\" name=\"location_postcode\" autocomplete=\"off\"\n            {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_postcode}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n            value=\"{{@root.data.profileInfo.profile.location_postcode}}\">\n            <label class=\"mdc-floating-label\" for=\"location_postcode\">\n              Postcode\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button type=\"submit\" class=\"mdc-button mdc-button--raised mdc-button--import v-margin\">\n      <span class=\"far fa-save mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      <span>Save profile information</span>\n    </button>\n  </form>\n</section>\n\n<hr />\n\n<section class=\"settings-section content-settings-email\">\n  <h2 class=\"mdc-typography--headline5\">\n    Opportunities alerts\n  </h2>\n  <h3 class=\"mdc-typography--headline6 v-margin-full\">\n    New opportunity emails\n  </h3>\n  {{> email_frequency}}\n  {{#ifAny\n    (compare (length (filter @root.data.searches.items.[0] \"partitionActive\" \"===\" 1)) \">\" 0)\n    @root.data.favourites.items.[0].[0].active\n    (compare (length @root.data.user-newsletter-subscriptions) \">\" 0)\n  }}\n  {{#ifAny\n    (compare (length (filter @root.data.searches.items.[0] \"partitionActive\" \"===\" 1)) \">\" 0)\n    @root.data.favourites.items.[0].[0].active\n  }}\n  <p>\n    <a href=\"/stop-all-emails\" class=\"mdc-button mdc-button--raised\">\n      <span class=\"far fa-envelope mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Stop all email alerts\n    </a>\n    {{/ifAny}}\n  </p>\n  <p>\n    {{#ifAny\n      (compare (length @root.data.user-newsletter-subscriptions) \">\" 0)\n    }}\n    {{!-- Note, this needs to be onclick, as otherwise it'll reset the page and show newsletters still present.\n    They take a while for CM to turn them off --}}\n      <a onclick=\"stopAllNewsletters(event)\" class=\"nl-link-block mdc-button mdc-button--raised\">\n      <span class=\"far fa-envelope mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      <span>Stop all newsletters</span>\n    </a>\n    {{/ifAny}}\n  </p>\n  {{/ifAny}}\n</section>\n\n<hr />\n\n<section class=\"settings-section content-settings-account\">\n  <h2 class=\"mdc-typography--headline5\">\n    Account settings\n  </h2>\n\n  <div class=\"mdc-layout-grid\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone\">\n        {{#if (contains (map @root.data.auth.providerData (getProp \"providerId\")) \"password\") ~}}\n        <h3 class=\"mdc-typography--headline6\">\n          Change password\n        </h3>\n        {{else}}\n        <h3 class=\"mdc-typography--headline6\">\n          Set password\n        </h3>\n        <span class=\"mdc-typography--body1\">You are currently using a social media account to sign in. If you set a password you will also be able to sign in with your email address.</span>\n        {{/if ~}}\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"password\" id=\"change-password-password\" class=\"mdc-text-field__input\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label mdc-floating-label--float-above\" for=\"change-password\">\n            Password\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"password\" id=\"change-password-confirm\" class=\"mdc-text-field__input\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label mdc-floating-label--float-above\" for=\"change-password-confirm\">\n            Confirm password\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <button class=\"mdc-button mdc-button--raised mdc-button--change_password\" id=\"change-password\">\n          <span class=\"far fa-lock mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n          {{#if (contains (map @root.data.auth.providerData (getProp \"providerId\")) \"password\") ~}}\n          Change password\n          {{else}}\n          Set password\n          {{/if ~}}\n        </button>\n      </div>\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-12-phone\">\n        <h3 class=\"mdc-typography--headline6\">\n          Linked accounts\n        </h3>\n        <div class=\"mdc-chip-set mdc-chip-set--filter\">\n          {{#each (split \"google,facebook,twitter\" \",\") ~}}\n          <div class=\"v-margin\">\n            {{> linkChip\n              provider=this\n              linked=(contains (map @root.data.auth.providerData (getProp \"providerId\")) (concat this \".com\"))\n            }}\n          </div>\n          {{/each ~}}\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <h2 class=\"mdc-typography--headline5\">\n    Account data\n  </h2>\n  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-6-tablet mdc-layout-grid__cell--span-12-phone\">\n    <button type=\"button\" class=\"mdc-button mdc-button--raised mdc-button--export v-margin\" onclick=\"exportUserData();\">\n      <span class=\"far fa-upload mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Export account settings\n    </button><br />\n    <button class=\"mdc-button mdc-button--raised mdc-button--import v-margin\" data-dialog-target=\"#import-user-dialog\">\n      <span class=\"far fa-download mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Import account settings\n    </button><br />\n    <button class=\"mdc-button mdc-button--raised mdc-button--delete v-margin\" data-dialog-target=\"#delete-user-dialog\">\n      <span class=\"far fa-trash mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      Delete account\n    </button>\n  </div>\n</section>\n</div>\n\n<aside id=\"delete-user-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"delete-user-dialog-label\" aria-describedby=\"delete-user-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <div action=\"/delete-user\" method=\"GET\" class=\"mdc-dialog__surface\">\n      <header class=\"mdc-dialog__header\">\n        <h2 id=\"delete-user-dialog-label\" class=\"mdc-dialog__title\">Are you sure you want to delete your account?</h2>\n      </header>\n      <section id=\"delete-user-dialog-description\" class=\"mdc-dialog__content\">\n        <p>\n          Deleting your My Volunteer account will:\n        </p>\n        <ul>\n          <li>Stop all email alerts</li>\n          <li>Delete your saved searches</li>\n          <li>Delete your favourites</li>\n          <li>Delete your notes on opportunities</li>\n          <li>Fully remove your My Volunteer account from Volunteer Scotland Search</li>\n        </ul>\n        <p>\n          If you only want to stop your email alerts, please see the options on <a href=\"/searches\">My saved searches</a>.\n        </p>\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <a href=\"/delete-user\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"accept\">Delete account</a>\n      </footer>\n    </div>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>\n\n<aside id=\"import-user-dialog\" class=\"mdc-dialog\" role=\"alertdialog\" aria-labelledby=\"import-user-dialog-label\" aria-describedby=\"import-user-dialog-description\" data-mdc-auto-init=\"MDCDialog\">\n  <div class=\"mdc-dialog__container\">\n    <form action=\"/import-user-data\" method=\"POST\" class=\"mdc-dialog__surface\" data-ajax-form='{\n        \"successMessage\": \"Data imported successfully\",\n        \"failureMessage\": \"Failed to import data\"\n      }'>\n      <header class=\"mdc-dialog__header\">\n        <h2 id=\"import-user-dialog-label\" class=\"mdc-dialog__title\">Import user data</h2>\n      </header>\n      <section id=\"import-user-dialog-description\" class=\"mdc-dialog__content\">\n        <div class=\"mdc-text-field mdc-text-field--textarea mdc-text-field--fullwidth\" data-mdc-auto-init=\"MDCTextField\">\n          <textarea id=\"import-user-json\" name=\"json\" class=\"mdc-text-field__input\" rows=\"10\"></textarea>\n          <label for=\"import-user-json\" class=\"mdc-floating-label\">Paste exported data here</label>\n        </div>\n      </section>\n      <footer class=\"mdc-dialog__actions\">\n        <button type=\"button\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"close\">Cancel</button>\n        <button type=\"submit\" class=\"mdc-button mdc-dialog__button mdc-ripple-upgraded\" data-mdc-dialog-action=\"accept\">Import User</button>\n      </footer>\n    </form>\n  </div>\n  <div class=\"mdc-dialog__scrim\"></div>\n</aside>",
        "account_delete-user": "  <div class=\"mdc-card\">\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline4\">\n        Deleting your account&hellip;\n      </div>\n    </div>\n  </div>\n  <script>\n    document.addEventListener(\"DOMContentLoaded\", function(event) {\n      window.setTimeout(function() {\n        volunteerscotland.auth.deleteUser().then(function(user) {\n          window.setTimeout(function() {\n            window.location.href = '/';\n          }, 1000);\n        }).catch(function(err) {\n          console.error('Failed to delete user', err);\n          if (err.code === 'auth/requires-recent-login') {\n            window.setTimeout(function() {\n              window.location.href = '/sign-in?reauth=true';\n            }, 1000);\n          }\n        });\n      }, 1000);\n    });\n  </script>",
        "account_dynamic-notifications-task": "{{#*inline \"noop\"}}\n  {\n    \"name\": \"notifications\",\n    \"taskModule\": \"render\",\n    \"renderer\": \"handlebars\",\n    \"config\": {\n      \"output\": \"data\",\n      \"template\": \"{ \\\"status\\\": \\\"No saved searches\\\" }\",\n      \"parseJson\": true\n    }\n  }\n{{/inline}}\n{{#if @root.request.body.json}}\n  {{#with (parse @root.request.body.json)}}\n    {{#ifAny (any savedSearches.items) (any favourites.items)}}\n      {\n        \"name\": \"notifications\",\n        \"taskModule\": \"mysql\",\n        \"config\": {\n          \"connectionName\": \"volunteerscotland_notifications\",\n          \"queryTemplates\": {\n            {{#if (any savedSearches.items)}}\n              {{#each savedSearches.items}}\n                {{{stringify partition}}}: {{#blockStringify this}}\n                  CALL _addSubscriptionParameters(\n                    {{{stringify @root.data.auth.email}}},\n                    {{{stringify campaign}}},\n                    {{{stringify querystring}}},\n                    {{{stringify partition}}},\n                    {{#if active}}1{{else}}0{{/if}}\n                  );\n                {{/blockStringify}}\n                {{#unless @last}},{{else}}{{#if (any ../favourites.items)}},{{/if}}{{/unless}}\n              {{/each}}\n            {{/if}}\n            {{#if (any favourites.items)}}\n              {{#each favourites.items}}\n                {{{stringify (concat \"favourites-\" value)}}}: {{#blockStringify this}}\n                  CALL _addSubscriptionParameter(\n                    {{{stringify @root.data.auth.email}}},\n                    {{{stringify campaign}}},\n                    {{{stringify parameter}}},\n                    {{{stringify value}}},\n                    {{{stringify partition}}},\n                    {{#if active}}1{{else}}0{{/if}}\n                  );\n                {{/blockStringify}}\n                {{#unless @last}},{{/unless}}\n              {{/each}}\n            {{/if}}\n          }\n        },\n        \"renderer\": \"handlebars\"\n      }\n    {{else}}\n      {{> noop}}\n    {{/ifAny}}\n  {{else}}\n    {{> noop}}\n  {{/with}}\n{{else}}\n  {{> noop}}\n{{/if}}\n",
        "account_export-user-data": "{\n  \"dataComment\": {\n    \"description\": \"This is a JSON export of ALL data we currently have stored about you and associated with your Volunteer Scotland Search account. In the stored data, opportunities are only referenced by their ID. You can use the `opportunityLookup` field included in this export to find details on any opportunity still stored within our search index.\",\n    \"location\": \"Various, but all withing the Google Cloud Platform ecosystem\"\n  },\n  \"user\": {\n    \"dataComment\": {\n      \"description\": \"This is all of the information stored about you for the purposes of authentication and storing other information you have chosen to store such as Shortlisted items, Saved searches, and Notes.\",\n      \"location\": \"Within Google's Firebase system. For more information visit https://firebase.google.com\"\n    },\n    \"email\": {{{stringify @root.data.auth.email}}},\n    \"emailVerified\": {{{stringify @root.data.auth.emailVerified}}},\n    \"metadata\": {{{stringify @root.data.auth.metadata}}},\n    \"providerData\": {\n      \"dataComment\": \"Each account can be linked to several authentication providers (Email and password, Google, Facebook, Twitter). Here is all of the information we store and have access to related to each linked provider\",\n      \"items\": {{{stringify @root.data.auth.providerData}}}\n    }\n  },\n  \"notes\": {\n    \"dataComment\": {\n      \"description\": \"A list of opportunity Ids with any notes you may have stored against them. See the `opportunityLookup` field for information about each opportunity's ID\",\n      \"location\": \"Within Google's Firebase Database system. For more information visit https://firebase.google.com\"\n    },\n    \"items\": {{{stringify @root.data.profileInfo.notes}}}\n  },\n  \"favourites\": {\n    \"dataComment\": {\n      \"description\": \"A list of all your shortlisted items. See the `opportunityLookup` field for information about each opportunity's ID\",\n      \"location\": \"On a MySQL database located at Google's 'europe-west2-c' (London, United Kingdom) data centre. For more information visit https://cloud.google.com/compute/docs/regions-zones/\"\n    },\n    \"items\": {{{stringify @root.data.favourites.items.[0]}}}\n  },\n  \"savedSearches\": {\n    \"dataComment\": {\n      \"description\": \"A list of each of your saved searches\",\n      \"location\": \"On a MySQL database located at Google's 'europe-west2-c' (London, United Kingdom) data centre. For more information visit https://cloud.google.com/compute/docs/regions-zones/\"\n    },\n    \"items\": {{{stringify @root.data.searches.items.[0]}}}\n  },\n  \"recentlyViewed\": {\n    \"dataComment\": {\n      \"description\": \"Here is a list of (up to) the last 10 opportunities you have viewed.\",\n      \"location\": \"Your browser's cookies though our web servers have the ability to read this information. These servers are located at Google's 'europe-west2' (London, United Kingdom) data centres. For more information visit https://cloud.google.com/computer/docs/regions-zones/\"\n    },\n    \"items\": {{{stringify (split @root.request.cookies.recently_viewed \",\")}}}\n  },\n  \"opportunityLookup\": {\n    \"dataComment\": {\n      \"description\": \"Use this list to find details about opportunities that appear in your Notes, Shortlist, and Recently Viewed lists. Please note that if an opportunity is no longer in our search index, it will not appear in this list\",\n      \"location\": \"In an Elasticsearch index located at Google's 'europe-west3' (Frankfurt, Germany) data centre. For more information visit https://cloud.google.com/compute/docs/regions-zones/. It should be noted that only data owned by Volunteer Scotland Search is stored at this location and no user's information is ever transferred there.\"\n    },\n    \"items\": [\n      {{#each @root.data.opportunity_lookup.hits.hits}}\n        {{#with _source}}\n          {\n            \"id\": {{{stringify Id}}},\n            \"title\": {{{stringify title}}},\n            \"organisation\": {{{stringify organisation_name}}},\n            \"url\": {{{stringify (concat \"https://volunteerscotland-search/opportunity/\" slug)}}}\n          }{{#unless @last}},{{/unless}}\n        {{/with}}\n      {{/each}}\n    ]\n  },\n  \"exported\": {{{stringify (momentFormat (moment) \"YYYY-MM-DD HH:mm:SS\")}}}\n}\n",
        "account_import-notes": "{\n{{~#with (parse @root.request.body.json)~}}\n{{~#if (any (getKeys notes.items))~}}\n{{~#each (getKeys notes.items)~}}\n  {{{stringify this}}}: {{{stringify (getProperty ../notes.items this)}}}{{#unless @last}},{{/unless}}\n{{~/each~}}\n{{~/if~}}\n{{~/with~}}\n}\n",
        "account_newsletters": "<div id=\"detailed-results-container\" class=\"container-content content-newsletters\">\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    Newsletters\n    {{#unless @root.request.params.query.newuser ~}}\n      <span class=\"mdc-typography--body2\">&ensp;Sent on a quarterly basis</span>\n    {{/unless ~}}\n  </h1>\n  {{#if @root.request.params.query.newuser ~}}\n    <h2 class=\"mdc-typography--headline6 v-margin-full\">\n      Use the form below to opt in to quarterly email updates or <a href=\"/\">start looking for opportunities</a>.\n    </h2>\n  {{/if ~}}\n  <form id=\"newsletter-form\" method=\"GET\" class=\"sign-in-form sign-up-form\">\n    <div class=\"mdc-card mdc-elevation--z0\">\n      <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n        <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n        <input type=\"text\" id=\"first_name\" name=\"first_name\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" value=\"{{@root.data.profileInfo.profile.first_name}}\" data-lpignore=\"true\" autocomplete=\"off\" />\n        <label class=\"mdc-floating-label mdc-floating-label--float-above\" for=\"first_name\">\n          First Name (Optional)\n        </label>\n        <div class=\"mdc-line-ripple\"></div>\n      </div>\n      <p>\n        Check the boxes below to receive regular email updates in areas that interest you.\n      </p>\n      {{#each @root.data.all-newsletter-info.result}}\n      <h2 class=\"mdc-typography--headline6 v-margin-full\">{{Name}}</h2>\n        <div class=\"mdc-form-field\">\n          <div class=\"mdc-radio\">\n            <input class=\"mdc-radio__native-control\" type=\"radio\" id=\"{{ListID}}-on\" name=\"list-{{ListID}}\" value=\"on\" {{#if (contains @root.data.user-newsletter-subscriptions ListID)}}checked{{/if}}>\n            <div class=\"mdc-radio__background\">\n              <div class=\"mdc-radio__outer-circle\"></div>\n              <div class=\"mdc-radio__inner-circle\"></div>\n            </div>\n          </div>\n          <label for=\"list-{{ListID}}-off\">\n            On\n          </label>\n          <div class=\"mdc-radio\">\n            <input class=\"mdc-radio__native-control\" type=\"radio\" id=\"{{ListID}}-off\" name=\"list-{{ListID}}\" value=\"{{#if (contains @root.data.user-newsletter-subscriptions ListID)}}off{{else}}dud{{/if}}\" {{#unless (contains @root.data.user-newsletter-subscriptions ListID)}}checked{{/unless}}>\n            <div class=\"mdc-radio__background\">\n              <div class=\"mdc-radio__outer-circle\"></div>\n              <div class=\"mdc-radio__inner-circle\"></div>\n            </div>\n          </div>\n          <label for=\"list-{{ListID}}-off\">\n            Off\n          </label>\n        </div>\n      {{/each}}\n      <div id=\"form-section-sign-up-buttons\">\n        <button class=\"mdc-button mdc-button--raised\" type=\"submit\" id=\"newsletter-submit\">\n          Submit\n        </button>\n      </div>\n    </div>\n    <div class=\"card-loader\" id=\"sign-up-loader\">\n      <div class=\"card-loader-background\"></div>\n      <div class=\"card-loader-inner\">\n        <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n      </div>\n    </div>\n  </form>\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n    var $form = $('#newsletter-form');\n\n    $form.on('submit', function(evt) {\n      evt.preventDefault();\n      var formdata = $form.serialize();\n      $.ajax({\n        url: '/add-newsletter-subscription',\n        type: 'POST',\n        data: formdata, // serializes the form's elements.\n      });\n      volunteerscotland.componentsInitialiser.snackbar.show({message:'Newsletters updated'})\n    })\n  })\n</script>",
        "account_reset-password": "<form id=\"reset-password-form\" method=\"POST\" class=\"reset-password-form\">\n  <div class=\"mdc-card mdc-elevation--z0\">\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline4 x-padding\">\n        Reset password\n      </div>\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--body2 x-padding\">\n        Enter your email address to be sent a password reset link\n      </div>\n    </div>\n    <div class=\"l-margin-full r-margin-full\">\n      <div class=\"mdc-card__info x-padding-full mdc-theme--primary-bg mdc-theme--on-primary\" id=\"reset-password-message\">\n        <span id=\"form-message\"></span>\n      </div>\n    </div>\n    <div class=\"mdc-card__info x-padding-full\">\n      <div class=\"mdc-typography--body1\" id=\"form-section-email\">\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-at mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"email\" id=\"reset-password-email\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" />\n          <label class=\"mdc-floating-label\" for=\"sign-in-email\">\n            Email\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n      </div>\n      <div id=\"form-section-sign-in-buttons\">\n        <button class=\"mdc-button mdc-button--raised\" type=\"submit\" id=\"reset-password-submit\">\n          Send reset link\n        </button>\n      </div>\n      <div class=\"card-loader\" id=\"reset-password-loader\">\n        <div class=\"card-loader-inner\">\n          <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  var $form = $('#reset-password-form');\n  var $message = $('#reset-password-message');\n  var $email = $('#reset-password-email');\n  var $login = $('#reset-password-submit');\n  var $loader = $('#reset-password-loader');\n\n  $form.on('submit', function(evt) {\n    var email = $email.val();\n    $loader.css('display', 'flex');\n    evt.preventDefault();\n    volunteerscotland.auth.sendPasswordReset(email).then(function() {\n      $message.text('If there is an account associated with this email address, instructions on resetting your password have been sent there.').show();\n      $loader.css('display', 'none');\n    }).catch(function(err) {\n      $message.text(err.message).show();\n      $loader.css('display', 'none');\n    });\n  });\n});\n</script>",
        "account_sidebar": "<div class=\"mdc-drawer__content\">\n  <h3 class=\"mdc-typography--headline6 h-padding-full t-margin-full\">\n    My Volunteer Account\n  </h3>\n  <nav class=\"mdc-list\">\n    {{#each @root.context.metaData.menus.user-signed-in ~}}\n    {{#compare label \"!==\" \"Search\" ~}}\n    {{#compare label \"!==\" \"Sign out\" ~}}\n    <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" role=\"menuitem\">\n      {{#if icon ~}}\n      <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n      {{/if ~}}\n      {{{label}}}\n    </a>\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/each ~}}\n  </nav>\n</div>",
        "account_sign-in": "<form id=\"sign-in-form\" method=\"POST\" class=\"sign-in-form\">\n  <div class=\"mdc-card mdc-elevation--z0\">\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline4 x-padding\">\n        {{#if @root.request.params.query.reauth}}\n          Sign in\n        {{else}}\n          Sign in\n        {{/if}}\n      </div>\n      {{#if @root.request.params.query.reauth}}\n        <div class=\"mdc-card__info--content-primary-title mdc-typography--headline5 x-padding\">\n          Before you can do that you must sign in again\n        </div>\n      {{/if}}\n    </div>\n    <div class=\"l-margin-full r-margin-full\">\n      <div class=\"mdc-card__info x-padding-full mdc-theme--secondary-bg mdc-theme--on-secondary\" id=\"sign-in-message\">\n        <span id=\"form-message\"></span>\n      </div>\n    </div>\n    <div class=\"mdc-card__info x-padding-full\">\n      <div class=\"mdc-typography--body1\" id=\"form-section-email\">\n        {{> account_sign_in_social loaderSelector=\"#sign-in-loader\" messageSelector=\"#sign-in-message\"}}\n\n        <div class=\"middle-line-text\">\n          <span>or</span>\n        </div>\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-at mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"email\" id=\"sign-in-email\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" />\n          <label class=\"mdc-floating-label\" for=\"sign-in-email\">\n            Email\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"password\" id=\"sign-in-password\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" />\n          <label class=\"mdc-floating-label\" for=\"sign-in-password\">\n            Password\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n      </div>\n      <div id=\"form-section-sign-in-buttons\">\n        <button class=\"mdc-button mdc-button--raised\" type=\"submit\" id=\"sign-in-submit\">\n          Sign in\n        </button>\n        <div class=\"mdc-typography--body1 v-margin-full\">\n          Forgot your password? <a href=\"/reset-password\">Reset password</a>\n        </div>\n        <div class=\"mdc-typography--body1 v-margin-full\">\n          Don't have an account? <a href=\"/sign-up\">Sign up</a>\n        </div>\n        <div class=\"mdc-typography--body1 v-margin-full\">\n          Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>\n        </div>\n      </div>\n      <div class=\"card-loader\" id=\"sign-in-loader\">\n        <div class=\"card-loader-background\"></div>\n        <div class=\"card-loader-inner\">\n          <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  var $form = $('#sign-in-form');\n  var $message = $('#sign-in-message');\n  var $email = $('#sign-in-email');\n  var $password = $('#sign-in-password');\n  var $login = $('#sign-in-submit');\n  var $loader = $('#sign-in-loader');\n\n  $form.on('submit', function(evt) {\n    var email = $email.val();\n    var password = $password.val();\n    $loader.css('display', 'flex');\n    evt.preventDefault();\n    volunteerscotland.auth.signInEmailPassword(email, password).then(function(user) {\n      window.location.href = '\n        {{~#ifAny (contains @root.request.headers.referer \"sign-out\") (contains @root.request.headers.referer \"reset-password\")~}}\n          /\n        {{~else~}}\n          {{default @root.request.headers.referer \"/\"}}\n        {{~/ifAny~}}\n      ';\n    }).catch(function(err) {\n      $message.html(err.message+' <a href=\"/reset-password\">Reset password</a>').show();\n      $loader.css('display', 'none');\n    });\n  })\n});\n</script>",
        "account_sign-out": "{{> account_sign_out_loader}}\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  setTimeout(function() {\n    volunteerscotland.auth.sessionCleanup().then(function() {\n      window.setTimeout(function() {\n        window.location.href = '/';\n      }, 1000);\n    }).catch(function(err) {\n      console.error('Error signing out:', err);\n    });\n  }, 1000);\n});\n</script>",
        "account_sign-up": "<form id=\"sign-up-form\" method=\"POST\" class=\"sign-in-form sign-up-form\">\n  <div class=\"mdc-card mdc-elevation--z0\">\n    <div class=\"mdc-card__info--content-primary\">\n      <div class=\"mdc-card__info--content-primary-title mdc-typography--headline4 x-padding\">\n        Sign up\n      </div>\n    </div>\n    <div class=\"l-margin-full r-margin-full\">\n      <div class=\"mdc-card__info x-padding-full mdc-theme--primary-bg mdc-theme--on-primary\" id=\"sign-up-message\">\n        <span id=\"form-message\"></span>\n      </div>\n    </div>\n    <div class=\"mdc-card__info x-padding-full\">\n      <div class=\"mdc-typography--body1\" id=\"form-section-email\">\n        {{> account_sign_in_social loaderSelector=\"#sign-up-loader\" messageSelector=\"#sign-up-message\"}}\n\n        <div class=\"middle-line-text\">\n          <span>or</span>\n        </div>\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-at mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"email\" id=\"sign-up-email\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label\" for=\"sign-up-email\">\n            Email\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-at mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"email\" id=\"sign-up-email-confirm\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label\" for=\"sign-up-email-confirm\">\n            Confirm email\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"password\" id=\"sign-up-password\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label\" for=\"sign-up-password\">\n            Password\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n        <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n          <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n          <input type=\"password\" id=\"sign-up-password-confirm\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" data-lpignore=\"true\" autocomplete=\"off\" />\n          <label class=\"mdc-floating-label\" for=\"sign-up-password-confirm\">\n            Confirm password\n          </label>\n          <div class=\"mdc-line-ripple\"></div>\n        </div>\n      </div>\n\n\n      <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n        <span class=\"far fa-key mdc-text-field__icon\" tabindex=\"-1\"></span>\n        <input type=\"text\" id=\"first_name\" name=\"first_name\" class=\"mdc-text-field__input mdc-text-field--fullwidth\" data-lpignore=\"true\" autocomplete=\"off\" />\n        <label class=\"mdc-floating-label\" for=\"first_name\">\n          First name (Optional)\n        </label>\n        <div class=\"mdc-line-ripple\"></div>\n      </div>\n\n    <p>\n        Check the boxes below to receive regular email updates in areas that interest you.\n      </p>\n      {{#each @root.data.all-newsletter-info.result}}\n        <div class=\"mdc-form-field\">\n        <div class=\"mdc-checkbox\">\n          <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"list-{{ListID}}\" id=\"list-{{ListID}}\" />\n          <div class=\"mdc-checkbox__background\">\n            <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n              <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n            </svg>\n            <div class=\"mdc-checkbox__mixedmark\"></div>\n          </div>\n        </div>\n        <label for=\"list-{{ListID}}\">\n          {{Name}}\n        </label>\n\n        </div>\n      {{/each}}\n    </div>\n\n      <div id=\"form-section-sign-up-buttons\">\n        <button class=\"mdc-button mdc-button--raised\" type=\"submit\" id=\"sign-up-submit\">\n          Sign up\n        </button>\n        <div class=\"mdc-typography--body1 v-margin-full\">\n          Already have an account? <a href=\"/sign-in\">Sign in</a>\n        </div>\n        <div class=\"mdc-typography--body1 v-margin-full\">\n          Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>\n        </div>\n      </div>\n      <div class=\"card-loader\" id=\"sign-up-loader\">\n        <div class=\"card-loader-background\"></div>\n        <div class=\"card-loader-inner\">\n          <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n  <input type=\"hidden\" name=\"redirect\" id=\"redirect\" value=\"home\"/>\n</form>\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  var $form = $('#sign-up-form');\n  var $message = $('#sign-up-message');\n  var $emailForm = $('#email-password-form');\n  var $email = $('#sign-up-email');\n  var $emailConfirm = $('#sign-up-email-confirm');\n  var $password = $('#sign-up-password');\n  var $passwordConfirm = $('#sign-up-password-confirm');\n  var $register = $('#sign-up-submit');\n  var $loader = $('#sign-up-loader');\n\n\n\n  function hasSubscriptions() {\n    return ($(\"input[name^='list']:checked\")).length > 0;\n  }\n\n\n  $form.on('submit', function(evt) {\n    $loader.css('display', 'flex');\n    evt.preventDefault();\n    var email = $email.val();\n    var emailConfirm = $emailConfirm.val();\n    var password = $password.val();\n    var passwordConfirm = $passwordConfirm.val();\n    volunteerscotland.auth.createAccount(email, emailConfirm, password, passwordConfirm)\n      .then(function(user) {\n        if (hasSubscriptions()){\n          $form.attr('action', '/add-newsletter-subscription?redirect=home');\n          evt.currentTarget.submit();\n        } else {\n          window.location.href = '/';\n        }\n      })\n      .catch(function(err) {\n        $message.text(err.message || 'There was a problem creating your account').show();\n        $loader.css('display', 'none');\n        document.body.scrollTop = document.documentElement.scrollTop = 0;\n        return;\n      });\n  });\n})\n</script>",
        "email-out": "[\n{{#eachJoin @root.data.emailTypes \",\"}}\n{\n\"from\": {{{stringify (getProperty @root.context.metaData.emailSendSettings (concat this '.from'))}}},\n\"h:sender\": {{{stringify (getProperty @root.context.metaData.emailSendSettings (concat this '.from'))}}},\n\"to\": {{{stringify (default (getProperty @root.request.body (concat 'email-' this)) @root.request.body.email)}}},\n\"o:tag\": {{{stringify (if testEmail (concat 'test-' this) else=this)}}},\n\"o:tracking\": true,\n{{!-- \"o:testmode\": true, --}}\n\"tag\": {{{stringify this}}},\n\"id\": {{{stringify this}}},\n\"connectionName\": {{{stringify (getProperty @root.context.metaData.emailSendSettings (concat this '.mailgunConnection'))}}},\n\"subject\":\n{{~#blockStringify this ~}}\n  {{~>\n  (getProperty @root.context.metaData.emailSendSettings (concat this '.subjectPartial'))\n    @root.request.body emailType=this\n  ~}}\n{{~/blockStringify}},\n\"html\":\n{{~#blockStringify this ~}}\n  {{~>\n  (getProperty @root.context.metaData.emailSendSettings (concat this '.bodyPartial'))\n    @root.request.body emailType=this\n  ~}}\n{{~/blockStringify}}\n}\n{{/eachJoin}}\n]\n",
        "email_email-display": "<div class=\"content page-content\">\n<h2 class=\"mdc-typography--headline6\">Copy for register interest email</h2>\n\n{{>emails_register_interest_body @root.request.body}}\n\n<h2 class=\"mdc-typography--headline6\">Copy for user confirmation email</h2>\n\n{{>emails_confirmation_body @root.request.body}}\n</div>",
        "email_email-types": "{{#json type='array'}}\n  {{#compare @root.request.body.opportunity_contact_via_organisation \"===\" \"true\"~}}\n  \"register-interest\",\n  {{/compare ~}}\n  {{#compare @root.request.body.opportunity_contact_via_tsi \"===\" \"true\"~}}\n  \"register-interest-tsi\",\n  {{/compare ~}}\n  \"user-confirmation\"\n{{/json}}\n",
        "errors_404": "<div class=\"container-fluid container-content h-margin-full\">\n  <div class=\"mdc-layout-grid\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n        <h2>Error 404: The page you requested could not be found</h2>\n      </div>\n    </div>\n  </div>\n  {{#ifAll data.not_found (compare data.not_found.hits.total \">\" 1) ~}}\n  <hr />\n  <h3>Other relevant content</h3>\n  {{#each data.not_found.hits.hits ~}}\n  {{#compare @index \"===\" 0 ~}}\n  {{else}}\n  {{>highlight_result}}\n  {{/compare ~}}\n  {{/each ~}}\n  {{else}}\n  <!-- <h3>Try searching for a topic</h3> -->\n  {{/ifAll ~}}\n</div>\n",
        "errors_500": "<div class=\"container-fluid container-content\">\n  <div class=\"mdc-layout-grid\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone content page-content\">\n        <h2>Something went terribly wrong</h2>\n        <p>\n          Looks like either:\n        </p>\n        <ul>\n          <li>the server did not understand what you were trying to do and panicked,</li>\n          <li>the devs did something stupid, or</li>\n          <li>a combination of the two</li>\n        </ul>\n        <p>\n          What ever the cause of this issue, the devs have been informed and will\n          be working to fix whatever can be fixed\n        </p>\n      </div>\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone\">\n        <img src=\"{{~>asset_url url='images/404.png'~}}\" class=\"responsive\">\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--\n\n███████╗██████╗ ██████╗  ██████╗ ██████╗ ██████╗ ███████╗████████╗ █████╗ ██╗██╗     ███████╗\n██╔════╝██╔══██╗██╔══██╗██╔═══██╗██╔══██╗██╔══██╗██╔════╝╚══██╔══╝██╔══██╗██║██║     ██╔════╝\n█████╗  ██████╔╝██████╔╝██║   ██║██████╔╝██║  ██║█████╗     ██║   ███████║██║██║     ███████╗\n██╔══╝  ██╔══██╗██╔══██╗██║   ██║██╔══██╗██║  ██║██╔══╝     ██║   ██╔══██║██║██║     ╚════██║\n███████╗██║  ██║██║  ██║╚██████╔╝██║  ██║██████╔╝███████╗   ██║   ██║  ██║██║███████╗███████║\n╚══════╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝╚═════╝ ╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝╚══════╝╚══════╝\n\n{{#each errors}}\n--------------------------------\nName: {{name}}\nMessage: {{message}}\nStack: {{stack}}\nSource Route: {{sourceRoute.route.name}}\nRedirect To: {{redirectTo}}\nStatus Code: {{statusCode}}\nData: {{{stringify data}}}\n{{#if task}}Task: {{{stringify task}}}{{/if}}\n{{#if destination}}Destination: {{{stringify destination}}}{{/if}}\n--------------------------------\n{{/each}}\n\n-->\n",
        "events_event-foot": "<script type=\"text/javascript\">\n  var mdeEditors = [];\n  $(document).ready(function() {\n    {{#ifAll @root.data.auth (compare @root.data.primaryResponse.hits.total \">\" 0) ~}}\n      var recentlyViewed = volunteerscotland.getCookie('recently_viewed') || '';\n      // console.log('Recently Viewed:', recentlyViewed, '| event Id:', eventId);\n      recentlyViewed = recentlyViewed.split(',');\n      recentlyViewed.unshift(eventId);\n      var newRecentlyViewed = [];\n      for (var i = 0; i < Math.min(recentlyViewed.length, 10); ++i) {\n        var item = recentlyViewed[i];\n        if (item && newRecentlyViewed.indexOf(item) === -1) {\n          newRecentlyViewed.push(item);\n        }\n      };\n      newRecentlyViewed = newRecentlyViewed.join(',');\n      // console.log('New Recently Viewed:', newRecentlyViewed);\n      volunteerscotland.setCookie('recently_viewed', newRecentlyViewed, 7);\n    {{/ifAll ~}}\n  });\n</script>\n",
        "events_event-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n{{#with data.primaryResponse.hits.hits.[0]._source ~}}\n\n<title>{{title}} with {{organisation_name}} – Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n<meta itemprop=\"name\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n<meta name=\"twitter:title\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n\n{{#ifAny organisation.logo_url og_image ../og_image ~}}\n<meta property=\"og:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n<meta property=\"og:image:height\" content=\"250\">\n<meta property=\"og:image:width\" content=\"250\">\n<meta itemprop=\"image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n<meta name=\"twitter:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n\n{{#ifAny og_summary description ../og_summary ../description ~}}\n<meta property=\"og:summary\" content=\"{{stripTags (regexReplace (default og_summary (default ../og_summary (default description ../description))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta itemprop=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta name=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta property=\"og:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta name=\"twitter:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n\n<!-- Twitter Card data -->\n<meta name=\"twitter:card\" content=\"summary\" />\n<meta name=\"twitter:site\" content=\"@scvotweet\">\n<meta name=\"twitter:creator\" content=\"@scvotweet\">\n<!-- Twitter summary card with large image must be at least 280x150px -->\n<!-- <meta name=\"twitter:image:src\" content=\"http://www.example.com/image.jpg\"> -->\n\n<!-- Open Graph data -->\n<meta property=\"og:type\" content=\"website\" />\n{{#if Id ~}}\n<meta property=\"og:url\" content=\"https://search.volunteerscotland.net/event/{{Id}}/{{title_slug}}\" />\n{{/if ~}}\n<meta property=\"og:site_name\" content=\"Volunteer Scotland\" />\n\n<script type=\"application/ld+json\" data-dynamic=\"true\">\n  {{> event_json_ld}}\n</script>\n\n{{/with ~}}\n{{else}}\n<title>Event – Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"Event – Volunteer Scotland Search\" data-dynamic=\"true\">\n{{/if ~}}\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css\">\n",
        "events_event": "<div class=\"container-content\">\n  {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n  <div class=\"content-primary\">\n    {{#each @root.data.primaryResponse.hits.hits ~}}\n      {{> event_full _source view=\"full\"}}\n    {{/each ~}}\n  </div>\n\n  {{#compare @root.data.eventSupplimentary.related.hits.total \">\" 0 ~}}\n  <div class=\"content-related\">\n    <div class=\"mdc-typography--headline5 v-margin-full\">\n      Similar events\n    </div>\n    <div class=\"mdc-layout-grid equal-height\">\n      <div class=\"mdc-layout-grid__inner\">\n        {{#each @root.data.eventSupplimentary.related.hits.hits ~}}\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          {{> event_list _source hitContext=\"related-event\" parentDocument=_source.Id viewContext=\"Related\"}}\n        </div>\n        {{/each ~}}\n      </div>\n    </div>\n  </div>\n  {{/compare ~}}\n\n  {{else}}\n  <p>\n    We could not find the event you were looking for. It may have been removed or expired.\n  </p>\n  {{/compare ~}}\n</div>",
        "events_map-data": "{\n  {{#if @root.request.params.query.returnRegionsNotPoints ~}}\n  \"areas\": [\n  {{#each @root.data.search_data.map_regions.hits.hits ~}}\n  {\n    \"place\": {{{safeStringify _source.place.[0]}}},\n    \"point\": {{{safeStringify _source.point}}},\n    \"Id\": \"{{_source.Id}}\",\n    \"shape\": {{{safeStringify _source.shape}}}\n  }\n  {{#unless @last}},{{/unless}}\n  {{/each ~}}\n  ]{{#if @root.data.search_data.map_results.hits.hits ~}},\n  \"aggregations\": {{{safeStringify @root.data.search_data.map_aggregations.aggregations}}}\n  {{/if ~}}\n  {{else}}\n  \"points\": [\n  {{#each @root.data.search_data.map_results.hits.hits ~}}\n  {\n    \"title\": \"{{_source.title}}\",\n    \"subtitle\": \"{{_source.organisation_name}}\",\n    \"URL\": \"/event/{{_source.Id}}/{{_source.title_slug}}{{> query_search}}\",\n    \"geo_coords\": {\n      \"lat\": {{_source.geo_coords.lat}},\n      \"lon\": {{_source.geo_coords.lon}}\n    }\n  }{{#unless @last}},{{/unless}}\n  {{/each ~}}\n  ]\n  {{/if ~}}\n}",
        "events_map-foot": "<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js\"></script>\n",
        "events_map-head": "<style>\n  html {\n    overflow: hidden;\n  }\n</style>\n",
        "events_map-region-data": "{\n  \"areas\": [\n    {{#each @root.data.search_data.map_regions.hits.hits ~}}\n    {\n    \"place\": {{{safeStringify _source.place.[0]}}},\n    \"point\": {{{safeStringify _source.point}}},\n    \"Id\": \"{{_source.Id}}\",\n    \"shape\": {{{safeStringify _source.shape}}}\n    }\n    {{#unless @last}},{{/unless}}\n    {{/each}}\n  ]{{#if @root.data.search_data.map_results.hits.hits}},\n    \"aggregations\": {{{safeStringify @root.data.search_data.map_aggregations.aggregations}}}\n  {{/if}}\n}\n",
        "events_map-search-form": "{{> event_search_form instance_id=\"perm\"}}",
        "events_map": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search container-map\">\n  <div class=\"mdc-layout-grid head\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n        {{#> components_tab_bar}}\n         {{> search_button}}\n         {{> components_tab url=(concat \"/events/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/events/search\")}}\n         {{> components_tab url=(concat \"/events/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/events/map\")}}\n        {{/components_tab_bar}}\n      </div>\n      {{#compare (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \">\" 0 ~}}\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone pagination-desktop\">\n        <div class=\"mdc-typography--body2 pull-right\">\n          <a href=\"/events/search{{> query_search}}&exclude=locations\">List {{subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count}} {{#compare @root.data.location_data.locations_results.hits.total \">\" 0}}other{{/compare}} volunteering {{inflect (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \"event\" \"events\"}}</a>\n          {{#compare @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets.length \">\" 0 ~}}\n          available\n          {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n          <span class=\"areas areas-fulltext\">\n          {{/compare ~}}\n          {{#with @root.data.location_data.la_results.aggregations.local_authority_areas ~}}\n          {{#each buckets ~}}\n          {{#if (contains (map @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets (getProp \"key\")) (replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\")) ~}}\n          <span class=\"area\">{{{replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\"}}}</span>\n          {{/if ~}}\n          {{#if @last}}{{#compare @root.data.location_data.home_results.hits.total \">\" 0}}\n          {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n          </span>\n          {{/compare ~}}\n          from home.{{/compare}}{{/if}}\n          {{/each ~}}\n          {{/with ~}}\n          {{else}}\n          available from home.\n          {{/compare ~}}\n        </div>\n      </div>\n      {{/compare ~}}\n    </div>\n  </div>\n  {{#if @root.data.search_data.map_results.pagination.totalResults ~}}\n  {{!--#ifAny (compare @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count \">\" 0) (compare @root.request.params.query.location \"===\" \"\") ~--}}\n  <div class=\"card-loader\" id=\"event-map-loader\" style=\"display: flex\">\n    <div class=\"card-loader-inner\">\n      <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n    </div>\n  </div>\n  <div id=\"map-full\" data-map-name=\"fullMap\" class=\"grid-content\" data-map-clustered-options='{\n  {{#ifAll @root.request.params.query.distance @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"circle\": {\n    \"lat\": {{@root.request.params.query.lat}},\n    \"lng\": {{@root.request.params.query.lng}},\n    \"radius\": {{default (multiply @root.request.params.query.distance 1.60934) 0}},\n    \"color\": \"#7bc143\"\n  }\n  {{/ifAll ~}}\n  }'>\n    <!-- Markers for map -->\n    {{#each @root.data.search_data.map_results.hits.hits ~}}\n      {{#if _source.geo_coords ~}}\n        {{#each (arrayify _source.geo_coords) ~}}\n          {{#if @root.request.params.query.distance ~}}\n            {{#compare (itemAt ../fields.distance @index) \"<\" @root.request.params.query.distance ~}}\n              <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n                {{> event_map ../_source map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n              </marker>\n            {{/compare ~}}\n          {{else}}\n            <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n              {{> event_map ../_source map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n            </marker>\n          {{/if ~}}\n        {{/each ~}}\n      {{/if ~}}\n    {{/each ~}}\n  </div>\n  {{!-- else}}\n  <div class=\"grid-content\">\n    <div class=\"search-info\">\n      No location-specific results could be found\n    </div>\n  </div>\n  {{/ifAny ~--}}\n  {{else}}\n  <div class=\"grid-content\">\n    {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n  </div>\n  {{/if ~}}\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n    var $loader = $('#event-map-loader');\n    $loader.css('display', 'none');\n  });\n</script>",
        "events_search-foot": "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js\"></script>\n",
        "events_search-form": "{{> event_search_form instance_id=\"perm\"}}\n",
        "events_search-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{else}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{/if ~}}",
        "events_search": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search\" instance_id=\"perm\">\n  {{> event_search_results this}}\n</div>\n",
        "geo-lookup": "[\n  {{#eachJoin @root.data.search_data.hits.hits \",\"}}\n  {\n    \"display\": {{{stringify _source.display}}},\n    \"place\": {{{stringify _source.place}}},\n    {{#if _source.region}}\n    \"region\": {{{stringify _source.region}}},\n    {{/if}}\n    {{#if _source.population}}\n    \"population\": {{{default stringify _source.population 0}}},\n    {{/if}}\n    {{#if _source.county}}\n    \"county\": {{{stringify (slugify _source.county)}}},\n    {{else}}\n    {{#if _source.district}}\n    \"county\": {{{stringify (slugify _source.district)}}},\n    {{/if}}\n    {{/if}}\n    {{#if _source.ward}}\n    \"ward\": {{{stringify _source.ward}}},\n    {{/if}}\n    {{#if _source.nuts_3}}\n    \"nuts_3\": {{{stringify _source.nuts_3}}},\n    {{/if}}\n    {{#if _source.constituency}}\n    \"constituency\": {{{stringify _source.constituency}}},\n    {{/if}}\n    {{#if _source.country}}\n    \"country\": {{{stringify _source.country}}},\n    {{/if}}\n    \"point\": {{{stringify _source.point}}}\n  }\n  {{/eachJoin}}\n]",
        "humans": "/* TEAM */\nWeb Development & Design Manager: Calum MacÙisdean\nGitHub: calummacuisdean\nLocation: Edinburgh, Scotland\n\nPlatform Developer: Matthew Wilkes\nGitHub: tonicblue\nLocation: Edinburgh, Scotland\n\nDirector of Digital: David McNeill\nTwitter: david_mcneill\nLocation: Edinburgh, Scotland\n\n/* THANKS */\nDog: Sasha\nLocation: Edinburgh\n\nCoding chat: Alex Nuttgens\nWebsite: https://goodhq.org\nGitHub: anuttgens\n\nOffice support: Team Digital\nWebsite: https://scvo.org/digital\nTwitter: digiscot\n\nGuidance and testing: The SCVO Staff\nWebsite: https://scvo.org/about/staff-team\nTwitter: scvotweet\nFacebook: scvo1939\nYoutube: scvotv\nLinkedIn: scvo\nGoodHQ: scvo\n\n/* SITE */\nLast update: {{momentFormat (moment) 'YYYY-MM-DD'}}\nStandards: HTML, CSS, TS\nLanguage: English\nDoctype: HTML5\nIDE: Vim, Atom\nBack-end: SCVO->Router, Elasticsearch, Google Firebase, Google Analytics\nFront-end: Material Design Components, FontAwesome, Headroom, Swiper, CookieInfoScript, Browser-Update.org\nDevelopment: Node.js, NPM, GitHub\nProductivity: Slack, Trello\nOperating Systems: Arch Linux, Ubuntu",
        "newsletters_add-subscriptions": "{\n{{#eachJoin (filter (keyValue @root.request.body) \"key\" \"testIn\" \"list-\") ','}}\n{{#compare value \"===\" \"on\"}}\n\"{{{key}}}\":{{#blockStringify this}}{\n\"method\": \"POST\",\n\"url\": \"\\{{@root.secrets.vs_campaign_monitor.baseURL}}subscribers/{{substring key (length 'list-')}}.json\",\n\"body\": {{> newsletter_post_body}},\n\"auth\": {\"user\" : \"\\{{@root.secrets.vs_campaign_monitor.auth.user}}\"},\n\"json\": true\n}{{/blockStringify}}\n{{/compare}}\n{{/eachJoin}}\n}\n",
        "newsletters_options-templates-hack": "{\n{{#eachJoin (getKeys @root.data.templateOpts)  ','}}\n\"{{this}}\": {{{stringify (stringify (getProperty @root.data.templateOpts this))}}}\n{{/eachJoin}}\n}\n\n\n",
        "newsletters_remove-subscriptions": "{\n{{#eachJoin (filter (keyValue @root.request.body) \"key\" \"testIn\" \"list-\") ','}}\n{{#compare value \"===\" \"off\"}}\n\"{{{key}}}\":{{#blockStringify this}}{\n\"method\": \"POST\",\n   \"url\": \"\\{{@root.secrets.vs_campaign_monitor.baseURL}}subscribers/{{substring key (length 'list-')}}/unsubscribe.json\",\n   \"body\": {{> newsletter_post_body}},\n   \"auth\": {\"user\" : \"\\{{@root.secrets.vs_campaign_monitor.auth.user}}\"},\n   \"json\": true\n}\n{{/blockStringify}}\n{{/compare}}\n{{/eachJoin}}\n}\n",
        "opportunities_browse": "<div class=\"container-fluid container-content\">\n  {{> browse}}\n</div>",
        "opportunities_favourites": "<div id=\"detailed-results-container\" class=\"container-content content-favourites\">\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    My favourites\n  </h1>\n\n  {{#compare @root.data.favourite_opportunities.current.hits.total \"===\" 0}}\n    <p class=\"mdc-typography--body1\">\n      You don't yet have any opportunities in your favourites. To add an opportunity, click the &ensp;<strong><span class=\"far fa-star mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>&ensp;Favourite</strong>&ensp;button.\n    </p>\n  {{/compare}}\n\n  {{#compare @root.data.favourite_opportunities.current.hits.total \">\" 0}}\n    {{#each @root.data.favourite_opportunities.current.hits.hits ~}}\n      {{> opportunity_search_result _source}}\n    {{/each ~}}\n    <div class=\"foot\">\n      {{> pagination paging=@root.data.favourite_opportunities.current.pagination}}\n    </div>\n  {{/compare}}\n</div>",
        "opportunities_home": "<div class=\"container-fluid home-banner\">\n  <div class=\"banner-search overlay\" style=\"background-image: url('https://storage.googleapis.com/volunteerscotland-search/vs-search-homepage-image.jpg');\">\n    <div class=\"content page-content\">\n      <div class=\"search-content\">\n        <form id=\"search-view\" class=\"search-form\" action=\"/search\" method=\"GET\">\n          <input type=\"hidden\" name=\"lat\" value=\"{{@root.request.params.query.lat}}\" id=\"location-lat\" />\n          <input type=\"hidden\" name=\"lng\" value=\"{{@root.request.params.query.lng}}\" id=\"location-lng\" />\n          <input type=\"hidden\" name=\"la\" value=\"{{@root.request.params.query.la}}\" id=\"location-la\" />\n          <input type=\"hidden\" name=\"sort\" value=\"{{@root.request.params.query.sort}}\" id=\"default-sort\" />\n          <h2 class=\"mdc-typography--headline6\">\n            <span class=\"mdc-typography--headline4\">Search</span> for an opportunity\n          </h2>\n          <div class=\"mdc-layout-grid b-padding\">\n            <div class=\"mdc-layout-grid__inner\">\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                <div class=\"mdc-text-field mdc-text-field--box mdc-text-field--with-leading-icon\" data-mdc-auto-init=\"MDCTextField\">\n                  <span class=\"far fa-map-marker-alt mdc-text-field__icon geo-lookup\" tabindex=\"0\" title=\"Find my location\"></span>\n                  <input type=\"text\" id=\"where-opportunities\" name=\"location\" class=\"mdc-text-field__input\" value=\"{{@root.request.params.query.location}}\" placeholder=\"\" data-lpignore=\"true\" data-location-search='{\n                    \"latSelector\": \"[name=\\\"lat\\\"]\",\n                    \"lngSelector\": \"[name=\\\"lng\\\"]\",\n                    \"laSelector\": \"[name=\\\"la\\\"]\",\n                    \"locationServicesSelector\": \".geo-lookup\"\n                  }'>\n                  <label for=\"where-opportunities\" class=\"mdc-floating-label\">\n                    Location\n                  </label>\n                  <div class=\"mdc-line-ripple\"></div>\n                </div>\n                <!-- <div class=\"after-textfield-action geo-lookup\">Find me</div> -->\n              </div>\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone filter-distance\">\n                <div class=\"mdc-layout-grid\">\n                  <div class=\"mdc-layout-grid__inner\">\n                    <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                      <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n                        <span class=\"mdc-select__dropdown-icon\"></span>\n                        <select class=\"mdc-select__native-control\" id=\"distance\" name=\"distance\">\n                          {{#each (split \"5,10,15,20,25,30,35,40,45,50\" \",\")}}\n                            <option value=\"{{this}}\" {{#compare (default @root.request.params.query.distance \"10\") \"===\" this}}selected{{/compare}}>{{this}} miles</option>\n                          {{/each}}\n                        </select>\n                        <label class=\"mdc-floating-label mdc-select__label--float-above\" for=\"distance\">\n                          Within\n                        </label>\n                        <div class=\"mdc-line-ripple\"></div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-5-tablet mdc-layout-grid__cell--span-4-phone\">\n                <div class=\"mdc-text-field mdc-text-field--box mdc-text-field-tt\" data-mdc-auto-init=\"MDCTextField\">\n                  <input type=\"text\" id=\"what-opportunities\" name=\"keywords\" class=\"mdc-text-field__input\" placeholder=\"\" data-lpignore=\"true\" data-typeahead='{\n                    \"typeaheadOptions\": {\n                      \"highlight\": true,\n                      \"minlength\": 0\n                    },\n                    \"outputs\": [\n                      {\n                        \"type\": \"element\",\n                        \"options\": {\n                          \"containerSelectorTemplate\": \"#search-terms\",\n                          \"testSelectorTemplate\": \"#\\{{dataset.name}}-\\{{item.value}}\",\n                          \"removeSelectorTemplate\": \"#remove-\\{{dataset.name}}-\\{{item.value}}\",\n                          \"template\": {{#blockStringify this~}}\n                            <div class=\"mdc-chip mdc-theme--primary-bg\" tabindex=\"0\" id=\"\\{{dataset.name}}-\\{{item.value}}\">\n                              <div class=\"mdc-chip__text\">\\{{item.other}}</div>\n                              <input type=\"hidden\" name=\"\\{{dataset.name}}[]\" value=\"\\{{item.value}}\">\n                              <i class=\"far fa-times-circle mdc-chip__icon mdc-chip__icon--trailing\" tabindex=\"0\" role=\"button\" id=\"remove-\\{{dataset.name}}-\\{{item.value}}\"></i>\n                            </div>\n                          {{~/blockStringify}}\n                        }\n                      },\n                      {\n                        \"type\": \"prop\",\n                        \"options\": {\n                          \"selectorTemplate\": \"#what-opportunities\",\n                          \"valueTemplate\": \"\"\n                        }\n                      }\n                    ],\n                    \"datasets\": [\n                      {{#each @root.context.metaData.terms}}\n                      {{#each termGroups}}\n                      {\n                        \"name\": {{{stringify ../key}}},\n                        \"templates\": {\n                        {{#compare (length ../termGroups) 1}}\n                        \"header\": \"<h3>{{{../label}}}</h3>\"\n                        {{else}}\n                        \"header\": \"<h3>{{{../label}}} &gt; {{{label}}}</h3>\"\n                        {{/compare}}\n                      },\n                      \"display\": \"other\",\n                      \"items\": [\n                        {{#each terms}}\n                        {\n                          \"label\": {{{stringify (concat ../key ' ' textBag)}}},\n                          \"value\": {{{stringify key}}},\n                          \"other\": {{{stringify label}}}\n                        }{{#unless @last}},{{/unless}}\n                        {{/each}}\n                      ]\n                      }{{#unlessAll @last @../last}},{{/unlessAll}}\n                      {{/each}}\n                    {{/each}}\n                    ]\n                  }'>\n                  <label for=\"what-opportunities\" class=\"mdc-floating-label\">\n                    Keywords\n                  </label>\n                  <div class=\"mdc-line-ripple\"></div>\n                </div>\n              </div>\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-4-phone\">\n                <button type=\"submit\" id=\"search-opportunities\" class=\"mdc-button mdc-button--raised mdc-button--large mdc-button--arrow mdc-text-field--box mdc-button--search mdc-ripple-surface mdc-ripple-surface--primary\" data-mdc-auto-init=\"MDCRipple\">\n                  Search\n                  <span class=\"far fa-search\" aria-hidden=\"true\"></span>\n                </button>\n              </div>\n            </div>\n            <div class=\"mdc-layout-grid__inner\">\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                <div id=\"search-terms\" class=\"mdc-chip-set\"></div>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"home-browse h-padding\">\n    <h3 class=\"mdc-drawer__content-heading cursor-pointer h-padding-full\" data-collapse-target=\"#home-browse-collapse\" role=\"button\" aria-pressed=\"false\" aria-label=\"Show browse section\" tabindex=\"0\">\n      <span class=\"mdc-button mdc-button--raised\">\n        Browse\n        <span class=\"mdc-icon-toggle\">\n          <span class=\"far fa-chevron-down\" aria-hidden=\"true\"></span>\n        </span>\n      </span>\n      <span class=\"mdc-typography--body2\">\n        By theme, activity, or area\n      </span>\n    </h3>\n    <div id=\"home-browse-collapse\" style=\"display: none;\">\n      {{> browse eventContext=\"category-browser-home\"}}\n    </div>\n  </div>\n\n{{#if @root.data.auth ~}}\n    <div class=\"mdc-layout-grid home-heading\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <h2 class=\"mdc-typography--headline7\">\n            Your favourites\n          </h2>\n        </div>\n      </div>\n    </div>\n    <div class=\"home-content-primary\">\n      {{#>components_horizontal_card_scroller\n        outerClasses=\"home-favourites\"\n        scrollLeftIconClasses=\"fal fa-fw fa-angle-left\"\n        scrollRightIconClasses=\"fal fa-fw fa-angle-right\"\n        itemClasses=\"favourites-primary-content\"\n        items=(arrayConcat\n          (map @root.data.opportunitySupplimentary.favourites_current.hits.hits (getProp \"_source\"))\n        )\n        itemsPartial=\"opportunity_mini\"\n        moreUrl=\"/search\"\n        moreText=\"Find more opportunities for your favourites\"}}\n        <p class=\"mdc-typography--body1 h-padding v-margin-none\">\n          There are currently no opportunities in your favourites, if you favourite an opportunity it will appear here for easy reference.\n        </p>\n      {{/components_horizontal_card_scroller}}\n    </div>\n{{/if ~}}\n\n{{#compare @root.data.opportunitySupplimentary.home_latest.hits.total \">\" 0}}\n    <div class=\"mdc-layout-grid home-heading\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          {{#compare @root.data.opportunitySupplimentary.home_latest_personalised.hits.total \">\" 0}}\n            <h2 class=\"mdc-typography--headline7\">\n              Your latest opportunities&ensp;\n              <span class=\"mdc-typography--body1\">\n                <a href=\"/searches\">Your searches</a>\n              </span>\n            </h2>\n          {{else}}\n            <div class=\"mdc-typography--headline7\">\n              Latest opportunities &ensp;\n              <span class=\"mdc-typography--body1\">\n                <a href=\"/search?sort=newest&page=2\">Find more</a>\n              </span>\n            </div>\n          {{/compare}}\n        </div>\n      </div>\n    </div>\n    <div class=\"home-content-primary\">\n      {{#>components_horizontal_card_scroller\n        outerClasses=\"home-latest\"\n        scrollLeftIconClasses=\"fal fa-fw fa-angle-left\"\n        scrollRightIconClasses=\"fal fa-fw fa-angle-right\"\n        itemClasses=\"latest-primary-content latest-primary-content-personalised\"\n        items=(if (any @root.data.opportunitySupplimentary.home_latest_personalised.hits.hits)\n          (map @root.data.opportunitySupplimentary.home_latest_personalised.hits.hits (getProp \"_source\"))\n          else=(map @root.data.opportunitySupplimentary.home_latest.hits.hits (getProp \"_source\"))\n        )\n        itemsPartial=\"opportunity_mini\"\n        moreUrl=(if\n          (compare @root.data.opportunitySupplimentary.home_latest_personalised.hits.total \">\" 0)\n          \"/search?sort=newest\"\n          else=\"/search?sort=newest&page=2\"\n        )\n        moreText=(if\n          (compare @root.data.opportunitySupplimentary.home_latest_personalised.hits.total \">\" 0)\n          \"All latest opportunities\"\n          else=\"Find more opportunities\"\n        )}}\n      {{/components_horizontal_card_scroller}}\n    </div>\n  </div>\n{{/compare}}\n\n{{#if @root.data.auth.email ~}}\n  {{#compare @root.data.opportunitySupplimentary.recently_viewed.hits.total \">\" 0 ~}}\n    <div class=\"mdc-layout-grid home-heading\">\n      <div class=\"mdc-layout-grid__inner\">\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          <div class=\"mdc-typography--headline7\">\n            Recently viewed&ensp;\n            <span class=\"mdc-typography--body1\">\n                <a href=\"/search?sort=newest&page=1\">Find more</a>\n              </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"home-content-primary\">\n      {{#>components_horizontal_card_scroller\n        outerClasses=\"home-latest\"\n        scrollLeftIconClasses=\"fal fa-fw fa-angle-left\"\n        scrollRightIconClasses=\"fal fa-fw fa-angle-right\"\n        itemClasses=\"latest-primary-content\"\n        items=(map\n          (sortByIndex @root.data.opportunitySupplimentary.recently_viewed.hits.hits (split @root.request.cookies.recently_viewed ',') '_id') (getProp \"_source\")\n        )\n        itemsPartial=\"opportunity_mini\"\n        moreUrl=\"/search?sort=newest&page=1\"\n        moreText=\"Find more opportunities\"}}\n      {{/components_horizontal_card_scroller}}\n    </div>\n  {{/compare ~}}\n{{/if ~}}\n</div>",
        "opportunities_legacy-pdf-definition": "{\n  \"pageSize\": \"A4\",\n  \"pageMargins\": [30, 120, 30, 100],\n  \"styles\": {\n    \"title\": {\n      \"fontSize\": 20,\n      \"bold\": true\n    },\n    \"subtitle\": {\n      \"fontSize\": 16\n    },\n    \"h1\": {\n      \"fontSize\": 18,\n      \"bold\": true,\n      \"margin\": [0, 10, 0, 5]\n    },\n    \"h2\": {\n      \"fontSize\": 16,\n      \"bold\": true,\n      \"margin\": [0, 10, 0, 5]\n    },\n    \"h3\": {\n      \"fontSize\": 14,\n      \"bold\": true\n    }\n  },\n  \"content\": [\n    {\n      \"_map\": {\n        \"_eval\": \"data.primaryResponse.hits.hits\"\n      },\n      \"each(x)\": [{\n          \"style\": \"h1\",\n          \"text\": {\n            \"_eval\": \"x._source.title\"\n          }\n        },\n        {\n          \"style\": \"h2\",\n          \"text\": \"Summary\"\n        },\n        {\n          \"text\": {\n            \"_eval\": \"x._source.description\"\n          }\n        }\n      ]\n    },\n    {\n      \"columns\": [\n        {\n          \"width\": \"33%\",\n          \"text\": [\n            {\n              \"text\": \"Contact Us\\n\",\n              \"fontSize\": 14,\n              \"bold\": true\n            }, {\n              \"text\": \"@scvo.org.uk\\n\",\n              \"link\": \"mailto:@scvo.org.uk\",\n              \"fontSize\": 10\n            },\n            {\n              \"text\": \"\\n\",\n              \"link\": \"tel:\",\n              \"fontSize\": 10\n            },\n            {\n              \"text\": \"@\",\n              \"link\": \"https://twitter.com/\",\n              \"fontSize\": 10\n            }\n          ]\n        },\n        {\n          \"width\": \"66%\",\n          \"text\": [\n            {\n              \"text\": \"About Us\\n\",\n              \"fontSize\": 14,\n              \"bold\": true\n            },\n            {\n              \"text\": \"Volunteer Scotland Search is run in partnership between Volunteer Scotland and the Scottish Council for Voluntary Organisations.\\n\",\n              \"fontSize\": 10\n            },\n            {\n              \"text\": \"This website is maintained by the Scottish Council for Voluntary Organisations the umbrella body for Scotland\\\"s voluntary sector.\\n\",\n              \"fontSize\": 10\n            }\n          ]\n        }\n      ],\n      \"margin\": [30, 240]\n    }\n\n  ]\n}",
        "opportunities_legacy-pdf-footer": "[\n  {\n    \"_if\": \"currentPage > 1\",\n    \"then\": {\n      \"canvas\": [\n        {\n          \"type\": \"line\",\n          \"x1\": -15,\n          \"y1\": 5,\n          \"x2\": 550,\n          \"y2\": 5,\n          \"lineWidth\": 1\n        }\n      ],\n      \"margin\": [30, 5]\n    }\n  },\n  {\n    \"_if\": \"currentPage > 1\",\n    \"then\":\n    {\n      \"text\": \"© 2019 The Scottish Council for Voluntary Organisations (SCVO) is a Scottish Charitable Incorporated Organisation. Registration number SC003558.\",\n      \"fontSize\": 10,\n      \"margin\": [30, 5]\n    }\n  },\n  {\n    \"_if\": \"currentPage > 1\",\n    \"then\": {\n      \"columns\": [\n        {\n          \"width\": \"*\",\n          \"text\": \"Page: ${currentPage} of ${pageCount}\",\n          \"fontSize\": 10\n        },\n        {\n          \"width\": \"*\",\n          \"text\": {\n            \"_eval\": \"jsone.dateFormat('dddd, Do MMMM YYYY, HH:mm:ss')\"\n          },\n          \"fontSize\": 10,\n          \"alignment\": \"right\"\n        }\n      ],\n      \"margin\": [30, 5]\n    }\n  }\n]",
        "opportunities_legacy-pdf-header": "[\n  {\n    \"_if\": \"currentPage > 1\",\n    \"then\": {\n      \"canvas\": [\n        {\n          \"type\": \"line\",\n          \"x1\": -15,\n          \"y1\": 5,\n          \"x2\": 550,\n          \"y2\": 5,\n          \"lineWidth\": 1\n        }\n      ],\n      \"margin\": [30, 5]\n    }\n  }\n]",
        "opportunities_map-data": "{\n  {{#if @root.request.params.query.returnRegionsNotPoints ~}}\n  \"areas\": [\n  {{#each @root.data.search_data.map_regions.hits.hits ~}}\n  {\n    \"place\": {{{safeStringify _source.place.[0]}}},\n    \"point\": {{{safeStringify _source.point}}},\n    \"Id\": \"{{_source.Id}}\",\n    \"shape\": {{{safeStringify _source.shape}}}\n  }\n  {{#unless @last}},{{/unless}}\n  {{/each ~}}\n  ]{{#if @root.data.search_data.map_results.hits.hits ~}},\n  \"aggregations\": {{{safeStringify @root.data.search_data.map_aggregations.aggregations}}}\n  {{/if ~}}\n  {{else}}\n  \"points\": [\n  {{#each @root.data.search_data.map_results.hits.hits ~}}\n  {\n    \"title\": \"{{_source.title}}\",\n    \"subtitle\": \"{{_source.organisation_name}}\",\n    \"URL\": \"/opportunity/{{_source.Id}}/{{_source.title_slug}}{{> query_search}}\",\n    \"geo_coords\": {\n      \"lat\": {{_source.geo_coords.lat}},\n      \"lon\": {{_source.geo_coords.lon}}\n    }\n  }{{#unless @last}},{{/unless}}\n  {{/each ~}}\n  ]\n  {{/if ~}}\n}",
        "opportunities_map-foot": "<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js\"></script>\n",
        "opportunities_map-head": "<style>\n  html {\n    overflow: hidden;\n  }\n</style>\n",
        "opportunities_map-region-data": "{\n  \"areas\": [\n    {{#each @root.data.search_data.map_regions.hits.hits ~}}\n    {\n    \"place\": {{{safeStringify _source.place.[0]}}},\n    \"point\": {{{safeStringify _source.point}}},\n    \"Id\": \"{{_source.Id}}\",\n    \"shape\": {{{safeStringify _source.shape}}}\n    }\n    {{#unless @last}},{{/unless}}\n    {{/each}}\n  ]{{#if @root.data.search_data.map_results.hits.hits}},\n    \"aggregations\": {{{safeStringify @root.data.search_data.map_aggregations.aggregations}}}\n  {{/if}}\n}\n",
        "opportunities_map-search-form": "{{> opportunity_search_form instance_id=\"perm\"}}",
        "opportunities_map": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search container-map\">\n  <div class=\"mdc-layout-grid head\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n        {{#> components_tab_bar}}\n         {{> search_button}}\n         {{> components_tab url=(concat \"/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/search\")}}\n         {{> components_tab url=(concat \"/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/map\")}}\n        {{/components_tab_bar}}\n      </div>\n      {{#compare (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \">\" 0 ~}}\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone pagination-desktop\">\n        <div class=\"mdc-typography--body2 pull-right\">\n          <a href=\"/search{{> query_search}}&exclude=locations\">List {{subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count}} {{#compare @root.data.location_data.locations_results.hits.total \">\" 0}}other{{/compare}} volunteering {{inflect (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \"opportunity\" \"opportunities\"}}</a>\n          {{#compare @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets.length \">\" 0 ~}}\n          available\n          {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n          <span class=\"areas areas-fulltext\">\n          {{/compare ~}}\n          {{#with @root.data.location_data.la_results.aggregations.local_authority_areas ~}}\n          {{#each buckets ~}}\n          {{#if (contains (map @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets (getProp \"key\")) (replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\")) ~}}\n          <span class=\"area\">{{{replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\"}}}</span>\n          {{/if ~}}\n          {{#if @last}}{{#compare @root.data.location_data.home_results.hits.total \">\" 0}}\n          {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n          </span>\n          {{/compare ~}}\n          from home.{{/compare}}{{/if}}\n          {{/each ~}}\n          {{/with ~}}\n          {{else}}\n          available from home.\n          {{/compare ~}}\n        </div>\n      </div>\n      {{/compare ~}}\n    </div>\n  </div>\n  {{#if @root.data.search_data.map_results.pagination.totalResults ~}}\n  {{!--#ifAny (compare @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count \">\" 0) (compare @root.request.params.query.location \"===\" \"\") ~--}}\n  <div class=\"card-loader\" id=\"opportunity-map-loader\" style=\"display: flex\">\n    <div class=\"card-loader-inner\">\n      <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n    </div>\n  </div>\n  <div id=\"map-full\" data-map-name=\"fullMap\" class=\"grid-content\" data-map-clustered-options='{\n  {{#ifAll @root.request.params.query.distance @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"circle\": {\n    \"lat\": {{@root.request.params.query.lat}},\n    \"lng\": {{@root.request.params.query.lng}},\n    \"radius\": {{default (multiply @root.request.params.query.distance 1.60934) 0}},\n    \"color\": \"#7bc143\"\n  }\n  {{/ifAll ~}}\n  }'>\n    <!-- Markers for map -->\n    {{#each @root.data.search_data.map_results.hits.hits ~}}\n      {{#if _source.geo_coords ~}}\n        {{#each (arrayify _source.geo_coords) ~}}\n          {{#if @root.request.params.query.distance ~}}\n            {{#compare (itemAt ../fields.distance @index) \"<\" @root.request.params.query.distance ~}}\n              <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n                {{> opportunity_map ../_source map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n              </marker>\n            {{/compare ~}}\n          {{else}}\n            <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n              {{> opportunity_map ../_source map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n            </marker>\n          {{/if ~}}\n        {{/each ~}}\n      {{/if ~}}\n    {{/each ~}}\n  </div>\n  {{!-- else}}\n  <div class=\"grid-content\">\n    <div class=\"search-info\">\n      No location-specific results could be found\n    </div>\n  </div>\n  {{/ifAny ~--}}\n  {{else}}\n  <div class=\"grid-content\">\n    {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n  </div>\n  {{/if ~}}\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n    var $loader = $('#opportunity-map-loader');\n    $loader.css('display', 'none');\n  });\n</script>",
        "opportunities_notes": "<div id=\"detailed-results-container\" class=\"container-content content-notes\">\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    My notes\n  </h1>\n\n  {{#compare @root.data.notes_opportunities.open.hits.total \"===\" 0}}\n  <p class=\"mdc-typography--body1\">\n    You don't have notes on any open opportunities. To write a note, navigate to the full details of a opportunity then enter the&ensp;<strong><span class=\"far fa-edit mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>&ensp;Notes</strong>&ensp;tab, type out some text, then click the&ensp;<strong><span class=\"far fa-save mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>&ensp;Save notes</strong>&ensp;button.\n  </p>\n  {{/compare}}\n\n  {{#compare @root.data.notes_opportunities.open.hits.total \">\" 0}}\n    {{#each @root.data.notes_opportunities.open.hits.hits ~}}\n      {{#compare (trim (getProperty @root.data.profileInfo.notes _source.Id)) \"!==\" \"\" ~}}\n        {{> opportunity_search_result _source}}\n      {{/compare ~}}\n    {{/each ~}}\n    <div class=\"foot\">\n      {{> pagination paging=@root.data.notes_opportunities.open.pagination}}\n    </div>\n  {{/compare}}\n\n  {{#compare @root.data.notes_opportunities.closed.hits.total \">\" 0}}\n    <h2 class=\"mdc-typography--headline5 v-margin-full\">\n      Closed opportunities\n    </h2>\n    {{#each @root.data.notes_opportunities.closed.hits.hits ~}}\n      {{#compare (trim (getProperty @root.data.profileInfo.notes _source.Id)) \"!==\" \"\" ~}}\n        {{> opportunity_search_result _source}}\n      {{/compare ~}}\n    {{/each ~}}\n    <div class=\"foot\">\n      {{> pagination paging=@root.data.notes_opportunities.closed.pagination}}\n    </div>\n  {{/compare}}\n</div>",
        "opportunities_opportunities-in": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search\">\n  <h1 class=\"mdc-typography--headline4\">\n    {{{getProperty @root.data.termsMaps.advertised_areas.slugsMap (concat @root.request.params.local_authority \".term\")}}}\n    volunteering opportunities\n  </h1>\n\n  {{#if @root.data.search_data.detailed_results.pagination.totalResults ~}}\n  <div class=\"container-content container-map\">\n    <div id=\"map-content-primary\" data-map-name=\"fullMap\" class=\"grid-content\" data-map-clustered-options='{\n   {{#ifAll @root.request.params.query.distance @root.request.params.query.distance @root.request.params.query.lat @root.request.params.query.lng ~}}\n    \"circle\": {\n      \"lat\": {{@root.request.params.query.lat}},\n      \"lng\": {{@root.request.params.query.lng}},\n      \"radius\": {{#if @root.request.params.query.location}}{{default (multiply @root.request.params.query.distance 1.60934) 0}}{{else}}20{{/if}},\n      \"color\": {{#if @root.request.params.query.location}}\"#7bc143\"{{else}}\"rgba(0,0,0,0)\"{{/if}}\n    }\n  {{/ifAll ~}}\n  }'>\n      {{#each @root.data.search_data.map_results.hits.hits ~}}\n        {{#if _source.geo_opportunity_info ~}}\n          {{#each (arrayify _source.geo_opportunity_info) ~}}\n            {{#compare (replace (replace (replace (replace admin_district \" and \" \" & \") \" Islands\" \"\") \"City of \" \"\") \" City\" \"\") \"===\" (getProperty @root.data.termsMaps.advertised_areas.slugsMap (concat @root.request.params.local_authority \".term\"))}}\n              {{#if @root.request.params.query.distance ~}}\n                {{#compare (itemAt ../fields.distance @index) \"<\" @root.request.params.query.distance ~}}\n                  <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{latitude}}\" data-lng=\"{{longitude}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n                    {{> opportunity_map ../_source}}\n                  </marker>\n                {{/compare ~}}\n              {{else}}\n                <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{latitude}}\" data-lng=\"{{longitude}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n                  {{> opportunity_map ../_source}}\n                </marker>\n              {{/if ~}}\n            {{/compare ~}}\n          {{/each ~}}\n        {{/if ~}}\n      {{/each ~}}\n    </div>\n  </div>\n\n  <div class=\"mdc-layout-grid grid-content\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-9-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n        <div class=\"search-info\">\n          Volunteering opportunities advertised\n          {{#if @root.request.params.query.location ~}}\n          near\n          {{replace (replace @root.request.params.query.location (getProperty @root.data.termsMaps.advertised_areas.slugsMap (concat @root.request.params.local_authority \".term\")) \"\") \", \" \"\"}}\n          or\n          {{/if ~}}\n          across\n          {{getProperty @root.data.termsMaps.advertised_areas.slugsMap (concat @root.request.params.local_authority \".term\")}}:\n          <strong>{{@root.data.search_data.detailed_results.hits.total}}</strong>\n        </div>\n      </div>\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone action\">\n        {{#compare @root.data.search_data.detailed_results.hits.total \">\" 0 ~}}\n          <form action=\"{{{@root.request.url.path}}}\" method=\"GET\">\n            {{#each (split \"volunteersearch_types,activities,themes,services,age_groups\" \",\")}}\n              {{#if (getProperty @root.request.params.query this) ~}}\n                {{#each (arrayify (getProperty @root.request.params.query this)) ~}}\n                  <input type=\"hidden\" name=\"{{../this}}[]\" value=\"{{this}}\" />\n                {{/each ~}}\n              {{/if ~}}\n            {{/each ~}}\n            {{#each (split \"keywords,location,lat,lng,la\" \",\")}}\n              {{#if (getProperty @root.request.params.query this) ~}}\n                <input type=\"hidden\" name=\"{{this}}\" value=\"{{getProperty @root.request.params.query this}}\" />\n              {{/if ~}}\n            {{/each ~}}\n            <input type=\"hidden\" name=\"distance\" value=\"{{#if @root.request.params.query.distance}}{{@root.request.params.query.distance}}{{else}}10{{/if}}\" />\n            {{> opportunity_search_sort}}\n          </form>\n        {{/compare ~}}\n      </div>\n    </div>\n  </div>\n\n  {{#each @root.data.search_data.detailed_results.hits.hits ~}}\n  {{> opportunity_search_result _source sort=sort distance=fields.distance.[0]}}\n  {{/each ~}}\n\n  <div class=\"foot\">\n    {{> pagination firstLastNavigation=true paging=@root.data.search_data.detailed_results.pagination}}\n  </div>\n\n  {{else}}\n    {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n  {{/if ~}}\n</div>\n",
        "opportunities_opportunity-foot": "<script src=\"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js\"></script>\n<script type=\"text/javascript\">\n  var mdeEditors = [];\n  $(document).ready(function() {\n    {{#ifAll @root.data.auth (compare @root.data.primaryResponse.hits.total \">\" 0) ~}}\n      var recentlyViewed = volunteerscotland.getCookie('recently_viewed') || '';\n      // console.log('Recently Viewed:', recentlyViewed, '| opportunity Id:', opportunityId);\n      recentlyViewed = recentlyViewed.split(',');\n      recentlyViewed.unshift(opportunityId);\n      var newRecentlyViewed = [];\n      for (var i = 0; i < Math.min(recentlyViewed.length, 10); ++i) {\n        var item = recentlyViewed[i];\n        if (item && newRecentlyViewed.indexOf(item) === -1) {\n          newRecentlyViewed.push(item);\n        }\n      };\n      newRecentlyViewed = newRecentlyViewed.join(',');\n      // console.log('New Recently Viewed:', newRecentlyViewed);\n      volunteerscotland.setCookie('recently_viewed', newRecentlyViewed, 7);\n    {{/ifAll ~}}\n  });\n</script>\n",
        "opportunities_opportunity-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n{{#with data.primaryResponse.hits.hits.[0]._source ~}}\n\n<title>{{title}} with {{organisation_name}} – Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n<meta itemprop=\"name\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n<meta name=\"twitter:title\" content=\"{{title}} with {{organisation_name}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n\n{{#ifAny organisation.logo_url og_image ../og_image ~}}\n<meta property=\"og:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n<meta property=\"og:image:height\" content=\"250\">\n<meta property=\"og:image:width\" content=\"250\">\n<meta itemprop=\"image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n<meta name=\"twitter:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n\n{{#ifAny og_summary description ../og_summary ../description ~}}\n<meta property=\"og:summary\" content=\"{{stripTags (regexReplace (default og_summary (default ../og_summary (default description ../description))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta itemprop=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta name=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta property=\"og:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta name=\"twitter:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n\n<!-- Twitter Card data -->\n<meta name=\"twitter:card\" content=\"summary\" />\n<meta name=\"twitter:site\" content=\"@scvotweet\">\n<meta name=\"twitter:creator\" content=\"@scvotweet\">\n<!-- Twitter summary card with large image must be at least 280x150px -->\n<!-- <meta name=\"twitter:image:src\" content=\"http://www.example.com/image.jpg\"> -->\n\n<!-- Open Graph data -->\n<meta property=\"og:type\" content=\"website\" />\n{{#if Id ~}}\n<meta property=\"og:url\" content=\"https://search.volunteerscotland.net/opportunity/{{Id}}/{{title_slug}}\" />\n{{/if ~}}\n<meta property=\"og:site_name\" content=\"Volunteer Scotland\" />\n\n<script type=\"application/ld+json\" data-dynamic=\"true\">\n  {{> opportunity_json_ld}}\n</script>\n\n{{/with ~}}\n{{else}}\n<title>Opportunity – Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"Opportunity – Volunteer Scotland Search\" data-dynamic=\"true\">\n{{/if ~}}\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css\">\n",
        "opportunities_opportunity-test-or-nothing": "{{#if @root.data.trueResponse.hits.hits.[0]}}{{{stringify @root.data.trueResponse}}}{{else}}{{#unless @root.request.params.query.optimize}}{{else}}\n  {\n  \"took\": 5,\n  \"timed_out\": false,\n  \"_shards\": {\n  \"total\": 5,\n  \"successful\": 5,\n  \"skipped\": 0,\n  \"failed\": 0\n  },\n  \"hits\": {\n  \"total\": 1,\n  \"max_score\": 9.9895735,\n  \"hits\": [\n  {\n  \"_index\": \"web-content-2018-04-09-1925\",\n  \"_type\": \"milo-volunteering-opportunity\",\n  \"_id\": \"a000000000IaMAT3st\",\n  \"_score\": 9.9895735,\n  \"_source\": {\n  \"sunday_morning\": null,\n  \"opportunity_contact_phone\": \"0131 0090210\",\n  \"monday_morning\": null,\n  \"opportunity_contact_last_name\": \"Thomas\",\n  \"opportunity_contact_first_name\": \"Testerton\",\n  \"advertised_areas\": [],\n  \"frequency_commitment_details\": null,\n  \"organisation_slug\": \"i-like-testing-things-a000000000IaMAT3st\",\n  \"themes\": [\n  \"Older People\"\n  ],\n  \"milo_ref\": \"VO00000\",\n  \"organisation_id\": \"a000000000IaMAT3st\",\n  \"geo_coords\": [\n  {\n  \"lon\": 4.633007,\n  \"lat\": 55.468064\n  }\n  ],\n  \"organisation_website\": \"http://www.example.com/\",\n  \"timings_description\": \"As and when required.\",\n  \"wednesday_evening\": null,\n  \"tuesday_morning\": null,\n  \"themes_slugs\": [\n  \"older-people\"\n  ],\n  \"goodhq_organisation\": {\n  \"image_url\": null\n  },\n  \"saturday_afternoon\": null,\n  \"saturday_morning\": null,\n  \"activities_slugs\": [\n  \"care-support-worker\"\n  ],\n  \"maximum_age\": 100,\n  \"date_last_modified\": 1561655086000,\n  \"slug\": \"veterans-support-assistant-a0g1p00000atehzaaf\",\n  \"availability_slugs\": [],\n  \"organisation_name_slug\": \"action-on-testing-east-testshire\",\n  \"postcode\": \"KA8 8AG\",\n  \"organisation_name\": \"Action on Testing (East Testshire)\",\n  \"organisation_contact_last_name\": \"Testerton\",\n  \"saturday_evening\": null,\n  \"friday_evening\": null,\n  \"wednesday_afternoon\": null,\n  \"friday_afternoon\": null,\n  \"sunday_afternoon\": null,\n  \"organisation_contact_email\": \"alex.nuttgens@scvo.org.uk\",\n  \"tuesday_afternoon\": null,\n  \"tsi_contact_email\": \"anuttgens@gmail.com\",\n  \"weblink_tooltip\": null,\n  \"weblink\": null,\n  \"Id\": \"a0g1p00000AtEhzAAF\",\n  \"description_html\": \"<p>Hello there</p>\\n\",\n  \"end_date\": null,\n  \"tsi_contact_first_name\": \"Volunteering\",\n  \"monday_evening\": null,\n  \"support_options\": \"Named Contact For Volunteer\",\n  \"organisation_contact_first_name\": \"Thomas\",\n  \"volunteersearch_type_slugs\": [],\n  \"sunday_evening\": null,\n  \"description\": \"You have a great chance to join our exciting new ‘Test’ team to help offer testing and more testing to testers aged 18 or over, their test-subjects and test-managers with testing or testing accessories. \",\n  \"availability\": [],\n  \"title\": \"Testing Assistant\",\n  \"volunteersearch_type\": [],\n  \"travel_details\": null,\n  \"taster_details\": null,\n  \"minimum_age\": 18,\n  \"thursday_afternoon\": null,\n  \"travel_expenses\": \"Yes\",\n  \"volunteersearch_age_group\": [\n  \"18 and over\"\n  ],\n  \"volunteersearch_age_group_slugs\": [\n  \"18-and-over\"\n  ],\n  \"experience_required\": \"· Knowledge of or willingness to learn about issues affecting testers and test inclined people.\",\n  \"tuesday_evening\": null,\n  \"opportunity_contact_email\": \"thomas.denholm@hearingloss.org.uk\",\n  \"volunteersearch_support_option\": [\n  \"Taster Available\"\n  ],\n  \"wednesday_morning\": null,\n  \"opportunity_contact_via_tsi\": false,\n  \"volunteersearch_support_option_slugs\": [\n  \"taster-available\"\n  ],\n  \"start_date\": 1547078400000,\n  \"monday_afternoon\": null,\n  \"weblink_title\": null,\n  \"thursday_morning\": null,\n  \"thursday_evening\": null,\n  \"opportunity_contact_via_organisation\": true,\n  \"organisation_aims_and_objectives\": \"To provide support and advice to hearing aid users, their families, carers, community groups and professionals.\",\n  \"taster_available\": true,\n  \"restriction_details\": null,\n  \"url\": \"https://search.volunteerscotland.net/opportunity/veterans-support-assistant-a0g1p00000atehzaaf\",\n  \"tsi_name\": \"South Ayrshire\",\n  \"friday_morning\": null,\n  \"tsi_contact_last_name\": \"Team\",\n  \"activities\": [\n  \"Care / Support Worker\"\n  ],\n  \"title_slug\": \"veterans-support-assistant\",\n  \"expenses_paid\": null\n  }\n  }\n  ]\n  },\n  \"pagination\": {\n  \"from\": 0,\n  \"size\": 1,\n  \"totalResults\": 1,\n  \"totalPages\": 1,\n  \"currentPage\": 1,\n  \"nextPage\": null,\n  \"prevPage\": null,\n  \"pageRange\": [\n  {\n  \"pageNumber\": 1,\n  \"distance\": 0\n  }\n  ]\n  },\n  \"request\": {\n  \"index\": \"{$../../../elasticsearch-index.txt}\",\n  \"type\": \"milo-volunteering-opportunity\",\n  \"body\": {\n  \"size\": 1,\n  \"_source\": [\n  \"Id\",\n  \"slug\",\n  \"title_slug\",\n  \"date_last_modified\",\n  \"milo_ref\",\n  \"start_date\",\n  \"themes\",\n  \"themes_slugs\",\n  \"description\",\n  \"description_html\",\n  \"end_date\",\n  \"expenses_paid\",\n  \"experience_required\",\n  \"restriction_details\",\n  \"frequency_commitment_details\",\n  \"geo_coords\",\n  \"geo\",\n  \"advertised_areas\",\n  \"minimum_age\",\n  \"maximum_age\",\n  \"postcode\",\n  \"volunteersearch_type\",\n  \"volunteersearch_type_slugs\",\n  \"organisation_slug\",\n  \"organisation_name\",\n  \"organisation_id\",\n  \"organisation_name_slug\",\n  \"organisation_aims_and_objectives\",\n  \"organisation_twitter\",\n  \"organisation_twitter_url\",\n  \"organisation_facebook\",\n  \"organisation_facebook_url\",\n  \"organisation_linkedin\",\n  \"organisation_linkedin_url\",\n  \"organisation_contact_first_name\",\n  \"organisation_contact_last_name\",\n  \"organisation_contact_email\",\n  \"opportunity_contact_first_name\",\n  \"opportunity_contact_last_name\",\n  \"opportunity_contact_email\",\n  \"opportunity_contact_via_organisation\",\n  \"opportunity_contact_via_tsi\",\n  \"tsi_contact_first_name\",\n  \"tsi_contact_last_name\",\n  \"tsi_contact_email\",\n  \"tsi_name\",\n  \"opportunity_contact_phone\",\n  \"support_options\",\n  \"goodhq_organisation.image_url\",\n  \"title\",\n  \"travel_expenses\",\n  \"travel_details\",\n  \"activities\",\n  \"activities_slugs\",\n  \"monday_afternoon\",\n  \"monday_evening\",\n  \"monday_morning\",\n  \"tuesday_afternoon\",\n  \"tuesday_evening\",\n  \"tuesday_morning\",\n  \"wednesday_afternoon\",\n  \"wednesday_evening\",\n  \"wednesday_morning\",\n  \"thursday_afternoon\",\n  \"thursday_evening\",\n  \"thursday_morning\",\n  \"friday_afternoon\",\n  \"friday_evening\",\n  \"friday_morning\",\n  \"saturday_afternoon\",\n  \"saturday_evening\",\n  \"saturday_morning\",\n  \"sunday_afternoon\",\n  \"sunday_evening\",\n  \"sunday_morning\",\n  \"availability\",\n  \"availability_slugs\",\n  \"timings_description\",\n  \"taster_available\",\n  \"taster_details\",\n  \"url\",\n  \"volunteersearch_age_group\",\n  \"volunteersearch_age_group_slugs\",\n  \"volunteersearch_support_option\",\n  \"volunteersearch_support_option_slugs\",\n  \"opportunity_contact_email\",\n  \"weblink\",\n  \"weblink_title\",\n  \"weblink_tooltip\",\n  \"organisation_website\"\n  ],\n  \"query\": {\n  \"bool\": {\n  \"filter\": [\n  {\n  \"range\": {\n  \"date_last_modified\": {\n  \"gt\": \"now-12M\",\n  \"boost\": 1\n  }\n  }\n  },\n  {\n  \"exists\": {\n  \"field\": \"title\"\n  }\n  }\n  ],\n  \"should\": [\n  {\n  \"term\": {\n  \"Id\": \"a0g1p00000AtEhzAAF\"\n  }\n  },\n  {\n  \"term\": {\n  \"slug\": \"a0g1p00000AtEhzAAF\"\n  }\n  }\n  ],\n  \"minimum_should_match\": 1\n  }\n  }\n  }\n  }\n  }\n{{/unless}}{{/if}}",
        "opportunities_opportunity": "\n<div class=\"container-content\">\n  {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n  <div class=\"content-primary\">\n    {{#each @root.data.primaryResponse.hits.hits ~}}\n      {{> opportunity_full _source view=\"website\"}}\n    {{/each ~}}\n  </div>\n\n  {{#compare @root.data.opportunitySupplimentary.related.hits.total \">\" 0 ~}}\n  <div class=\"content-related\">\n    <div class=\"mdc-typography--headline5 v-margin-full\">\n      Similar {{inflect @root.data.opportunitySupplimentary.related.hits.total \"opportunity\" \"opportunities\"}}\n    </div>\n    <div class=\"mdc-layout-grid equal-height\">\n      <div class=\"mdc-layout-grid__inner\">\n        {{#each @root.data.opportunitySupplimentary.related.hits.hits ~}}\n        <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n          {{> opportunity_list _source hitContext=\"related-opportunity\" parentDocument=_source.Id viewContext=\"Related\"}}\n        </div>\n        {{/each ~}}\n      </div>\n    </div>\n  </div>\n  {{/compare ~}}\n\n  {{else}}\n  <p>\n    We could not find the opportunity you were looking for. It may have been removed or expired.\n  </p>\n  {{/compare ~}}\n</div>",
        "opportunities_register-interest-foot": "",
        "opportunities_register-interest-head-tags-test": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n  {{#with data.primaryResponse.hits.hits.[0]._source ~}}\n\n    <title>Apply for {{title}} with {{organisation_name}} – Volunteer Scotland</title>\n    <meta property=\"og:title\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n    <meta itemprop=\"name\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n    <meta name=\"twitter:title\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n\n    {{#ifAny organisation_logo_url og_image ../og_image ~}}\n      <meta property=\"og:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n      <meta property=\"og:image:height\" content=\"250\">\n      <meta property=\"og:image:width\" content=\"250\">\n      <meta itemprop=\"image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n      <meta name=\"twitter:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n    {{/ifAny ~}}\n\n    {{#ifAny og_summary description ../og_summary ../description ~}}\n      <meta property=\"og:summary\" content=\"{{stripTags (regexReplace (default og_summary (default ../og_summary (default description ../description))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta itemprop=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta name=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta property=\"og:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta name=\"twitter:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n    {{/ifAny ~}}\n\n    <!-- Twitter Card data -->\n    <meta name=\"twitter:card\" content=\"summary\" />\n    <meta name=\"twitter:site\" content=\"@scvotweet\">\n    <meta name=\"twitter:creator\" content=\"@scvotweet\">\n    <!-- Twitter summary card with large image must be at least 280x150px -->\n    <!-- <meta name=\"twitter:image:src\" content=\"http://www.example.com/image.jpg\"> -->\n\n    <!-- Open Graph data -->\n    <meta property=\"og:type\" content=\"website\" />\n    {{#if slug ~}}\n      <!--<meta property=\"og:url\" content=\"https://test.getinvolved.scot/opportunity/{{slug}}\" />-->\n    {{/if ~}}\n    <meta property=\"og:site_name\" content=\"Volunteer Scotland\" />\n\n    <script type=\"application/ld+json\" data-dynamic=\"true\">\n  {{> opportunity_json_ld}}\n</script>\n\n  {{/with ~}}\n{{else}}\n  <title>Opportunity – Volunteer Scotland</title>\n  <meta property=\"og:title\" content=\"Opportunity – Volunteer Scotland\" data-dynamic=\"true\">\n{{/if ~}}\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css\">\n\n<!-- This is Google Optimize's anti-flicker for A/B testing -->\n<style>.async-hide { opacity: 0 !important} </style>\n<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;\n  h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};\n  (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;\n})(window,document.documentElement,'async-hide','dataLayer',4000,\n  {'GTM-54T7D3G':true});</script>",
        "opportunities_register-interest-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n  {{#with data.primaryResponse.hits.hits.[0]._source ~}}\n\n    <title>Apply for {{title}} with {{organisation_name}} – Volunteer Scotland</title>\n    <meta property=\"og:title\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n    <meta itemprop=\"name\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n    <meta name=\"twitter:title\" content=\"Apply for {{title}} with {{organisation_name}} – Volunteer Scotland\" data-dynamic=\"true\">\n\n    {{#ifAny organisation_logo_url og_image ../og_image ~}}\n      <meta property=\"og:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n      <meta property=\"og:image:height\" content=\"250\">\n      <meta property=\"og:image:width\" content=\"250\">\n      <meta itemprop=\"image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n      <meta name=\"twitter:image\" content=\"{{default organisation_logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n    {{/ifAny ~}}\n\n    {{#ifAny og_summary description ../og_summary ../description ~}}\n      <meta property=\"og:summary\" content=\"{{stripTags (regexReplace (default og_summary (default ../og_summary (default description ../description))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta itemprop=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta name=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta property=\"og:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n      <meta name=\"twitter:description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n    {{/ifAny ~}}\n\n    <!-- Twitter Card data -->\n    <meta name=\"twitter:card\" content=\"summary\" />\n    <meta name=\"twitter:site\" content=\"@scvotweet\">\n    <meta name=\"twitter:creator\" content=\"@scvotweet\">\n    <!-- Twitter summary card with large image must be at least 280x150px -->\n    <!-- <meta name=\"twitter:image:src\" content=\"http://www.example.com/image.jpg\"> -->\n\n    <!-- Open Graph data -->\n    <meta property=\"og:type\" content=\"website\" />\n    {{#if slug ~}}\n      <!--<meta property=\"og:url\" content=\"https://test.getinvolved.scot/opportunity/{{slug}}\" />-->\n    {{/if ~}}\n    <meta property=\"og:site_name\" content=\"Volunteer Scotland\" />\n\n    <script type=\"application/ld+json\" data-dynamic=\"true\">\n  {{> opportunity_json_ld}}\n</script>\n\n  {{/with ~}}\n{{else}}\n  <title>Opportunity – Volunteer Scotland</title>\n  <meta property=\"og:title\" content=\"Opportunity – Volunteer Scotland\" data-dynamic=\"true\">\n{{/if ~}}\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css\">\n\n",
        "opportunities_register-interest-test-variant": "<div id=\"detailed-results-container\" class=\"container-content content-register-interest\">\n  {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n    {{#with @root.data.primaryResponse.hits.hits.0._source ~}}\n      <h2 class=\"mdc-typography--headline4\">\n        Register interest - AB Test Variant\n      </h2>\n      <div class=\"mdc-typography--headline5\">\n        <a href=\"/opportunity/{{Id}}/{{title_slug}}\">{{title}}</a> with <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}\">{{organisation_name}}</a>\n      </div>\n      {{#if @root.request.params.query.applied ~}}\n        <section class=\"v-margin-full-bottom\">\n          <div class=\"mdc-typography--headline6\">\n            Thank you for registering interest in this opportunity.\n          </div>\n\n\n          <p class=\"mdc-typography--body1 t-margin-full\">\n            If you want to contact the organisation directly about this opportunity, please use the details below:\n          </p>\n\n          {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Name: </strong> {{{opportunity_contact_first_name}}} {{{opportunity_contact_last_name}}}\n            </div>\n          {{/ifAny ~}}\n\n          {{#if opportunity_contact_email ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Email:</strong> <a href=\"mailto:{{{opportunity_contact_email}}}\">{{{opportunity_contact_email}}}</a>\n            </div>\n          {{/if ~}}\n\n          {{#if organisation_website ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n            </div>\n          {{/if ~}}\n        </section>\n        <section>\n          {{>social_links opportunity=@root.data.registered_interest_opportunities.current.hits.hits.[0]._source }}\n        </section>\n      {{else}}\n        {{#unless @root.data.auth ~}}\n          <div class=\"mdc-typography--headline6\">\n            If you would like to save this data for future applications you must first <a href=\"/sign-in\">sign in</a> or <a href=\"/sign-up\">sign up</a>.\n          </div>\n        {{/unless ~}}\n\n        {{#unless opportunity_contact_email ~}}\n          <p>\n            You can't volunteer for this opportunity using this site.{{#if organisation_website}} Please contact the organisation directly using <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a> for more information.{{/if}}\n          </p>\n        {{else}}\n          {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) Id) }}\n            <p>\n              You have already registered interest in this opportunity\n            </p>\n          {{else}}\n          <form id=\"register-interest-form\" action=\"/email-display?id={{Id}}\" method=\"POST\" class=\"t-margin-full\">\n            <div class=\"mdc-layout-grid\">\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input required id=\"email\" name=\"email\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.email}}\n                           class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.email}}\">\n                    <label class=\"mdc-floating-label\" for=\"email\">\n                      Email address\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mdc-text-field mdc-text-field--outlined\" data-mdc-auto-init=\"MDCTextField\">\n              <input type=\"text\" id=\"thisfield\" name=\"message\" class=\"mdc-text-field__input\">\n              <div class=\"mdc-notched-outline\">\n                <div class=\"mdc-notched-outline__leading\"></div>\n                <div class=\"mdc-notched-outline__notch\">\n                  <label for=\"thisfield\" class=\"mdc-floating-label\">Message</label>\n                </div>\n                <div class=\"mdc-notched-outline__trailing\"></div>\n              </div>\n            </div>\n\n            <input type=\"hidden\" name=\"email-register-interest\" value=\"{{organisation_contact_email}}\">\n            <input type=\"hidden\" name=\"email-register-interest-tsi\" value=\"{{tsi_contact_email}}\">\n\n            <input type=\"hidden\" name=\"tsi_name\" value=\"{{tsi_name}}\">\n            <input type=\"hidden\" name=\"organisation_name\" value=\"{{organisation_name}}\">\n\n            <input type=\"hidden\" name=\"opportunity_contact_first_name\" value=\"{{opportunity_contact_first_name}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_last_name\" value=\"{{opportunity_contact_last_name}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_phone\" value=\"{{opportunity_contact_phone}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_email\" value=\"{{opportunity_contact_email}}\">\n\n            <input type=\"hidden\" name=\"organisation_contact_first_name\" value=\"{{organisation_contact_first_name}}\">\n            <input type=\"hidden\" name=\"organisation_contact_last_name\" value=\"{{organisation_contact_last_name}}\">\n            <input type=\"hidden\" name=\"organisation_contact_phone\" value=\"{{organisation_contact_phone}}\">\n            <input type=\"hidden\" name=\"organisation_contact_email\" value=\"{{organisation_contact_email}}\">\n\n            <input type=\"hidden\" name=\"tsi_contact_first_name\" value=\"{{tsi_contact_first_name}}\">\n            <input type=\"hidden\" name=\"tsi_contact_last_name\" value=\"{{tsi_contact_last_name}}\">\n            <input type=\"hidden\" name=\"tsi_contact_phone\" value=\"{{tsi_contact_phone}}\">\n            <input type=\"hidden\" name=\"tsi_contact_email\" value=\"{{tsi_contact_email}}\">\n\n            <input type=\"hidden\" name=\"opportunity_contact_via_tsi\" value=\"{{opportunity_contact_via_tsi}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_via_organisation\" value=\"{{opportunity_contact_via_organisation}}\">\n\n            <input type=\"hidden\" name=\"opportunity_milo_ref\" value=\"{{milo_ref}}\">\n            <input type=\"hidden\" name=\"opportunity_title\" value=\"{{title}}\">\n            <input type=\"hidden\" name=\"opportunity_minimum_age\" value=\"{{minimum_age}}\">\n            <input type=\"hidden\" name=\"opportunity_maximum_age\" value=\"{{maximum_age}}\">\n            {{!-- <input type=\"hidden\" name=\"opportunity_slug\" value=\"{{slug}}\"> --}}\n            <input type=\"hidden\" name=\"opportunity_title_slug\" value=\"{{title_slug}}\">\n            <input type=\"hidden\" name=\"opportunity_id\" value=\"{{Id}}\">\n\n            {{#if @root.data.auth ~}}\n              {{#unless @root.data.profileInfo.profile ~}}\n                <div class=\"mdc-form-field\">\n                  <div class=\"mdc-checkbox\">\n                    <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"store_profile_info\" id=\"store-details\"/>\n                    <div class=\"mdc-checkbox__background\">\n                      <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                        <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n                      </svg>\n                      <div class=\"mdc-checkbox__mixedmark\"></div>\n                    </div>\n                  </div>\n                  <label for=\"store-details\">\n                    Remember details for future applications?\n                    <div class=\"mdc-typography--caption\">\n                      We will not use these details for anything but volunteering applications and newsletters which you have opted in to. Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>.\n                    </div>\n                  </label>\n                </div>\n              {{else}}\n                <input type=\"hidden\" name=\"store_profile_info\" value=\"true\">\n              {{/unless ~}}\n            {{/if ~}}\n            <div class=\"g-recaptcha\" data-sitekey=\"{{@root.context.metaData.reCaptchaSiteKey}}\" data-callback=\"onSubmit\" data-size=\"invisible\"></div>\n            <button class=\"mdc-button mdc-button--raised b-margin-full\" id=\"register-interest-submit\" onclick=\"preSubmit()\">\n              <span class=\"far fa-hand-paper mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Register interest\n            </button>\n          {{/if ~}}\n        </form>\n        {{/unless ~}}\n\n      <div class=\"mdc-layout-grid\">\n      <div class=\"mdc-layout-grid__inner\">\n        {{#if opportunity_contact_via_organisation ~}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <p>Your message will be sent to:</p>\n\n            <div class=\"mdc-typography--headline7\">\n              <strong>{{{organisation_name}}}</strong>\n            </div>\n\n            {{#ifAny organisation_contact_first_name organisation_contact_last_name ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Name: </strong> {{{organisation_contact_first_name}}} {{{organisation_contact_last_name}}}\n              </div>\n            {{/ifAny ~}}\n\n            {{#if organisation_contact_email ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Email: </strong> <a href=\"mailto:{{{organisation_contact_email}}}\">{{{organisation_contact_email}}}</a>\n              </div>\n            {{/if ~}}\n\n            {{#if organisation_website ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n              </div>\n            {{/if ~}}\n          </div>\n        {{/if ~}}\n\n        {{#if opportunity_contact_via_tsi}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            {{#unless opportunity_contact_via_organisation ~}}\n              <p>\n                Your message will sent to the organisation that manages volunteering in the {{tsi_name}} region:\n              </p>\n            {{else}}\n              <p>\n                A copy will be sent to the an organisation that manages volunteering in {{tsi_name}}:\n              </p>\n            {{/unless ~}}\n            {{#ifAny tsi_contact_first_name tsi_contact_last_name ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Name: </strong> {{{tsi_contact_first_name}}} {{{tsi_contact_last_name}}}\n              </div>\n            {{/ifAny ~}}\n\n            {{#if tsi_contact_email ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Email: </strong> <a href=\"mailto:{{{tsi_contact_email}}}\">{{{tsi_contact_email}}}</a>\n              </div>\n            {{/if ~}}\n          </div>\n        {{/if ~}}\n      {{/if~}}\n    </div>\n    </div>\n    {{/with ~}}\n\n    <script src=\"https://www.google.com/recaptcha/api.js\" async defer></script>\n    <script type=\"text/javascript\">\n      function preSubmit() {\n        var form = document.getElementById(\"register-interest-form\");\n        var isValid = form.checkValidity();\n        if (isValid)  grecaptcha.execute();\n      }\n      function onSubmit(token) {}\n    </script>\n  {{else}}\n    <p>\n      We could not find the opportunity you were looking for. It may have been removed or expired.\n    </p>\n  {{/compare ~}}\n</div>",
        "opportunities_register-interest-test": "<div id=\"detailed-results-container\" class=\"container-content content-register-interest\">\n  {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n    {{#with @root.data.primaryResponse.hits.hits.0._source ~}}\n      <h2 class=\"mdc-typography--headline4\">\n        Register interest - AB Test\n      </h2>\n      <div class=\"mdc-typography--headline5\">\n        <a href=\"/opportunity/{{Id}}/{{title_slug}}\">{{title}}</a> with <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}\">{{organisation_name}}</a>\n      </div>\n      {{#if @root.request.params.query.applied ~}}\n        <section class=\"v-margin-full-bottom\">\n          <div class=\"mdc-typography--headline6\">\n            Thank you for registering interest in this opportunity.\n          </div>\n\n\n          <p class=\"mdc-typography--body1 t-margin-full\">\n            If you want to contact the organisation directly about this opportunity, please use the details below:\n          </p>\n\n          {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Name: </strong> {{{opportunity_contact_first_name}}} {{{opportunity_contact_last_name}}}\n            </div>\n          {{/ifAny ~}}\n\n          {{#if opportunity_contact_email ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Email:</strong> <a href=\"mailto:{{{opportunity_contact_email}}}\">{{{opportunity_contact_email}}}</a>\n            </div>\n          {{/if ~}}\n\n          {{#if organisation_website ~}}\n            <div class=\"mdc-typography--body1\">\n              <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n            </div>\n          {{/if ~}}\n        </section>\n        <section>\n          {{>social_links opportunity=@root.data.registered_interest_opportunities.current.hits.hits.[0]._source }}\n        </section>\n      {{else}}\n        {{#unless @root.data.auth ~}}\n          <div class=\"mdc-typography--headline6\">\n            If you would like to save this data for future applications you must first <a href=\"/sign-in\">sign in</a> or <a href=\"/sign-up\">sign up</a>.\n          </div>\n        {{/unless ~}}\n\n        {{#unless opportunity_contact_email ~}}\n          <p>\n            You can't volunteer for this opportunity using this site.{{#if organisation_website}} Please contact the organisation directly using <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a> for more information.{{/if}}\n          </p>\n        {{else}}\n          {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) Id) }}\n            <p>\n              You have already registered interest in this opportunity\n            </p>\n          {{else}}\n          <form id=\"register-interest-form\" action=\"/email-display?id={{Id}}\" method=\"POST\" class=\"t-margin-full\">\n            <div class=\"mdc-layout-grid\">\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"first_name\" name=\"first_name\"\n                           class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.first_name}}\">\n                    <label class=\"mdc-floating-label\" for=\"first_name\">\n                      First name\n                    </label>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"last_name\" name=\"last_name\"\n                       class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.last_name}}\">\n                    <label class=\"mdc-floating-label\" for=\"last_name\">\n                      Last name\n                    </label>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"thisfield\" name=\"date_of_birth\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.date_of_birth}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.date_of_birth}}\">\n                    <label class=\"mdc-floating-label\" for=\"date_of_birth\">\n                      Date of birth\n                    </label>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"location_address\" name=\"location_address\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_address}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.location_address}}\">\n                    <label class=\"mdc-floating-label\" for=\"location_address\">\n                      Address\n                    </label>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"location_city\" name=\"location_city\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_city}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.location_city}}\">\n                    <label class=\"mdc-floating-label\" for=\"location_city\">\n                      Town/city\n                    </label>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"thisfield\" name=\"phone\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.phone}}\n                           class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.phone}}\">\n                    <label class=\"mdc-floating-label\" for=\"phone\">\n                      Phone number\n                    </label>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input required id=\"email\" name=\"email\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.email}}\n                           class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.email}}\">\n                    <label class=\"mdc-floating-label\" for=\"email\">\n                      Email address\n                    </label>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"location_postcode\" name=\"location_postcode\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_postcode}}\n                           class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                           value=\"{{@root.data.profileInfo.profile.location_postcode}}\">\n                    <label class=\"mdc-floating-label\" for=\"location_postcode\">\n                      Postcode\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mdc-text-field mdc-text-field--outlined\" data-mdc-auto-init=\"MDCTextField\">\n              <input type=\"text\" id=\"thisfield\" name=\"message\" class=\"mdc-text-field__input\">\n              <div class=\"mdc-notched-outline\">\n                <div class=\"mdc-notched-outline__leading\"></div>\n                <div class=\"mdc-notched-outline__notch\">\n                  <label for=\"thisfield\" class=\"mdc-floating-label\">Message</label>\n                </div>\n                <div class=\"mdc-notched-outline__trailing\"></div>\n              </div>\n            </div>\n\n            <input type=\"hidden\" name=\"email-register-interest\" value=\"{{organisation_contact_email}}\">\n            <input type=\"hidden\" name=\"email-register-interest-tsi\" value=\"{{tsi_contact_email}}\">\n\n            <input type=\"hidden\" name=\"tsi_name\" value=\"{{tsi_name}}\">\n            <input type=\"hidden\" name=\"organisation_name\" value=\"{{organisation_name}}\">\n\n            <input type=\"hidden\" name=\"opportunity_contact_first_name\" value=\"{{opportunity_contact_first_name}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_last_name\" value=\"{{opportunity_contact_last_name}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_phone\" value=\"{{opportunity_contact_phone}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_email\" value=\"{{opportunity_contact_email}}\">\n\n            <input type=\"hidden\" name=\"organisation_contact_first_name\" value=\"{{organisation_contact_first_name}}\">\n            <input type=\"hidden\" name=\"organisation_contact_last_name\" value=\"{{organisation_contact_last_name}}\">\n            <input type=\"hidden\" name=\"organisation_contact_phone\" value=\"{{organisation_contact_phone}}\">\n            <input type=\"hidden\" name=\"organisation_contact_email\" value=\"{{organisation_contact_email}}\">\n\n            <input type=\"hidden\" name=\"tsi_contact_first_name\" value=\"{{tsi_contact_first_name}}\">\n            <input type=\"hidden\" name=\"tsi_contact_last_name\" value=\"{{tsi_contact_last_name}}\">\n            <input type=\"hidden\" name=\"tsi_contact_phone\" value=\"{{tsi_contact_phone}}\">\n            <input type=\"hidden\" name=\"tsi_contact_email\" value=\"{{tsi_contact_email}}\">\n\n            <input type=\"hidden\" name=\"opportunity_contact_via_tsi\" value=\"{{opportunity_contact_via_tsi}}\">\n            <input type=\"hidden\" name=\"opportunity_contact_via_organisation\" value=\"{{opportunity_contact_via_organisation}}\">\n\n            <input type=\"hidden\" name=\"opportunity_milo_ref\" value=\"{{milo_ref}}\">\n            <input type=\"hidden\" name=\"opportunity_title\" value=\"{{title}}\">\n            <input type=\"hidden\" name=\"opportunity_minimum_age\" value=\"{{minimum_age}}\">\n            <input type=\"hidden\" name=\"opportunity_maximum_age\" value=\"{{maximum_age}}\">\n            {{!-- <input type=\"hidden\" name=\"opportunity_slug\" value=\"{{slug}}\"> --}}\n            <input type=\"hidden\" name=\"opportunity_title_slug\" value=\"{{title_slug}}\">\n            <input type=\"hidden\" name=\"opportunity_id\" value=\"{{Id}}\">\n\n            {{#if @root.data.auth ~}}\n              {{#unless @root.data.profileInfo.profile ~}}\n                <div class=\"mdc-form-field\">\n                  <div class=\"mdc-checkbox\">\n                    <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"store_profile_info\" id=\"store-details\"/>\n                    <div class=\"mdc-checkbox__background\">\n                      <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                        <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n                      </svg>\n                      <div class=\"mdc-checkbox__mixedmark\"></div>\n                    </div>\n                  </div>\n                  <label for=\"store-details\">\n                    Remember details for future applications?\n                    <div class=\"mdc-typography--caption\">\n                      We will not use these details for anything but volunteering applications and newsletters which you have opted in to. Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>.\n                    </div>\n                  </label>\n                </div>\n              {{else}}\n                <input type=\"hidden\" name=\"store_profile_info\" value=\"true\">\n              {{/unless ~}}\n            {{/if ~}}\n            <div class=\"g-recaptcha\" data-sitekey=\"{{@root.context.metaData.reCaptchaSiteKey}}\" data-callback=\"onSubmit\" data-size=\"invisible\"></div>\n            <button class=\"mdc-button mdc-button--raised b-margin-full\" id=\"register-interest-submit\" onclick=\"preSubmit()\">\n              <span class=\"far fa-hand-paper mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Register interest\n            </button>\n            <p>This is a test only, pressing register interest will display email copy, rather than sending emails</p>\n          {{/if ~}}\n        </form>\n        {{/unless ~}}\n\n      <div class=\"mdc-layout-grid\">\n      <div class=\"mdc-layout-grid__inner\">\n        {{#if opportunity_contact_via_organisation ~}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            <p>Your message will be sent to:</p>\n\n            <div class=\"mdc-typography--headline7\">\n              <strong>{{{organisation_name}}}</strong>\n            </div>\n\n            {{#ifAny organisation_contact_first_name organisation_contact_last_name ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Name: </strong> {{{organisation_contact_first_name}}} {{{organisation_contact_last_name}}}\n              </div>\n            {{/ifAny ~}}\n\n            {{#if organisation_contact_email ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Email: </strong> <a href=\"mailto:{{{organisation_contact_email}}}\">{{{organisation_contact_email}}}</a>\n              </div>\n            {{/if ~}}\n\n            {{#if organisation_website ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n              </div>\n            {{/if ~}}\n          </div>\n        {{/if ~}}\n\n        {{#if opportunity_contact_via_tsi}}\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n            {{#unless opportunity_contact_via_organisation ~}}\n              <p>\n                Your message will sent to the organisation that manages volunteering in the {{tsi_name}} region:\n              </p>\n            {{else}}\n              <p>\n                A copy will be sent to the an organisation that manages volunteering in {{tsi_name}}:\n              </p>\n            {{/unless ~}}\n            {{#ifAny tsi_contact_first_name tsi_contact_last_name ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Name: </strong> {{{tsi_contact_first_name}}} {{{tsi_contact_last_name}}}\n              </div>\n            {{/ifAny ~}}\n\n            {{#if tsi_contact_email ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Email: </strong> <a href=\"mailto:{{{tsi_contact_email}}}\">{{{tsi_contact_email}}}</a>\n              </div>\n            {{/if ~}}\n          </div>\n        {{/if ~}}\n      {{/if~}}\n    </div>\n    </div>\n    {{/with ~}}\n\n    <script src=\"https://www.google.com/recaptcha/api.js\" async defer></script>\n    <script type=\"text/javascript\">\n      function preSubmit() {\n        var form = document.getElementById(\"register-interest-form\");\n        var isValid = form.checkValidity();\n        if (isValid)  grecaptcha.execute();\n      }\n      function onSubmit(token) {}\n    </script>\n  {{else}}\n    <p>\n      We could not find the opportunity you were looking for. It may have been removed or expired.\n    </p>\n  {{/compare ~}}\n</div>",
        "opportunities_register-interest": "<div id=\"detailed-results-container\" class=\"container-content content-register-interest\">\n  {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n    {{#with @root.data.primaryResponse.hits.hits.0._source ~}}\n      <h2 class=\"mdc-typography--headline4\">\n        Register interest\n      </h2>\n      <div class=\"mdc-typography--headline5\">\n        <a href=\"/opportunity/{{Id}}/{{title_slug}}\">{{title}}</a> with <a href=\"/organisation/{{organisation_id}}/{{organisation_name_slug}}\">{{organisation_name}}</a>\n      </div>\n      {{#if @root.request.params.query.applied ~}}\n        <section class=\"v-margin-full-bottom\">\n        <div class=\"mdc-typography--headline6\">\n          Thank you for registering interest in this opportunity.\n        </div>\n\n\n        <p class=\"mdc-typography--body1 t-margin-full\">\n          If you want to contact the organisation directly about this opportunity, please use the details below:\n        </p>\n\n        {{#ifAny opportunity_contact_first_name opportunity_contact_last_name ~}}\n          <div class=\"mdc-typography--body1\">\n            <strong>Name: </strong> {{{opportunity_contact_first_name}}} {{{opportunity_contact_last_name}}}\n          </div>\n        {{/ifAny ~}}\n\n        {{#if opportunity_contact_email ~}}\n          <div class=\"mdc-typography--body1\">\n            <strong>Email:</strong> <a href=\"mailto:{{{opportunity_contact_email}}}\">{{{opportunity_contact_email}}}</a>\n          </div>\n        {{/if ~}}\n\n        {{#if organisation_website ~}}\n          <div class=\"mdc-typography--body1\">\n            <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n          </div>\n        {{/if ~}}\n        </section>\n        <section>\n        {{>social_links opportunity=@root.data.registered_interest_opportunities.current.hits.hits.[0]._source }}\n        </section>\n      {{else}}\n        {{#unless @root.data.auth ~}}\n          <div class=\"mdc-typography--headline6\">\n            If you would like to save this data for future applications you must first <a href=\"/sign-in\">sign in</a> or <a href=\"/sign-up\">sign up</a>.\n          </div>\n        {{/unless ~}}\n\n        {{#unless opportunity_contact_email ~}}\n          <p>\n            You can't volunteer for this opportunity using this site.{{#if organisation_website}} Please contact the organisation directly using <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a> for more information.{{/if}}\n          </p>\n        {{else}}\n          {{#if (contains (map @root.data.registeredInterest.items.[0] (getProp \"value\")) Id) }}\n            <p>\n              You have already registered interest in this opportunity\n            </p>\n          {{else}}\n            <form id=\"register-interest-form\" action=\"/add-to-registered-interest?id={{Id}}\" method=\"POST\" class=\"t-margin-full\">\n              <div class=\"mdc-layout-grid\">\n                <div class=\"mdc-layout-grid__inner\">\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input required id=\"first_name\" name=\"first_name\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.first_name}}class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.first_name}}\">\n                      <label class=\"mdc-floating-label\" for=\"first_name\">\n                        First name\n                      </label>\n                    </div>\n                  </div>\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input required id=\"last_name\" name=\"last_name\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.last_name}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.last_name}}\">\n                      <label class=\"mdc-floating-label\" for=\"last_name\">\n                        Last name\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__inner\">\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input id=\"thisfield\" name=\"date_of_birth\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.date_of_birth}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.date_of_birth}}\">\n                      <label class=\"mdc-floating-label\" for=\"date_of_birth\">\n                        Date of birth\n                      </label>\n                    </div>\n                  </div>\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input id=\"location_address\" name=\"location_address\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_address}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.location_address}}\">\n                      <label class=\"mdc-floating-label\" for=\"location_address\">\n                        Address\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__inner\">\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input id=\"location_city\" name=\"location_city\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_city}} class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.location_city}}\">\n                      <label class=\"mdc-floating-label\" for=\"location_city\">\n                        Town/city\n                      </label>\n                    </div>\n                  </div>\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input id=\"thisfield\" name=\"phone\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.phone}}\n                      class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.phone}}\">\n                      <label class=\"mdc-floating-label\" for=\"phone\">\n                        Phone number\n                      </label>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__inner\">\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input required id=\"email\" name=\"email\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.email}}\n                      class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.email}}\">\n                      <label class=\"mdc-floating-label\" for=\"email\">\n                        Email address\n                      </label>\n                    </div>\n                  </div>\n                  <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                    <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                      <input id=\"location_postcode\" name=\"location_postcode\"\n                      {{>form_validation_attributes @root.context.metaData.accountInfoValidation.location_postcode}}\n                      class=\"mdc-text-field__input mdc-text-field--fullwidth\"\n                      value=\"{{@root.data.profileInfo.profile.location_postcode}}\">\n                      <label class=\"mdc-floating-label\" for=\"location_postcode\">\n                        Postcode\n                      </label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"mdc-text-field mdc-text-field--outlined\" data-mdc-auto-init=\"MDCTextField\">\n                <input type=\"text\" id=\"thisfield\" name=\"message\" class=\"mdc-text-field__input\">\n                <div class=\"mdc-notched-outline\">\n                  <div class=\"mdc-notched-outline__leading\"></div>\n                  <div class=\"mdc-notched-outline__notch\">\n                    <label for=\"thisfield\" class=\"mdc-floating-label\">Message</label>\n                  </div>\n                  <div class=\"mdc-notched-outline__trailing\"></div>\n                </div>\n              </div>\n\n              <input type=\"hidden\" name=\"email-register-interest\" value=\"{{organisation_contact_email}}\">\n              <input type=\"hidden\" name=\"email-register-interest-tsi\" value=\"{{tsi_contact_email}}\">\n\n              <input type=\"hidden\" name=\"tsi_name\" value=\"{{tsi_name}}\">\n              <input type=\"hidden\" name=\"organisation_name\" value=\"{{organisation_name}}\">\n\n              <input type=\"hidden\" name=\"opportunity_contact_first_name\" value=\"{{opportunity_contact_first_name}}\">\n              <input type=\"hidden\" name=\"opportunity_contact_last_name\" value=\"{{opportunity_contact_last_name}}\">\n              <input type=\"hidden\" name=\"opportunity_contact_phone\" value=\"{{opportunity_contact_phone}}\">\n              <input type=\"hidden\" name=\"opportunity_contact_email\" value=\"{{opportunity_contact_email}}\">\n\n              <input type=\"hidden\" name=\"organisation_contact_first_name\" value=\"{{organisation_contact_first_name}}\">\n              <input type=\"hidden\" name=\"organisation_contact_last_name\" value=\"{{organisation_contact_last_name}}\">\n              <input type=\"hidden\" name=\"organisation_contact_phone\" value=\"{{organisation_contact_phone}}\">\n              <input type=\"hidden\" name=\"organisation_contact_email\" value=\"{{organisation_contact_email}}\">\n\n              <input type=\"hidden\" name=\"tsi_contact_first_name\" value=\"{{tsi_contact_first_name}}\">\n              <input type=\"hidden\" name=\"tsi_contact_last_name\" value=\"{{tsi_contact_last_name}}\">\n              <input type=\"hidden\" name=\"tsi_contact_phone\" value=\"{{tsi_contact_phone}}\">\n              <input type=\"hidden\" name=\"tsi_contact_email\" value=\"{{tsi_contact_email}}\">\n\n              <input type=\"hidden\" name=\"opportunity_contact_via_tsi\" value=\"{{opportunity_contact_via_tsi}}\">\n              <input type=\"hidden\" name=\"opportunity_contact_via_organisation\" value=\"{{opportunity_contact_via_organisation}}\">\n\n              <input type=\"hidden\" name=\"opportunity_milo_ref\" value=\"{{milo_ref}}\">\n              <input type=\"hidden\" name=\"opportunity_title\" value=\"{{title}}\">\n              <input type=\"hidden\" name=\"opportunity_minimum_age\" value=\"{{minimum_age}}\">\n              <input type=\"hidden\" name=\"opportunity_maximum_age\" value=\"{{maximum_age}}\">\n              {{!-- <input type=\"hidden\" name=\"opportunity_slug\" value=\"{{slug}}\"> --}}\n              <input type=\"hidden\" name=\"opportunity_title_slug\" value=\"{{title_slug}}\">\n              <input type=\"hidden\" name=\"opportunity_id\" value=\"{{Id}}\">\n\n              {{#if @root.data.auth ~}}\n                {{#unless @root.data.profileInfo.profile ~}}\n                  <div class=\"mdc-form-field\">\n                    <div class=\"mdc-checkbox\">\n                      <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"store_profile_info\" id=\"store-details\"/>\n                      <div class=\"mdc-checkbox__background\">\n                        <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                          <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n                        </svg>\n                        <div class=\"mdc-checkbox__mixedmark\"></div>\n                      </div>\n                    </div>\n                    <label for=\"store-details\">\n                      Remember details for future applications?\n                      <div class=\"mdc-typography--caption\">\n                        We will not use these details for anything but volunteering applications and newsletters which you have opted in to. Read our <a href=\"/privacy\" target=\"_blank\">privacy notice</a>.\n                      </div>\n                    </label>\n                  </div>\n                {{else}}\n                  <input type=\"hidden\" name=\"store_profile_info\" value=\"true\">\n                {{/unless ~}}\n              {{/if ~}}\n              <div class=\"g-recaptcha\" data-sitekey=\"{{@root.context.metaData.reCaptchaSiteKey}}\" data-callback=\"onSubmit\" data-size=\"invisible\"></div>\n              <button class=\"mdc-button mdc-button--raised b-margin-full\" id=\"register-interest-submit\" onclick=\"preSubmit()\">\n                <span class=\"far fa-hand-paper mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                Register interest\n              </button>\n            {{/if ~}}\n          </form>\n        {{/unless ~}}\n\n        <div class=\"mdc-layout-grid\">\n          <div class=\"mdc-layout-grid__inner\">\n            {{#if opportunity_contact_via_organisation ~}}\n            <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n              <p>Your message will be sent to:</p>\n\n              <div class=\"mdc-typography--headline7\">\n                <strong>{{{organisation_name}}}</strong>\n              </div>\n\n              {{#ifAny organisation_contact_first_name organisation_contact_last_name ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Name: </strong> {{{organisation_contact_first_name}}} {{{organisation_contact_last_name}}}\n              </div>\n              {{/ifAny ~}}\n\n              {{#if organisation_contact_email ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Email: </strong> <a href=\"mailto:{{{organisation_contact_email}}}\">{{{organisation_contact_email}}}</a>\n              </div>\n              {{/if ~}}\n\n              {{#if organisation_website ~}}\n              <div class=\"mdc-typography--body1\">\n                <strong>Website: </strong> <a href=\"{{fixUrl organisation_website 'http'}}\">{{{organisation_website}}}</a>\n              </div>\n              {{/if ~}}\n            </div>\n            {{/if ~}}\n\n            {{#if opportunity_contact_via_tsi}}\n              <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n                {{#unless opportunity_contact_via_organisation ~}}\n                  <p>\n                    Your message will sent to the organisation that manages volunteering in the {{tsi_name}} region:\n                  </p>\n                {{else}}\n                  <p>\n                    A copy will be sent to the an organisation that manages volunteering in {{tsi_name}}:\n                  </p>\n                {{/unless ~}}\n                {{#ifAny tsi_contact_first_name tsi_contact_last_name ~}}\n                  <div class=\"mdc-typography--body1\">\n                    <strong>Name: </strong> {{{tsi_contact_first_name}}} {{{tsi_contact_last_name}}}\n                  </div>\n                {{/ifAny ~}}\n\n                {{#if tsi_contact_email ~}}\n                  <div class=\"mdc-typography--body1\">\n                    <strong>Email: </strong> <a href=\"mailto:{{{tsi_contact_email}}}\">{{{tsi_contact_email}}}</a>\n                  </div>\n                {{/if ~}}\n              </div>\n            {{/if ~}}\n          {{/if~}}\n        </div>\n      </div>\n    {{/with ~}}\n\n    <script src=\"https://www.google.com/recaptcha/api.js\" async defer></script>\n    <script type=\"text/javascript\">\n    function preSubmit() {\n      var form = document.getElementById(\"register-interest-form\");\n      var isValid = form.checkValidity();\n      if (isValid)  grecaptcha.execute();\n    }\n    function onSubmit(token) {}\n    </script>\n  {{else}}\n    <p>\n      We could not find the opportunity you were looking for. It may have been removed or expired.\n    </p>\n  {{/compare ~}}\n</div>",
        "opportunities_registered-interest": "<div id=\"detailed-results-container\" class=\"container-content content-register-interest\">\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    Registered interest\n  </h1>\n  {{#if @root.request.params.query.id}}\n\n      <p class=\"mdc-typography--body1\">Your interest in this opportunity has been registered.\n        The organisation has been contacted, and will respond to you at the email provided</p>\n\n      {{>social_links opportunity=@root.data.registered_interest_opportunities.current.hits.hits.[0]._source }}\n  {{/if}}\n  {{#compare @root.data.registered_interest_opportunities.current.hits.total \"===\" 0}}\n    <p class=\"mdc-typography--body1\">\n      You haven't yet registered interest in any current opportunities. To register interest, click the &ensp;<strong><span class=\"far fa-hand-paper mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>&ensp;I want to volunteer</strong>&ensp;button.\n    </p>\n  {{/compare}}\n\n  {{#compare @root.data.registered_interest_opportunities.current.hits.total \">\" 0}}\n    {{#each @root.data.registered_interest_opportunities.current.hits.hits ~}}\n    <div class=\"{{#compare _source.Id \"===\" @root.request.params.query.id}}fade-in{{/compare}} b-margin-full\">\n      {{> opportunity_search_result _source action=\"remove\"}}\n    </div>\n    {{/each ~}}\n    <div class=\"foot\">\n      {{> pagination paging=@root.data.registered_interest_opportunities.current.pagination}}\n    </div>\n  {{/compare}}\n</div>\n\n<script>\n  function sqlRemoveInterest(Id){\n      $link = $(this);\n      $.ajax({\n      type : \"GET\",\n      url: \"/remove-from-registered-interest?id=\" + Id,\n      success: function(result){\n        window.location.href = $link.attr('href');\n      }\n\n    })\n    return false;\n  }\n</script>\n",
        "opportunities_saved-searches": "<div id=\"detailed-results-container\" class=\"container-content content-saved-searches\">\n  {{#compare (length @root.data.searches.items.[0]) \">\" 0 ~}}\n  <div class=\"settings mdc-typography--body1\">\n    <span class=\"settings-heading\">Search email frequency</span>\n    {{> email_frequency}}\n  </div>\n  {{/compare ~}}\n  <h1 class=\"mdc-typography--headline4 v-margin-full\">\n    My saved searches\n  </h1>\n  {{#compare (length @root.data.searches.items.[0]) \">\" 0 ~}}\n  <ul class=\"mdc-list mdc-list--two-line mdc-list--avatar-list mdc-elevation--z0\">\n    <li class=\"mdc-list-item mdc-list-item--header\">\n      <span class=\"mdc-list-item__graphic far hide-sm\" aria-hidden=\"true\"></span>\n      <div class=\"mdc-layout-grid\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone saved-search\">\n            <span class=\"mdc-list-item__text\">\n              <strong>Search</strong>\n            </span>\n          </div>\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-2-phone align-centre\">\n            <span class=\"mdc-list-item__text\">\n              <strong>Subscribe</strong>\n            </span>\n          </div>\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-2-phone align-centre\">\n            <span class=\"mdc-list-item__text\">\n              <strong>Remove</strong>\n            </span>\n          </div>\n        </div>\n      </div>\n    </li>\n    {{#each @root.data.searches.items.[0] ~}}\n      <li class=\"mdc-list-item mdc-ripple-upgraded\">\n        <span class=\"mdc-list-item__graphic far fa-search fa-2x hide-sm\" aria-hidden=\"true\"></span>\n        <div class=\"mdc-layout-grid\">\n          <div class=\"mdc-layout-grid__inner\">\n            <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-8-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone saved-search\">\n              <span class=\"mdc-list-item__text\">\n                <a href=\"/search?{{{this.querystring}}}\">{{{partition}}}</a>\n                <div class=\"mdc-list-item__secondary-text\">\n                  {{#with (querystring querystring) ~}}\n                    {{#if keywords ~}}\n                      Keywords: <strong>{{{keywords}}}</strong>\n                    {{/if ~}}\n\n                    {{#if activities ~}}\n                      {{inflect (length (arrayify activities)) \"Activity\" \"Activities\"}}:\n                      {{#each (arrayify activities) ~}}\n                        <strong>{{{getProperty @root.data.termsMaps.activities.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#if volunteersearch_types ~}}\n                      {{inflect (length (arrayify themes)) \"Specialist role\" \"Specialist roles\"}}:\n                      {{#each (arrayify volunteersearch_types) ~}}\n                        <strong>{{{getProperty @root.data.termsMaps.volunteersearch_types.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#if themes ~}}\n                      {{inflect (length (arrayify themes)) \"Theme\" \"Themes\"}}:\n                      {{#each (arrayify themes) ~}}\n                        <strong>{{{getProperty @root.data.termsMaps.themes.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#if services ~}}\n                      {{inflect (length (arrayify services)) \"Service\" \"Services\"}}:\n                      {{#each (arrayify services)}}\n                        <strong>{{{getProperty @root.data.termsMaps.services.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#if age_groups ~}}\n                      {{inflect (length (arrayify age_groups)) \"Volunteer age group\" \"Volunteer age groups\"}}:\n                      {{#each (arrayify age_groups)}}\n                        <strong>{{{getProperty @root.data.termsMaps.age_groups.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#if availability ~}}\n                      {{inflect (length (arrayify availability)) \"Availability\" \"Availability\"}}:\n                      {{#each (arrayify availability)}}\n                        <strong>{{{getProperty @root.data.termsMaps.availability.slugsMap (concat this \".term\")}}}{{#unless @last}}, {{/unless}}</strong>\n                      {{/each ~}}\n                    {{/if ~}}\n\n                    {{#ifAll location distance ~}}\n                      {{#ifAny activities themes services age_groups availability ~}}\n                        Within\n                      {{else}}\n                        within\n                      {{/ifAny ~}}\n                      <strong>{{round distance}}</strong>\n                      miles of\n                      <strong>{{{location}}}</strong>\n                    {{/ifAll ~}}\n                  {{/with ~}}\n                </div>\n              </span>\n            </div>\n            <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-2-phone align-centre\">\n              <div class=\"mdc-chip-set mdc-chip-set--filter\">\n                {{#> ajax_chip\n                  onUrl=\"/toggle-subscription\"\n                  offUrl=\"/toggle-subscription\"\n                  onText=\"Email\"\n                  offText=\"Email\"\n                  onMethod=\"POST\"\n                  offMethod=\"POST\"\n                  iconClasses=\"fal fa-fw fa-times\"\n                  on=partitionActive\n                }}\n                {\n                  \"onData\": {\n                    \"name\": {{{stringify ../partition}}}\n                  },\n                  \"offData\": {\n                    \"name\": {{{stringify ../partition}}}\n                  }\n                }\n                {{/ajax_chip}}\n              </div>\n            </div>\n            <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-2-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-2-phone\">\n              {{> delete_search name=partition}}\n            </div>\n          </div>\n        </div>\n      </li>\n      {{#unless @last}}\n        <li class=\"mdc-list-divider\" role=\"separator\"></li>\n      {{/unless ~}}\n    {{/each ~}}\n  </ul>\n  {{else}}\n  <p class=\"mdc-typography--body1\">\n    You don't yet have any searches saved. To save a search, click the &ensp;<strong><span class=\"far fa-search-plus mdc-chip__icon mdc-chip__icon--leading\" aria-hidden=\"true\"></span>Save/email this search</strong>&ensp;button once you've entered some search parameters.\n  </p>\n  {{/compare ~}}\n</div>\n",
        "opportunities_search-foot": "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js\"></script>\n",
        "opportunities_search-form": "{{> opportunity_search_form instance_id=\"perm\"}}\n",
        "opportunities_search-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{else}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{/if ~}}",
        "opportunities_search": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search\" instance_id=\"perm\">\n  {{> opportunity_search_results this}}\n</div>\n",
        "opportunities_widget_opportunity": "{{> widget_style}}\n<div class=\"volopps-main\">\n  <div class=\"volopps-inner\">\n    {{> widget_opportunity_search_form}}\n\n    {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n    {{#each @root.data.primaryResponse.hits.hits ~}}\n    {{> opportunity_full _source view=\"widget\"}}\n    {{/each ~}}\n    {{/compare ~}}\n  </div>\n</div>",
        "opportunities_widget_results-list": "{{> widget_style}}\n<div class=\"volopps-main\">\n  <div class=\"volopps-inner\">\n    {{> widget_opportunity_search_form}}\n\n    <div class=\"h-padding-full\">\n      {{#compare @root.data.search_data.detailed_results.hits.total \">\" 0}}\n        <div class=\"mdl-tabs mdl-njs-tabs mdl-js-ripple-effect\">\n          <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#/search{{> query_search}}\" class=\"mdl-tabs__tab is-active\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">list</span>\n              List\n            </a>\n            <a href=\"#/map{{> query_search}}\" class=\"mdl-tabs__tab\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">place</span>\n              Map\n            </a>\n          </div>\n        </div>\n      {{/compare}}\n\n      <div class=\"v-margin-full\">\n        {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n      </div>\n\n      <div class=\"results-list\">\n      {{#each @root.data.search_data.detailed_results.hits.hits ~}}\n        {{> opportunity_search_result _source distance=fields.distance.[0] view=\"widget\"}}\n      {{/each ~}}\n      </div>\n\n      <div class=\"foot\">\n        {{> pagination paging=@root.data.search_data.detailed_results.pagination type=\"widget\"}}\n      </div>\n    </div>\n  </div>\n</div>",
        "opportunities_widget_results-map": "{{> widget_style}}\n<div class=\"volopps-main\">\n  <div class=\"volopps-inner\">\n    {{> widget_opportunity_search_form}}\n\n    <div class=\"h-padding-full\">\n      {{#compare @root.data.search_data.map_results.hits.total \">\" 0}}\n      <div class=\"mdl-tabs mdl-njs-tabs mdl-js-ripple-effect\">\n        <div class=\"mdl-tabs__tab-bar\">\n          <a href=\"#/search{{> query_search}}\" class=\"mdl-tabs__tab\">\n            <span class=\"material-icons icon-left\" aria-hidden=\"true\">list</span>\n            List\n          </a>\n          <a href=\"#/map{{> query_search}}\" class=\"mdl-tabs__tab is-active\">\n            <span class=\"material-icons icon-left\" aria-hidden=\"true\">place</span>\n            Map\n          </a>\n        </div>\n      </div>\n\n      {{#compare (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \">\" 0 ~}}\n      <div class=\"mdc-typography--body2 v-margin-full\">\n        <a href=\"#/search{{> query_search}}&exclude=locations\">List {{subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count}} {{#compare @root.data.location_data.locations_results.hits.total \">\" 0}}other{{/compare}} volunteering {{inflect (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \"opportunity\" \"opportunities\"}}</a>\n        {{#compare @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets.length \">\" 0 ~}}\n        available\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        <span class=\"areas areas-fulltext\">\n        {{/compare ~}}\n        {{#with @root.data.location_data.la_results.aggregations.local_authority_areas ~}}\n        {{#each buckets ~}}\n        {{#if (contains (map @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets (getProp \"key\")) (replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\")) ~}}\n        <span class=\"area\">{{{replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\"}}}</span>\n        {{/if ~}}\n        {{#if @last}}{{#compare @root.data.location_data.home_results.hits.total \">\" 0}}\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        </span>\n        {{/compare ~}}\n        from home.{{/compare}}{{/if}}\n        {{/each ~}}\n        {{/with ~}}\n        {{else}}\n        available from home.\n        {{/compare ~}}\n      </div>\n      {{/compare ~}}\n\n      <div class=\"map-results\" data-component=\"LeafletMap\" data-LeafletMap='{{#json}}\n        {{#json key=\"points\" type=\"array\"}}{{/json}},\n        {{#json key=\"mapOptions\"}}\n          {{{json key=\"fullscreenControl\" value=true}}},\n          {{{json key=\"scrollWheelZoom\" value=false}}},\n          {{{json key=\"trackResize\" value=false}}}\n        {{/json}},\n        {{#json key=\"initialLatLng\"}}\n          {{{json key=\"lat\" value=55.94528820000001}}},\n          {{{json key=\"lng\" value=-3.200755699999945}}}\n        {{/json}},\n        {{{json key=\"initialZoom\" value=9}}},\n        {{#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}}\n          {{#json key=\"featureGroups\" type=\"array\"}}\n            {{#json}}\n              {{{json key=\"boundToThis\" value=true}}},\n              {{#json key=\"features\" type=\"array\"}}\n                {{#json}}\n                  {{{json key=\"type\" value=\"Circle\"}}},\n                  {{#json key=\"latLng\"}}\n                    {{{json key=\"lat\" value=@root.request.params.query.lat}}},\n                    {{{json key=\"lng\" value=@root.request.params.query.lng}}}\n                  {{/json}},\n                  {{#json key=\"options\"}}\n                    {{{json key=\"radius\" value=(multiply @root.request.params.query.distance 1609.344)}}}\n                  {{/json}}\n                {{/json}}\n              {{/json}}\n            {{/json}}\n          {{/json}},\n        {{/ifAll}}\n        {{#json key=\"markerClusterGroups\" type=\"array\"}}\n          {{#json}}\n            {{#json key=\"options\"}}\n              {{{json key=\"showCoverageOnHover\" value=false}}}\n            {{/json}},\n            {{{json key=\"boundToThis\" value=true}}},\n            {{#json key=\"markers\" type=\"array\"}}\n              {{#each @root.data.search_data.map_results.hits.hits}}\n                {{#each (arrayify _source.geo_coords) ~}}\n                  {{#ifAll lat lon ~}}\n                    {{#if @root.request.params.query.distance ~}}\n                      {{#compare (itemAt ../fields.distance @index) \"<\" @root.request.params.query.distance ~}}\n                        {{> opportunity_map_json ../_source lat=lat lng=lon map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n                      {{/compare ~}}\n                    {{else}}\n                      {{> opportunity_map_json ../_source lat=lat lng=lon map_postcode=(itemAt (arrayify (split ../_source.postcode \",\")) @index)}}\n                    {{/if ~}}\n                  {{/ifAll ~}}\n                {{/each}}\n              {{/each}}\n            {{/json}}\n          {{/json}}\n        {{/json}}\n      {{/json}}'></div>\n      {{else}}\n      <div class=\"v-margin-full\">\n        {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n      </div>\n      {{/compare}}\n\n      {{!-- <div class=\"post-info-extra v-margin-full\">\n        <a href=\"#/search{{> query_search}}&exclude=locations&view=widget\">List {{subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count}} {{#compare @root.data.location_data.locations_results.hits.total \">\" 0}}other{{/compare}} volunteering {{inflect (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \"opportunity\" \"opportunities\"}}</a>\n        {{#compare @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets.length \">\" 0 ~}}\n        available\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        <span class=\"areas areas-fulltext\">\n        {{/compare ~}}\n        {{#with @root.data.location_data.la_results.aggregations.local_authority_areas ~}}\n        {{#each buckets ~}}\n        {{#if (contains (map @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets (getProp \"key\")) (replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\")) ~}}\n        <span class=\"area\">{{{replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\"}}}</span>\n        {{/if ~}}\n        {{#if @last}}{{#compare @root.data.location_data.home_results.hits.total \">\" 0}}\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        </span>\n        {{/compare ~}}\n        from home.{{/compare}}{{/if}}\n        {{/each ~}}\n        {{/with ~}}\n        {{else}}\n        available from home.\n        {{/compare ~}}\n      </div> --}}\n    </div>\n  </div>\n</div>",
        "opportunities_widget_search": "{{> widget_style}}\n<div class=\"volopps-main\">\n  <div class=\"volopps-inner\">\n    {{> widget_opportunity_search_form}}\n  </div>\n</div>",
        "organisations_map-foot": "<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js\"></script>\n<script type=\"text/javascript\">\n\n</script>\n",
        "organisations_map": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search container-map\">\n  <div class=\"mdc-layout-grid head\">\n    <div class=\"mdc-layout-grid__inner\">\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone action\">\n        {{#> components_tab_bar}}\n          {{> search_button}}\n          {{> components_tab url=(concat \"/organisations/search\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-list fa-fw\" label=\"List\" active=(compare @root.request.url.pathname \"===\" \"/organisations/search\")}}\n          {{> components_tab url=(concat \"/organisations/map\" (if (compare (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null exclude=null) \"\") \"\" else=\"?\") (querystringify @root.request.params.query utm_source=null utm_campaign=null utm_medium=null)) iconClasses=\"far fa-map-marker-alt fa-fw\" label=\"Map\" active=(compare @root.request.url.pathname \"===\" \"/organisations/map\")}}\n        {{/components_tab_bar}}\n      </div>\n    </div>\n  </div>\n\n  {{#if @root.data.search_data.map_results.pagination.totalResults ~}}\n  <div class=\"card-loader\" id=\"opportunity-map-loader\" style=\"display: flex\">\n    <div class=\"card-loader-inner\">\n      <span class=\"far fa-2x fa-spinner-third fa-spin\"></span>\n    </div>\n  </div>\n  <div id=\"map-full\" data-map-name=\"fullMap\" class=\"grid-content\" data-map-clustered-options='{\n   {{#ifAll @root.request.params.query.distance @root.request.params.query.lat @root.request.params.query.lng ~}}\n    \"circle\": {\n      \"lat\": {{@root.request.params.query.lat}},\n      \"lng\": {{@root.request.params.query.lng}},\n      \"radius\": {{default (multiply @root.request.params.query.distance 1.60934) 0}},\n      \"color\": \"#7BC143\"\n    }\n  {{/ifAll ~}}\n  }'>\n    <!-- Markers for map -->\n    {{#each @root.data.search_data.map_results.hits.hits ~}}\n      {{#if _source.geo_coords ~}}\n        {{#each (arrayify _source.geo_coords) ~}}\n          <marker style=\"display:none;\" data-map=\"fullMap\" data-lat=\"{{lat}}\" data-lng=\"{{lon}}\" data-shortlisted=\"{{#each @root.data.favourites.items}}{{#compare id \"===\" ../../_source.Id}}true{{/compare}}{{/each}}\" data-title=\"{{../_source.title}}\">\n            {{>organisation_map ../_source}}\n          </marker>\n        {{/each}}\n      {{/if}}\n    {{/each}}\n  </div>\n  {{else}}\n    {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n  {{/if ~}}\n</div>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", function(event) {\n    var $loader = $('#opportunity-map-loader');\n    $loader.css('display', 'none');\n  });\n</script>",
        "organisations_organisation-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n{{#with data.primaryResponse.hits.hits.[0]._source ~}}\n<title>{{title}} – Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"{{title}} – Volunteer Scotland Search\" data-dynamic=\"true\">\n{{#ifAny logo_url og_image ../og_image ~}}\n<meta property=\"og:image\" content=\"{{default logo_url og_image ../og_image}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n{{#ifAny og_summary description ../og_summary ../description ~}}\n<meta property=\"og:summary\" content=\"{{stripTags (regexReplace (default og_summary (default ../og_summary (default description ../description))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n<meta name=\"description\" content=\"{{stripTags (regexReplace (default description (default ../description (default og_summary ../og_summary))) '\\r|\\n' 'gi' '')}}\" data-dynamic=\"true\">\n{{/ifAny ~}}\n{{#if rendered.json_ld ~}}\n<script type=\"application/ld+json\" data-dynamic=\"true\">\n{{{rendered.json_ld}}}\n</script>\n{{/if ~}}\n{{/with ~}}\n{{else}}\n<title>Volunteer Scotland Search</title>\n<meta property=\"og:title\" content=\"Volunteer Scotland Search\" data-dynamic=\"true\">\n{{/if ~}}",
        "organisations_organisation": "<div class=\"container-content content-secondary\">\n  {{#compare data.primaryResponse.hits.total \">\" 0 ~}}\n\n  {{#with @root.data.primaryResponse.hits.hits.[0]._source as |organisation| ~}}\n\n  {{> organisation_full organisation}}\n\n  {{!-- {{#compare @root.data.organisationOpportunities.events_upcoming.hits.total \">\" 0 ~}}\n  <hr />\n  <div class=\"mdc-typography--headline5\">\n    Upcoming events\n  </div>\n  {{#each @root.data.organisationOpportunities.events_upcoming.hits.hits ~}}\n  {{> event_list _source}}\n  {{/each ~}}\n  {{/compare ~}} --}}\n\n  {{#compare @root.data.organisationOpportunities.opportunities_open.hits.total \">\" 0 ~}}\n  <hr />\n  <div class=\"mdc-typography--headline5\">\n    Current {{inflect @root.data.organisationOpportunities.opportunities_open.hits.total \"opportunity\" \"opportunities\"}}\n  </div>\n  {{#each @root.data.organisationOpportunities.opportunities_open.hits.hits ~}}\n  {{> opportunity_list _source}}\n  {{/each ~}}\n  {{/compare ~}}\n\n  {{#compare @root.data.organisationOpportunities.opportunities_closed.hits.total \">\" 0 ~}}\n  {{#compare @root.data.organisationOpportunities.opportunities_open.hits.total \"===\" 0 ~}}\n  <hr />\n  {{/compare ~}}\n  <div class=\"mdc-typography--headline5\">\n    Closed {{inflect @root.data.organisationOpportunities.opportunities_closed.hits.total \"opportunity\" \"opportunities\"}}\n  </div>\n  {{#each @root.data.organisationOpportunities.opportunities_closed.hits.hits ~}}\n  {{> opportunity_list _source}}\n  {{/each ~}}\n  {{/compare ~}}\n\n  {{#compare @root.data.organisationOpportunities.opportunities_open.hits.total \"===\" 0 ~}}\n  {{#compare @root.data.organisationOpportunities.opportunities_closed.hits.total \"===\" 0 ~}}\n  <hr />\n  <div class=\"mdc-typography--headline6\">\n    There are no current or recently closed opportunities available\n  </div>\n  {{/compare ~}}\n  {{/compare ~}}\n\n  {{#if goodhq_organisation.xid ~}}\n  {{#compare goodhq_organisation.status \"===\" \"Open\" ~}}\n  <hr />\n  <!--<div class=\"mdc-typography--headline6\">-->\n    <!--Find out more about <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}\">{{{organisation.title}}}</a> on <a href=\"https://goodhq.org\">Good HQ</a>-->\n  <!--</div>-->\n  {{#compare @root.data.goodhq.posts.hits.total \">\" 0 ~}}\n  <p class=\"mdc-typography--headline7\">\n    Posts from <a href=\"https://goodhq.org/{{goodhq_organisation.xid}}\">{{{organisation.title}}}</a> on <a href=\"https://goodhq.org\">Good HQ</a>\n  </p>\n  <div class=\"mdc-layout-grid equal-height\">\n    <div class=\"mdc-layout-grid__inner\">\n      {{#each @root.data.goodhq.posts.hits.hits ~}}\n      <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-4-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone\">\n        {{{_source.rendered.goodmoves_list}}}\n      </div>\n      {{/each ~}}\n    </div>\n  </div>\n  {{#compare @root.data.goodhq.posts.hits.total \">\" 3 ~}}\n  <p class=\"mdc-typography--body1\">\n    <a href=\"https://goodhq.org/{{organisation.goodhq_organisation.xid}}?mode=volopp\">More posts on Good HQ</a>\n  </p>\n  {{/compare ~}}\n  {{/compare ~}}\n\n  {{/compare ~}}\n  {{/if ~}}\n\n  {{/with ~}}\n  {{else}}\n  <p>\n    <strong>Error:</strong> the requested organisation could not be found.\n  </p>\n  {{/compare ~}}\n</div>",
        "organisations_search-form": "{{> organisation_search_form instance_id=\"perm\"}}\n",
        "organisations_search-head-tags": "{{#if data.primaryResponse.hits.hits.[0] ~}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{else}}\n<title>Search results – Volunteer Scotland</title>\n<meta property=\"og:title\" content=\"Search results – Volunteer Scotland\" data-dynamic=\"true\">\n{{/if ~}}",
        "organisations_search": "<div id=\"detailed-results-container\" class=\"container-content content-primary-search\">\n  {{> organisation_search_results this}}\n</div>\n",
        "organisations_widget_organisation": "{{> widget_style}}\n<div class=\"volorgs-main\">\n  <div class=\"volorgs-inner\">\n    {{> widget_organisation_search_form}}\n\n    {{#compare @root.data.primaryResponse.hits.total \">\" 0 ~}}\n    {{#each @root.data.primaryResponse.hits.hits ~}}\n    {{> organisation_full _source view=\"widget\"}}\n    {{/each ~}}\n    {{/compare ~}}\n\n    {{#compare @root.data.organisationOpportunities.opportunities_open.hits.total \">\" 0 ~}}\n    <div class=\"x-padding-full\">\n      <h3 class=\"mdc-typography--headline5\">\n        Current opportunities\n      </h3>\n      {{#each @root.data.organisationOpportunities.opportunities_open.hits.hits ~}}\n      {{> opportunity_list _source view=\"widget\"}}\n      {{/each ~}}\n    </div>\n    {{/compare ~}}\n  </div>\n</div>",
        "organisations_widget_results-list": "{{> widget_style}}\n<div class=\"volorgs-main\">\n  <div class=\"volorgs-inner\">\n    {{> widget_organisation_search_form}}\n\n    <div class=\"h-padding-full\">\n      {{#compare @root.data.search_data.detailed_results.hits.total \">\" 0}}\n        <div class=\"mdl-tabs mdl-njs-tabs mdl-js-ripple-effect\">\n          <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#/organisations/search{{> query_search}}\" class=\"mdl-tabs__tab is-active\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">list</span>\n              List\n            </a>\n            <a href=\"#/organisations/map{{> query_search}}\" class=\"mdl-tabs__tab\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">place</span>\n              Map\n            </a>\n          </div>\n        </div>\n      {{/compare}}\n\n      <div class=\"v-margin-full\">\n        {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n      </div>\n\n      <div class=\"mdl-grid results-list\">\n        {{#each @root.data.search_data.detailed_results.hits.hits ~}}\n        <div class=\"mdl-cell mdl-cell--4-col-phone mdl-cell--4-col-tablet mdl-cell--4-col-desktop\">\n          {{> organisation_search_result _source distance=fields.distance.[0] view=\"widget\"}}\n        </div>\n        {{/each ~}}\n      </div>\n\n      <div class=\"foot\">\n        {{> pagination paging=@root.data.search_data.detailed_results.pagination type=\"widget\"}}\n      </div>\n    </div>\n  </div>\n</div>",
        "organisations_widget_results-map": "{{> widget_style}}\n<div class=\"volorgs-main\">\n  <div class=\"volorgs-inner\">\n    {{> widget_organisation_search_form}}\n\n    <div class=\"h-padding-full\">\n      {{#compare @root.data.search_data.map_results.hits.total \">\" 0}}\n        <div class=\"mdl-tabs mdl-njs-tabs mdl-js-ripple-effect\">\n          <div class=\"mdl-tabs__tab-bar\">\n            <a href=\"#/organisations/search{{> query_search}}\" class=\"mdl-tabs__tab\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">list</span>\n              List\n            </a>\n            <a href=\"#/organisations/map{{> query_search}}\" class=\"mdl-tabs__tab is-active\">\n              <span class=\"material-icons icon-left\" aria-hidden=\"true\">place</span>\n              Map\n            </a>\n          </div>\n        </div>\n\n        <div class=\"map-results\" data-component=\"LeafletMap\" data-LeafletMap='{{#json}}\n          {{#json key=\"points\" type=\"array\"}}{{/json}},\n          {{#json key=\"mapOptions\"}}\n            {{{json key=\"fullscreenControl\" value=true}}},\n            {{{json key=\"scrollWheelZoom\" value=false}}},\n            {{{json key=\"trackResize\" value=false}}}\n          {{/json}},\n          {{#json key=\"initialLatLng\"}}\n            {{{json key=\"lat\" value=55.94528820000001}}},\n            {{{json key=\"lng\" value=-3.200755699999945}}}\n          {{/json}},\n          {{{json key=\"initialZoom\" value=9}}},\n          {{#ifAll @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance}}\n            {{#json key=\"featureGroups\" type=\"array\"}}\n              {{#json}}\n                {{{json key=\"boundToThis\" value=true}}},\n                {{#json key=\"features\" type=\"array\"}}\n                  {{#json}}\n                    {{{json key=\"type\" value=\"Circle\"}}},\n                    {{#json key=\"latLng\"}}\n                      {{{json key=\"lat\" value=@root.request.params.query.lat}}},\n                      {{{json key=\"lng\" value=@root.request.params.query.lng}}}\n                    {{/json}},\n                    {{#json key=\"options\"}}\n                      {{{json key=\"radius\" value=(multiply @root.request.params.query.distance 1609.344)}}}\n                    {{/json}}\n                  {{/json}}\n                {{/json}}\n              {{/json}}\n            {{/json}},\n          {{/ifAll}}\n          {{#json key=\"markerClusterGroups\" type=\"array\"}}\n            {{#json}}\n              {{#json key=\"options\"}}\n                {{{json key=\"showCoverageOnHover\" value=false}}}\n              {{/json}},\n              {{{json key=\"boundToThis\" value=true}}},\n              {{#json key=\"markers\" type=\"array\"}}\n                {{#each @root.data.search_data.map_results.hits.hits}}\n                  {{#each (arrayify _source.geo_coords) ~}}\n                    {{#ifAll lat lon ~}}\n                      {{> organisation_map_json ../_source lat=lat lng=lon}}\n                    {{/ifAll ~}}\n                  {{/each}}\n                {{/each}}\n              {{/json}}\n            {{/json}}\n          {{/json}}\n        {{/json}}'></div>\n      {{else}}\n      <div class=\"v-margin-full\">\n        {{> search_info paging=@root.data.search_data.detailed_results.pagination}}\n      </div>\n      {{/compare}}\n\n      {{!-- <div class=\"post-info-extra v-margin-full\">\n        <a href=\"#/search{{> query_search}}&exclude=locations&view=widget\">List {{subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count}} {{#compare @root.data.location_data.locations_results.hits.total \">\" 0}}other{{/compare}} volunteering {{inflect (subtract @root.data.search_data.map_results.hits.total @root.data.search_data.map_results.aggregations.geo_search.buckets.[0].doc_count) \"opportunity\" \"opportunities\"}}</a>\n        {{#compare @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets.length \">\" 0 ~}}\n        available\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        <span class=\"areas areas-fulltext\">\n        {{/compare ~}}\n        {{#with @root.data.location_data.la_results.aggregations.local_authority_areas ~}}\n        {{#each buckets ~}}\n        {{#if (contains (map @root.data.search_data.map_results.aggregations.all_advertised_areas.buckets (getProp \"key\")) (replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\")) ~}}\n        <span class=\"area\">{{{replace (replace (replace key \" and \" \" & \") \" City\" \"\") \"City of \" \"\"}}}</span>\n        {{/if ~}}\n        {{#if @last}}{{#compare @root.data.location_data.home_results.hits.total \">\" 0}}\n        {{#compare @root.data.search_data.areas_results.hits.total \">\" 0 ~}}\n        </span>\n        {{/compare ~}}\n        from home.{{/compare}}{{/if}}\n        {{/each ~}}\n        {{/with ~}}\n        {{else}}\n        available from home.\n        {{/compare ~}}\n      </div> --}}\n    </div>\n  </div>\n</div>",
        "organisations_widget_search": "{{> widget_style}}\n<div class=\"volorgs-main\">\n  <div class=\"volorgs-inner\">\n    {{> widget_organisation_search_form}}\n  </div>\n</div>",
        "pages_accessibility": "<div class=\"container-fluid container-content content-page\">\n  <h2>Accessibility</h2>\n  <p>\n    This website has been designed to comply with international web accessibility standards issued by the <a href=\"http://www.w3cuk.org.uk/\">World Wide Web consortium</a> (W3C) as part of their <a href=\"https://www.w3.org/WAI/\">Web Accessibility Initiative</a>.\n  </p>\n  <p>\n    All reasonable efforts have been made to ensure that top level and main content pages are compliant with the standards.\n  </p>\n</div>",
        "pages_cookies": "<div class=\"container-fluid container-content content-page\">\n  <h1>How we use cookies</h1>\n  <h4>What is a cookie?</h4>\n  <p>\n    A cookie is a small file of letters and numbers that we may store on your browser or the hard drive of your computer or device. They cannot be used to identify you personally.\n  </p>\n  <p>\n    We use cookies to distinguish you from other users of the Site. This helps us to provide you with a good experience when you browse the Site and also allows us to improve the Site.\n  </p>\n  <p>\n    Cookies are used to improve services for you through, for example:\n  </p>\n  <ul>\n    <li>enabling a service to recognise your device so you don’t have to give the same information several times during one task;</li>\n    <li>recognising that you may already have given a username and password so you don’t need to do it for every web page requested; and</li>\n    <li>measuring how many people are using services, so they can be made easier to use and there’s enough capacity to ensure they are fast</li>\n  </ul>\n  <h4>Types of cookies used</h4>\n  <p>\n    The Site uses the following types of cookies:\n  </p>\n  <ul>\n    <li>Session cookie – this type of cookie allows websites to link the actions of a user during a browser session so that the website is able to store certain information whilst the user is browsing the site.</li>\n    <li>Google Analytics cookies – Google Analytics sets cookies to help us accurately estimate the number of visitors to the Site and volumes of usage. This is to ensure that the service is available when you want it and fast.</li>\n  </ul>\n  <p>\n    You can find more detailed information about the individual cookies we use and the purposes for which we use them in the tables below:\n  </p>\n  <h4>Cookie Info Script cookie</h4>\n  <table>\n    <tbody>\n      <tr>\n        <td><b><i>Cookie</i></b></td>\n        <td><b><i>Typical content</i></b></td>\n        <td><b><i>Purpose</i></b></td>\n        <td><b><i>Expires</i></b></td>\n      </tr>\n      <tr>\n        <td>CookieInfoScript</td>\n        <td>1</td>\n        <td>A Boolean value used to remember if the user has accepted the Cookie policy</td>\n        <td>No expiry</td>\n      </tr>\n    </tbody>\n  </table>\n  <h4>Google Analytics cookies</h4>\n  <p>\n    The information from the following cookies will be used by Google in accordance with Google’s <a href=\"http://www.google.co.uk/intl/en/policies/privacy/\">privacy policy</a>. For more information on the cookies set by Google Analytics please refer to the <a href=\"https://developers.google.com/analytics/resources/concepts/gaConceptsCookies\">Google Analytics</a> website:\n  </p>\n  <table>\n    <tbody>\n      <tr>\n        <td><b><i>Cookie</i></b></td>\n        <td><b><i>Typical content</i></b></td>\n        <td><b><i>Purpose</i></b></td>\n        <td><b><i>Expires</i></b></td>\n      </tr>\n      <tr>\n        <td>_utma</td>\n        <td>Randomly generated number</td>\n        <td>This cookie is typically written to the browser upon the first visit to our site from that web browser. This cookie is used to determine unique visitors to our site and it is updated with each page view. Additionally, this cookie is provided with a unique ID that Google Analytics uses to ensure both the validity and accessibility of the cookie as an extra security measure.</td>\n        <td>This cookie will stay on your browser for 2 years.</td>\n      </tr>\n      <tr>\n        <td>_utmb</td>\n        <td>Randomly generated number</td>\n        <td>This cookie is used to establish and continue a user session with our site. Each time a user visits a different page on our site, this cookie is updated to expire in 30 minutes, continuing a single session for as long as user activity continues within 30 minute intervals. This cookie expires when a user pauses on a page on our site for longer than 30 minutes.</td>\n        <td>This cookie will stay on your browser for 30 minutes.</td>\n      </tr>\n      <tr>\n        <td>_utmc</td>\n        <td>Randomly generated number</td>\n        <td>This cookie operates in conjunction with the utmb cookie to determine whether or not to establish a new session for the user. Should a user visit our site, exit the browser and then return to our website within 30 minutes, the absence of the utmc cookie indicates that a new session needs to be established.</td>\n        <td>End of session.</td>\n      </tr>\n      <tr>\n        <td>_utmz</td>\n        <td>Randomly generated number + info on how the site was reached (e.g. directly or via a link, organic search or paid search)</td>\n        <td>This cookie stores the type of referral used by the visitor to reach our site, whether via a direct method, a referring link, a website search, or a campaign such as an ad or an email link. It is used to calculate search engine traffic, ad campaigns and page navigation within our own site. The cookie is updated with each page view to our site.</td>\n        <td>This cookie will stay on your browser for 6 months.</td>\n      </tr>\n    </tbody>\n  </table>\n</div>",
        "pages_page-head-tags": "<title>{{route.metaData.title}}</title>\n<meta property=\"og:title\" content=\"{{route.metaData.title}}\" data-dynamic=\"true\">",
        "pages_privacy": "<div class=\"container-fluid container-content content-page\">\n  <h1>Privacy Policy</h1>\n\n  <h3>What information do we collect?</h3>\n  <p>\n    Simply by browsing this website, Volunteer Scotland will not record any personal data about you except your IP address. \n  </p>\n  <p>\n    Your IP address is the individual identification number that is assigned to your computer when it is connected to the Internet. It is required to be used by our EU-based servers to enable you to browse the website. It is also stored for up to a month in logs to enable us to investigate errors.\n  </p>\n  <p>\n    We use Google Analytics cookies to track how the website is used, but personal data is not recorded and your internet (IP) address is anonymised. <a href=\"/cookies\">Find out more about how we use cookies</a>.\n  </p>\n  <h3>How to contact us</h3>\n  <p>\n    You can contact us at any time by writing to us at the address above, or by email or phone at: <a href=\"mailto:hello@volunteerscotland.org.uk\">hello@volunteerscotland.org.uk</a> or <a href=\"tel:+441786 479 593 \">01786 479 593</a>.\n  </p>\n  <h3>Your rights over your information</h3>\n  <p>\n    By law, you can ask us what information we hold about you, and you can ask us to correct it if it is inaccurate.  \n  </p>\n  <p>\n    You can also ask us to give you a copy of the information and to stop using your information.\n  </p>\n  <p>\n    To submit a request for your data, please contact us by email, post or telephone, please use the contact information provided above. \n  </p>\n  <h3>Your right to complain</h3>\n  <p>\n    If you have a complaint about our use of your information, you can contact the Information Commissioner's Office online at <a href=\"https://ico.org.uk/concerns\">https://ico.org.uk/concerns</a> or by phone on <a href=\"+443031231113\">0303 123 1113</a>.\n  </p>\n\n  <h3>Types of Data collected</h3>\n  <p>\n    Among the types of Personal Data that this Website collects, by itself or through third parties, there are: email address, profile picture, Cookies and Usage Data.\n  </p>\n\n  <p>\n    Complete details on each type of Personal Data collected are provided in the dedicated sections of this privacy policy or by specific explanation texts displayed prior to the Data collection.<br />\n    Personal Data may be freely provided by the User, or, in case of Usage Data, collected automatically when using this Website.<br />\n    Unless specified otherwise, all Data requested by this Website is mandatory and failure to provide this Data may make it impossible for this Website to provide its services. In cases where this Website specifically states that some Data is not mandatory, Users are free not to communicate this Data without consequences to the availability or the functioning of the Service.<br />\n    Users who are uncertain about which Personal Data is mandatory are welcome to contact the Owner.<br />\n    Any use of Cookies – or of other tracking tools – by this Website or by the owners of third-party services used by this Website serves the purpose of providing the Service required by the User, in addition to any other purposes described in the present document and in the Cookie Policy, if available.\n  </p>\n  <p>\n    Users are responsible for any third-party Personal Data obtained, published or shared through this Website and confirm that they have the third party's consent to provide the Data to the Owner.\n  </p>\n\n  <h3>Mode and place of processing the Data</h3>\n  <h4>Methods of processing</h4>\n  <p>\n    The Owner takes appropriate security measures to prevent unauthorized access, disclosure, modification, or unauthorized destruction of the Data.<br />\n    The Data processing is carried out using computers and/or IT enabled tools, following organizational procedures and modes strictly related to the purposes indicated. In addition to the Owner, in some cases, the Data may be accessible to certain types of persons in charge, involved with the operation of this Website (administration, sales, marketing, legal, system administration) or external parties (such as third-party technical service providers, mail carriers, hosting providers, IT companies, communications agencies) appointed, if necessary, as Data Processors by the Owner. The updated list of these parties may be requested from the Owner at any time.\n  </p>\n\n  <h4>Legal basis of processing</h4>\n  <p>\n    The Owner may process Personal Data relating to Users if one of the following applies:\n  </p>\n  <ul>\n    <li>Users have given their consent for one or more specific purposes. Note: Under some legislations the Owner may be allowed to process Personal Data until the User objects to such processing (“opt-out”), without having to rely on consent or any other of the following legal bases. This, however, does not apply, whenever the processing of Personal Data is subject to European data protection law;</li>\n    <li>provision of Data is necessary for the performance of an agreement with the User and/or for any pre-contractual obligations thereof;</li>\n    <li>processing is necessary for compliance with a legal obligation to which the Owner is subject;</li>\n    <li>processing is related to a task that is carried out in the public interest or in the exercise of official authority vested in the Owner;</li>\n    <li>processing is necessary for the purposes of the legitimate interests pursued by the Owner or by a third party.</li>\n  </ul>\n  <p>\n    In any case, the Owner will gladly help to clarify the specific legal basis that applies to the processing, and in particular whether the provision of Personal Data is a statutory or contractual requirement, or a requirement necessary to enter into a contract.\n  </p>\n\n  <h4>Place</h4>\n  <p>\n    The Data is processed at the Owner's operating offices and in any other places where the parties involved in the processing are located.\n  </p>\n  <p>\n    Depending on the User's location, data transfers may involve transferring the User's Data to a country other than their own. To find out more about the place of processing of such transferred Data, Users can check the section containing details about the processing of Personal Data.\n  </p>\n  <p>\n    Users are also entitled to learn about the legal basis of Data transfers to a country outside the European Union or to any international organization governed by public international law or set up by two or more countries, such as the UN, and about the security measures taken by the Owner to safeguard their Data.\n  </p>\n  <p>\n    If any such transfer takes place, Users can find out more by checking the relevant sections of this document or inquire with the Owner using the information provided in the contact section.\n  </p>\n  <h4>Retention time</h4>\n  <p>\n    Personal Data shall be processed and stored for as long as required by the purpose they have been collected for.\n  </p>\n  <p>\n    Therefore:\n  </p>\n  <ul>\n    <li>Personal Data collected for purposes related to the performance of a contract between the Owner and the User shall be retained until such contract has been fully performed.</li>\n    <li>Personal Data collected for the purposes of the Owner’s legitimate interests shall be retained as long as needed to fulfill such purposes. Users may find specific information regarding the legitimate interests pursued by the Owner within the relevant sections of this document or by contacting the Owner.</li>\n    <li>The Owner may be allowed to retain Personal Data for a longer period whenever the User has given consent to such processing, as long as such consent is not withdrawn. Furthermore, the Owner may be obliged to retain Personal Data for a longer period whenever required to do so for the performance of a legal obligation or upon order of an authority.</li>\n  </ul>\n  <p>\n    Once the retention period expires, Personal Data shall be deleted. Therefore, the right to access, the right to erasure, the right to rectification and the right to data portability cannot be enforced after expiration of the retention period.\n  </p>\n\n  <h3>The purposes of processing</h3>\n  <p>\n    The Data concerning the User is collected to allow the Owner to provide its Services, as well as for the following purposes: Registration and authentication and Analytics.\n  </p>\n  <p>\n    Users can find further detailed information about such purposes of processing and about the specific Personal Data used for each purpose in the respective sections of this document.\n  </p>\n\n  <h3>Detailed information on the processing of Personal Data</h3>\n  <p>\n    Personal Data is collected for the following purposes and using the following services:\n  </p>\n\n  <h4>Analytics</h4>\n  <p>\n    The services contained in this section enable the Owner to monitor and analyze web traffic and can be used to keep track of User behavior.\n  </p>\n  <p><strong>Google Analytics (Google LLC)</strong></p>\n  <p>\n    Google Analytics is a web analysis service provided by Google LLC (“Google”). Google utilizes the Data collected to track and examine the use of this Website, to prepare reports on its activities and share them with other Google services.<br />\n    Google may use the Data collected to contextualize and personalize the ads of its own advertising network.<br />\n    Personal Data collected: Cookies and Usage Data.\n  </p>\n  <p>\n    Place of processing: United States – <a href=\"https://policies.google.com/privacy\">Privacy Policy</a> – <a href=\"https://tools.google.com/dlpage/gaoptout?hl=en\">Opt Out</a>. Privacy Shield participant.\n  </p>\n\n  <h4>Registration and authentication</h4>\n  <p>\n    By registering or authenticating, Users allow this Website to identify them and give them access to dedicated services.<br />\n    Depending on what is described below, third parties may provide registration and authentication services. In this case, this Website will be able to access some Data, stored by these third-party services, for registration or identification purposes.\n  </p>\n  <p><strong>Firebase Authentication (Google LLC)</strong></p>\n  <p>\n    Firebase Authentication is a registration and authentication service provided by Google LLC. To simplify the registration and authentication process, Firebase Authentication can make use of third-party identity providers and save the information on its platform.<br />\n    Personal Data collected: email address and profile picture.\n  </p>\n  <p>\n    Place of processing: United States – <a href=\"https://policies.google.com/privacy\">Privacy Policy</a>. Privacy Shield participant.\n  </p>\n\n  <h3>The rights of Users</h3>\n  <p>\n    Users may exercise certain rights regarding their Data processed by the Owner.\n  </p>\n\n  <p>\n    In particular, Users have the right to do the following:\n  </p>\n\n  <ul>\n    <li>Withdraw their consent at any time. Users have the right to withdraw consent where they have previously given their consent to the processing of their Personal Data.</li>\n    <li>Object to processing of their Data. Users have the right to object to the processing of their Data if the processing is carried out on a legal basis other than consent. Further details are provided in the dedicated section below.</li>\n    <li>Access their Data. Users have the right to learn if Data is being processed by the Owner, obtain disclosure regarding certain aspects of the processing and obtain a copy of the Data undergoing processing.</li>\n    <li>Verify and seek rectification. Users have the right to verify the accuracy of their Data and ask for it to be updated or corrected.</li>\n    <li>Restrict the processing of their Data. Users have the right, under certain circumstances, to restrict the processing of their Data. In this case, the Owner will not process their Data for any purpose other than storing it.</li>\n    <li>Have their Personal Data deleted or otherwise removed. Users have the right, under certain circumstances, to obtain the erasure of their Data from the Owner.</li>\n    <li>Receive their Data and have it transferred to another controller. Users have the right to receive their Data in a structured, commonly used and machine readable format and, if technically feasible, to have it transmitted to another controller without any hindrance. This provision is applicable provided that the Data is processed by automated means and that the processing is based on the User's consent, on a contract which the User is part of or on pre-contractual obligations thereof.</li>\n    <li>Lodge a complaint. Users have the right to bring a claim before their competent data protection authority.</li>\n  </ul>\n  <h4>Details about the right to object to processing</h4>\n  <p>\n    Where Personal Data is processed for a public interest, in the exercise of an official authority vested in the Owner or for the purposes of the legitimate interests pursued by the Owner, Users may object to such processing by providing a ground related to their particular situation to justify the objection.\n  </p>\n  <p>\n    Users must know that, however, should their Personal Data be processed for direct marketing purposes, they can object to that processing at any time without providing any justification. To learn, whether the Owner is processing Personal Data for direct marketing purposes, Users may refer to the relevant sections of this document.\n  </p>\n  <h4>How to exercise these rights</h4>\n  <p>\n    Any requests to exercise User rights can be directed to the Owner through the contact details provided in this document. These requests can be exercised free of charge and will be addressed by the Owner as early as possible and always within one month.\n  </p>\n  <h3>Additional information about Data collection and processing</h3>\n  <h4>Legal action</h4>\n  <p>\n    The User's Personal Data may be used for legal purposes by the Owner in Court or in the stages leading to possible legal action arising from improper use of this Website or the related Services.<br />\n    The User declares to be aware that the Owner may be required to reveal personal data upon request of public authorities.\n  </p>\n\n  <h4>Additional information about User's Personal Data</h4>\n  <p>\n    In addition to the information contained in this privacy policy, this Website may provide the User with additional and contextual information concerning particular Services or the collection and processing of Personal Data upon request.\n  </p>\n\n  <h4>System logs and maintenance</h4>\n  <p>\n    For operation and maintenance purposes, this Website and any third-party services may collect files that record interaction with this Website (System logs) use other Personal Data (such as the IP Address) for this purpose.\n  </p>\n\n  <h4>Information not contained in this policy</h4>\n  <p>\n    More details concerning the collection or processing of Personal Data may be requested from the Owner at any time. Please see the contact information at the beginning of this document.\n  </p>\n\n  <h4>How “Do Not Track” requests are handled</h4>\n  <p>\n    This Website does not support “Do Not Track” requests.<br />\n    To determine whether any of the third-party services it uses honor the “Do Not Track” requests, please read their privacy policies.\n  </p>\n\n  <h4>Changes to this privacy policy</h4>\n  <p>\n    The Owner reserves the right to make changes to this privacy policy at any time by giving notice to its Users on this page and possibly within this Website and/or - as far as technically and legally feasible - sending a notice to Users via any contact information available to the Owner. It is strongly recommended to check this page often, referring to the date of the last modification listed at the bottom.\n  </p>\n\n  <p>\n    Should the changes affect processing activities performed on the basis of the User’s consent, the Owner shall collect new consent from the User, where required.\n  </p>\n\n  <h3>Definitions and legal references</h3>\n  <h4>Personal Data (or Data)</h4>\n  <p>\n    Any information that directly, indirectly, or in connection with other information — including a personal identification number — allows for the identification or identifiability of a natural person.\n  </p>\n\n  <h4>Usage Data</h4>\n  <p>\n    Information collected automatically through this Website (or third-party services employed in this Website), which can include: the IP addresses or domain names of the computers utilized by the Users who use this Website, the URI addresses (Uniform Resource Identifier), the time of the request, the method utilized to submit the request to the server, the size of the file received in response, the numerical code indicating the status of the server's answer (successful outcome, error, etc.), the country of origin, the features of the browser and the operating system utilized by the User, the various time details per visit (e.g., the time spent on each page within the Website) and the details about the path followed within the Website with special reference to the sequence of pages visited, and other parameters about the device operating system and/or the User's IT environment.\n  </p>\n\n  <h4>User</h4>\n  <p>\n    The individual using this Website who, unless otherwise specified, coincides with the Data Subject.\n  </p>\n\n  <h4>Data Subject</h4>\n  <p>\n    The natural person to whom the Personal Data refers.\n  </p>\n\n  <h4>Data Processor (or Data Supervisor)</h4>\n  <p>\n    The natural or legal person, public authority, agency or other body which processes Personal Data on behalf of the Controller, as described in this privacy policy.\n  </p>\n\n  <h4>Data Controller (or Owner)</h4>\n  <p>\n    The natural or legal person, public authority, agency or other body which, alone or jointly with others, determines the purposes and means of the processing of Personal Data, including the security measures concerning the operation and use of this Website. The Data Controller, unless otherwise specified, is the Owner of this Website.\n  </p>\n\n  <h4>This Website</h4>\n  <p>\n    The means by which the Personal Data of the User is collected and processed.\n  </p>\n\n  <h4>Service</h4>\n  <p>\n    The service provided by this Website as described in the relative terms (if available) and on this site.\n  </p>\n\n  <h4>European Union (or EU)</h4>\n  <p>\n    Unless otherwise specified, all references made within this document to the European Union include all current member states to the European Union and the European Economic Area.\n  </p>\n\n  <h4>Cookies</h4>\n  <p>\n    Small sets of data stored in the User's device.\n  </p>\n\n  <h4>Legal information</h4>\n  <p>\n    This privacy statement has been prepared based on provisions of multiple legislations, including Art. 13/14 of Regulation (EU) 2016/679 (General Data Protection Regulation).\n  </p>\n\n  <p>\n    This privacy policy relates solely to this Website, if not stated otherwise within this document.\n  </p>\n</div>\n",
        "pages_test": "<div class=\"container-fluid container-content content-page\">\n<a class=\"resp-sharing-button mdc-button mdc-button--raised noext\" href=\"https://facebook.com/sharer/sharer.php?u={{@root.data.primaryResponse.hits.hits.[0]._source.url}}\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Facebook\">\n  <span class=\"fab fa-facebook resp-sharing-logo mdc-list-item__graphic\" aria-label=\"Share on Facebook\"></span> Share on Facebook\n</a>\n\n<a class=\"resp-sharing-button mdc-button mdc-button--raised noext\" href=\"https://twitter.com/intent/tweet/?text={{> social_link_text opportunity=@root.data.primaryResponse.hits.hits.[0]._source}}\" target=\"_blank\" rel=\"noopener\" aria-label=\"Share on Twitter\">\n  <span class=\"fab fa-twitter resp-sharing-logo mdc-list-item__graphic\" aria-label=\"Share on Twitter\"></span> Share on Twitter\n</a>\n\n</div>",
        "pages_widget_builder-head-tags": "<title>{{route.metaData.title}}</title>\n<meta property=\"og:title\" content=\"{{route.metaData.title}}\" data-dynamic=\"true\">\n<script type=\"text/javascript\" charset=\"utf-8\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"{{~>asset_url url='libraries/farbtastic/farbtastic.js'~}}\"></script>\n<link rel=\"stylesheet\" href=\"{{~>asset_url url='libraries/farbtastic/farbtastic.css'~}}\" type=\"text/css\" />\n{{#unless @root.request.body.type ~}}\n<script type=\"text/javascript\">\n$(document).ready(function() {\n  jQuery.fn.farbtastic = function (callback) {\n    $.farbtastic(this, callback);\n    return this;\n  };\n\n  jQuery.farbtastic = function (container, callback) {\n    var container = $(container).get(0);\n    return container.farbtastic || (container.farbtastic = new jQuery._farbtastic(container, callback));\n  }\n\n  jQuery._farbtastic = function (container, callback) {\n    // Store farbtastic object\n    var fb = this;\n\n    // Insert markup\n    $(container).html('<div class=\"farbtastic\"><div class=\"color\"></div><div class=\"wheel\"></div><div class=\"overlay\"></div><div class=\"h-marker marker\"></div><div class=\"sl-marker marker\"></div></div>');\n    var e = $('.farbtastic', container);\n    fb.wheel = $('.wheel', container).get(0);\n    // Dimensions\n    fb.radius = 84;\n    fb.square = 100;\n    fb.width = 194;\n\n    // Fix background PNGs in IE6\n    if (navigator.appVersion.match(/MSIE [0-6]\\./)) {\n      $('*', e).each(function () {\n        if (this.currentStyle.backgroundImage != 'none') {\n          var image = this.currentStyle.backgroundImage;\n          image = this.currentStyle.backgroundImage.substring(5, image.length - 2);\n          $(this).css({\n            'backgroundImage': 'none',\n            'filter': \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='\" + image + \"')\"\n          });\n        }\n      });\n    }\n\n    /**\n    * Link to the given element(s) or callback.\n    */\n    fb.linkTo = function (callback) {\n      // Unbind previous nodes\n      if (typeof fb.callback == 'object') {\n        $(fb.callback).unbind('keyup', fb.updateValue);\n      }\n\n      // Reset color\n      fb.color = null;\n\n      // Bind callback or elements\n      if (typeof callback == 'function') {\n        fb.callback = callback;\n      } else if (typeof callback == 'object' || typeof callback == 'string') {\n        fb.callback = $(callback);\n        fb.callback.bind('keyup', fb.updateValue);\n        if (fb.callback.get(0).value) {\n          fb.setColor(fb.callback.get(0).value);\n        }\n      }\n      return this;\n    }\n    fb.updateValue = function (event) {\n      if (this.value && this.value != fb.color) {\n        fb.setColor(this.value);\n      }\n    }\n\n    /**\n    * Change color with HTML syntax #123456\n    */\n    fb.setColor = function (color) {\n      var unpack = fb.unpack(color);\n      if (fb.color != color && unpack) {\n        fb.color = color;\n        fb.rgb = unpack;\n        fb.hsl = fb.RGBToHSL(fb.rgb);\n        fb.updateDisplay();\n      }\n      return this;\n    }\n\n    /**\n    * Change color with HSL triplet [0..1, 0..1, 0..1]\n    */\n    fb.setHSL = function (hsl) {\n      fb.hsl = hsl;\n      fb.rgb = fb.HSLToRGB(hsl);\n      fb.color = fb.pack(fb.rgb);\n      fb.updateDisplay();\n      return this;\n    }\n\n    /////////////////////////////////////////////////////\n\n    /**\n    * Retrieve the coordinates of the given event relative to the center\n    * of the widget.\n    */\n    fb.widgetCoords = function (event) {\n      var x, y;\n      var el = event.target || event.srcElement;\n      var reference = fb.wheel;\n\n      if (typeof event.offsetX != 'undefined') {\n        // Use offset coordinates and find common offsetParent\n        var pos = {\n          x: event.offsetX,\n          y: event.offsetY\n        };\n\n        // Send the coordinates upwards through the offsetParent chain.\n        var e = el;\n        while (e) {\n          e.mouseX = pos.x;\n          e.mouseY = pos.y;\n          pos.x += e.offsetLeft;\n          pos.y += e.offsetTop;\n          e = e.offsetParent;\n        }\n\n        // Look for the coordinates starting from the wheel widget.\n        var e = reference;\n        var offset = {\n          x: 0,\n          y: 0\n        }\n        while (e) {\n          if (typeof e.mouseX != 'undefined') {\n            x = e.mouseX - offset.x;\n            y = e.mouseY - offset.y;\n            break;\n          }\n          offset.x += e.offsetLeft;\n          offset.y += e.offsetTop;\n          e = e.offsetParent;\n        }\n\n        // Reset stored coordinates\n        e = el;\n        while (e) {\n          e.mouseX = undefined;\n          e.mouseY = undefined;\n          e = e.offsetParent;\n        }\n      } else {\n        // Use absolute coordinates\n        var pos = fb.absolutePosition(reference);\n        x = (event.pageX || 0 * (event.clientX + $('html').get(0).scrollLeft)) - pos.x;\n        y = (event.pageY || 0 * (event.clientY + $('html').get(0).scrollTop)) - pos.y;\n      }\n      // Subtract distance to middle\n      return {\n        x: x - fb.width / 2,\n        y: y - fb.width / 2\n      };\n    }\n\n    /**\n    * Mousedown handler\n    */\n    fb.mousedown = function (event) {\n      // Capture mouse\n      if (!document.dragging) {\n        $(document).bind('mousemove', fb.mousemove).bind('mouseup', fb.mouseup);\n        document.dragging = true;\n      }\n\n      // Check which area is being dragged\n      var pos = fb.widgetCoords(event);\n      fb.circleDrag = Math.max(Math.abs(pos.x), Math.abs(pos.y)) * 2 > fb.square;\n\n      // Process\n      fb.mousemove(event);\n      return false;\n    }\n\n    /**\n    * Mousemove handler\n    */\n    fb.mousemove = function (event) {\n      // Get coordinates relative to color picker center\n      var pos = fb.widgetCoords(event);\n\n      // Set new HSL parameters\n      if (fb.circleDrag) {\n        var hue = Math.atan2(pos.x, -pos.y) / 6.28;\n        if (hue < 0) hue += 1;\n        fb.setHSL([hue, fb.hsl[1], fb.hsl[2]]);\n      } else {\n        var sat = Math.max(0, Math.min(1, -(pos.x / fb.square) + .5));\n        var lum = Math.max(0, Math.min(1, -(pos.y / fb.square) + .5));\n        fb.setHSL([fb.hsl[0], sat, lum]);\n      }\n      return false;\n    }\n\n    /**\n    * Mouseup handler\n    */\n    fb.mouseup = function () {\n      // Uncapture mouse\n      $(document).unbind('mousemove', fb.mousemove);\n      $(document).unbind('mouseup', fb.mouseup);\n      document.dragging = false;\n    }\n\n    /**\n    * Update the markers and styles\n    */\n    fb.updateDisplay = function () {\n      // Markers\n      var angle = fb.hsl[0] * 6.28;\n      $('.h-marker', e).css({\n        left: Math.round(Math.sin(angle) * fb.radius + fb.width / 2) + 'px',\n        top: Math.round(-Math.cos(angle) * fb.radius + fb.width / 2) + 'px'\n      });\n\n      $('.sl-marker', e).css({\n        left: Math.round(fb.square * (.5 - fb.hsl[1]) + fb.width / 2) + 'px',\n        top: Math.round(fb.square * (.5 - fb.hsl[2]) + fb.width / 2) + 'px'\n      });\n\n      // Saturation/Luminance gradient\n      $('.color', e).css('backgroundColor', fb.pack(fb.HSLToRGB([fb.hsl[0], 1, 0.5])));\n\n      // Linked elements or callback\n      if (typeof fb.callback == 'object') {\n        // Set background/foreground color\n        $(fb.callback).css({\n          backgroundColor: fb.color,\n          color: fb.hsl[2] > 0.5 ? '#000' : '#fff'\n        });\n        var label = \"#\"+fb.callback[0].id+\"_label\";\n        $(label).css({\n          color: fb.hsl[2] > 0.5 ? '#000' : '#fff'\n        });\n\n        // Change linked value\n        $(fb.callback).each(function () {\n          if (this.value && this.value != fb.color) {\n            this.value = fb.color;\n            $('.' + this.id).css('background-color', fb.color);\n          }\n        });\n      } else if (typeof fb.callback == 'function') {\n        fb.callback.call(fb, fb.color);\n      }\n    }\n\n    /**\n    * Get absolute position of element\n    */\n    fb.absolutePosition = function (el) {\n      var r = {\n        x: el.offsetLeft,\n        y: el.offsetTop\n      };\n      // Resolve relative to offsetParent\n      if (el.offsetParent) {\n        var tmp = fb.absolutePosition(el.offsetParent);\n        r.x += tmp.x;\n        r.y += tmp.y;\n      }\n      return r;\n    };\n\n    /* Various color utility functions */\n    fb.pack = function (rgb) {\n      var r = Math.round(rgb[0] * 255);\n      var g = Math.round(rgb[1] * 255);\n      var b = Math.round(rgb[2] * 255);\n      return '#' + (r < 16 ? '0' : '') + r.toString(16) + (g < 16 ? '0' : '') + g.toString(16) + (b < 16 ? '0' : '') + b.toString(16);\n    }\n\n    fb.unpack = function (color) {\n      if (color.length == 7) {\n        return [parseInt('0x' + color.substring(1, 3)) / 255,\n        parseInt('0x' + color.substring(3, 5)) / 255,\n        parseInt('0x' + color.substring(5, 7)) / 255];\n      } else if (color.length == 4) {\n        return [parseInt('0x' + color.substring(1, 2)) / 15,\n        parseInt('0x' + color.substring(2, 3)) / 15,\n        parseInt('0x' + color.substring(3, 4)) / 15];\n      }\n    }\n\n    fb.HSLToRGB = function (hsl) {\n      var m1, m2, r, g, b;\n      var h = hsl[0],\n      s = hsl[1],\n      l = hsl[2];\n      m2 = (l <= 0.5) ? l * (s + 1) : l + s - l * s;\n      m1 = l * 2 - m2;\n      return [this.hueToRGB(m1, m2, h + 0.33333),\n        this.hueToRGB(m1, m2, h),\n        this.hueToRGB(m1, m2, h - 0.33333)];\n      }\n\n      fb.hueToRGB = function (m1, m2, h) {\n        h = (h < 0) ? h + 1 : ((h > 1) ? h - 1 : h);\n        if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n        if (h * 2 < 1) return m2;\n        if (h * 3 < 2) return m1 + (m2 - m1) * (0.66666 - h) * 6;\n        return m1;\n      }\n\n      fb.RGBToHSL = function (rgb) {\n        var min, max, delta, h, s, l;\n        var r = rgb[0],\n        g = rgb[1],\n        b = rgb[2];\n        min = Math.min(r, Math.min(g, b));\n        max = Math.max(r, Math.max(g, b));\n        delta = max - min;\n        l = (min + max) / 2;\n        s = 0;\n        if (l > 0 && l < 1) {\n          s = delta / (l < 0.5 ? (2 * l) : (2 - 2 * l));\n        }\n        h = 0;\n        if (delta > 0) {\n          if (max == r && max != g) h += (g - b) / delta;\n          if (max == g && max != b) h += (2 + (b - r) / delta);\n          if (max == b && max != r) h += (4 + (r - g) / delta);\n          h /= 6;\n        }\n        return [h, s, l];\n      }\n\n      // Install mousedown handler (the others are set on the document on-demand)\n      $('*', e).mousedown(fb.mousedown);\n\n      // Init color\n      fb.setColor('#000000');\n\n      // Set linked elements/callback\n      if (callback) {\n        fb.linkTo(callback);\n      }\n    }\n\n\n    $(function () {\n      $('#demo').hide();\n      var f = $.farbtastic('#colorpicker');\n      $('.colorwell')\n      .each(function () {\n        f.linkTo(this);\n      })\n      .focus(function () {\n        f.linkTo(this);\n      });\n    });\n\n  });\n</script>\n{{/unless ~}}",
        "pages_widget_builder": "{{#withExtend this settings=@root.request.params.query}}\n  <div class=\"container-fluid container-content content-page\">\n    <h2>Search widget builder</h2>\n    <form id=\"widget-builder\">\n      <p class=\"mdc-typography--body1\">\n        Please choose a widget type and optional location filter.\n      </p>\n      <div class=\"mdc-layout-grid\">\n        <div class=\"mdc-layout-grid__inner\">\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-9-desktop mdc-layout-grid__cell--span-9-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n              <span class=\"mdc-select__dropdown-icon\"></span>\n              <select class=\"mdc-select__native-control\" id=\"type\" name=\"type\">\n                <option value=\"opportunities\"{{#compare settings.type \"opportunities\"}} selected{{/compare}}>Volunteering opportunities</option>\n                <option value=\"organisations-all\"{{#compare settings.type \"organisations-all\"}} selected{{/compare}}>Volunteering organisations</option>\n              </select>\n              <label class=\"mdc-floating-label\" for=\"type\">\n                Widget type\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n            <div class=\"mdc-select\" data-mdc-auto-init=\"MDCSelect\">\n              <span class=\"mdc-select__dropdown-icon\"></span>\n              <select class=\"mdc-select__native-control\" id=\"filter\" name=\"filter\">\n                <option value=\"all\">All of Scotland (no filter)</option>\n                <option value=\"aberdeen-city\"{{#compare settings.filter \"aberdeen-city\"}} selected{{/compare}}>Aberdeen</option>\n                <option value=\"aberdeenshire\"{{#compare settings.filter \"aberdeenshire\"}} selected{{/compare}}>Aberdeenshire</option>\n                <option value=\"angus\"{{#compare settings.filter \"angus\"}} selected{{/compare}}>Angus</option>\n                <option value=\"argyll-and-bute\"{{#compare settings.filter \"argyll-and-bute\"}} selected{{/compare}}>Argyll and Bute</option>\n                <option value=\"clackmannanshire\"{{#compare settings.filter \"Clackmannanshire\"}} selected{{/compare}}>Clackmannanshire</option>\n                <option value=\"dumfries-and-galloway\"{{#compare settings.filter \"dumfries-and-galloway\"}} selected{{/compare}}>Dumfries and Galloway</option>\n                <option value=\"dundee-city\"{{#compare settings.filter \"dundee-city\"}} selected{{/compare}}>Dundee</option>\n                <option value=\"east-ayrshire\"{{#compare settings.filter \"east-ayrshire\"}} selected{{/compare}}>East Ayrshire</option>\n                <option value=\"east-dunbartonshire\"{{#compare settings.filter \"east-dunbartonshire\"}} selected{{/compare}}>East Dunbartonshire</option>\n                <option value=\"east-lothian\"{{#compare settings.filter \"east-lothian\"}} selected{{/compare}}>East Lothian</option>\n                <option value=\"east-renfrewshire\"{{#compare settings.filter \"east-renfrewshire\"}} selected{{/compare}}>East Renfrewshire</option>\n                <option value=\"edinburgh-city\"{{#compare settings.filter \"edinburgh-city\"}} selected{{/compare}}>Edinburgh</option>\n                <option value=\"falkirk\"{{#compare settings.filter \"falkirk\"}} selected{{/compare}}>Falkirk</option>\n                <option value=\"fife\"{{#compare settings.filter \"fife\"}} selected{{/compare}}>Fife</option>\n                <option value=\"glasgow-city\"{{#compare settings.filter \"glasgow-city\"}} selected{{/compare}}>Glasgow</option>\n                <option value=\"highland\"{{#compare settings.filter \"highland\"}} selected{{/compare}}>Highland</option>\n                <option value=\"inverclyde\"{{#compare settings.filter \"inverclyde\"}} selected{{/compare}}>Inverclyde</option>\n                <option value=\"midlothian\"{{#compare settings.filter \"midlothian\"}} selected{{/compare}}>Midlothian</option>\n                <option value=\"moray\"{{#compare settings.filter \"moray\"}} selected{{/compare}}>Moray</option>\n                <option value=\"western-isles\"{{#compare settings.filter \"western-isles\"}} selected{{/compare}}>Na h-Eileanan Siar (Western Isles)</option>\n                <option value=\"north-ayrshire\"{{#compare settings.filter \"north-ayrshire\"}} selected{{/compare}}>North Ayrshire</option>\n                <option value=\"north-lanarkshire\"{{#compare settings.filter \"north-lanarkshire\"}} selected{{/compare}}>North Lanarkshire</option>\n                <option value=\"orkney-islands\"{{#compare settings.filter \"orkney-islands\"}} selected{{/compare}}>Orkney</option>\n                <option value=\"perth-and-kinross\"{{#compare settings.filter \"perth-and-kinross\"}} selected{{/compare}}>Perth and Kinross</option>\n                <option value=\"renfrewshire\"{{#compare settings.filter \"renfrewshire\"}} selected{{/compare}}>Renfrewshire</option>\n                <option value=\"scottish-borders\"{{#compare settings.filter \"scottish-borders\"}} selected{{/compare}}>Scottish Borders</option>\n                <option value=\"shetland-islands\"{{#compare settings.filter \"shetland-islands\"}} selected{{/compare}}>Shetland</option>\n                <option value=\"south-ayrshire\"{{#compare settings.filter \"south-ayrshire\"}} selected{{/compare}}>South Ayrshire</option>\n                <option value=\"south-lanarkshire\"{{#compare settings.filter \"south-lanarkshire\"}} selected{{/compare}}>South Lanarkshire</option>\n                <option value=\"stirling\"{{#compare settings.filter \"stirling\"}} selected{{/compare}}>Stirling</option>\n                <option value=\"west-dunbartonshire\"{{#compare settings.filter \"west-dunbartonshire\"}} selected{{/compare}}>West Dunbartonshire</option>\n                <option value=\"west-lothian\"{{#compare settings.filter \"west-lothian\"}} selected{{/compare}}>West Lothian</option>\n              </select>\n              <label class=\"mdc-floating-label\" for=\"filter\">\n                Search filter\n              </label>\n              <div class=\"mdc-line-ripple\"></div>\n            </div>\n            <div class=\"mdc-layout-grid colorwells\">\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"colour_primary\" name=\"colour_primary\" type=\"text\" maxlength=\"7\" class=\"colorwell mdc-text-field__input mdc-text-field--fullwidth\"\n                        value=\"{{default settings.colour_primary '#00a0af'}}\" data-lpignore=\"true\" />\n                    <label class=\"mdc-floating-label\" id=\"colour_primary_label\" for=\"colour_primary\">\n                      Colour (primary)\n                    </label>\n                  </div>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <div class=\"mdc-text-field mdc-text-field--box\" data-mdc-auto-init=\"MDCTextField\">\n                    <input id=\"colour_secondary\" name=\"colour_secondary\" type=\"text\" maxlength=\"7\" class=\"colorwell mdc-text-field__input mdc-text-field--fullwidth\"\n                        value=\"{{default settings.colour_secondary '#387c2c'}}\" data-lpignore=\"true\" />\n                    <label class=\"mdc-floating-label\" id=\"colour_secondary_label\" for=\"colour_secondary\">\n                      Colour (secondary)\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"mdc-form-field\">\n              <div class=\"mdc-checkbox\" data-mdc-auto-init=\"MDCCheckbox\">\n                <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"no_conflict\" id=\"no_conflict\" value=\"off\"\n                    {{#if (compare settings.no_conflict 'on')}}checked{{/if}}/>\n                <div class=\"mdc-checkbox__background\">\n                  <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                    <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n                  </svg>\n                  <div class=\"mdc-checkbox__mixedmark\"></div>\n                </div>\n              </div>\n              <label for=\"no_conflict\">Use a \"No conflict\" version of the widget</label>\n            </div>\n            <p class=\"mdc-typography--body2 t-margin-none\">\n              In the unlikely instance that you run into any problems caused by conflicting Javascript modules on the page you\n              are embedding the widget check this box.\n            </p>\n            <div class=\"mdc-form-field\">\n              <div class=\"mdc-checkbox\" data-mdc-auto-init=\"MDCCheckbox\">\n                <input type=\"checkbox\" class=\"mdc-checkbox__native-control\" name=\"enable_mva\" id=\"enable_mva\" value=\"on\"\n                    {{#unless (compare settings.enable_mva 'off')}} checked{{/unless}} />\n                <div class=\"mdc-checkbox__background\">\n                  <svg class=\"mdc-checkbox__checkmark\" viewBox=\"0 0 24 24\">\n                    <path class=\"mdc-checkbox__checkmark-path\" fill=\"none\" d=\"M1.73,12.91 8.1,19.28 22.79,4.59\"/>\n                  </svg>\n                  <div class=\"mdc-checkbox__mixedmark\"></div>\n                </div>\n              </div>\n              <label for=\"enable_mva\">Use 'My Volunteer Account' to register interest for opportunities</label>\n            </div>\n            <p class=\"mdc-typography--body2 t-margin-none\">\n              My Volunteer Account allows volunteers to easily manage their own profile and save opportunities for later, and\n              enables better tracking of opportunity registrations for TSIs and VIOs. If you choose not to use this option,\n              the volunteer will be provided with the contact email for the opportunity.\n            </p>\n          </div>\n          <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-3-tablet mdc-layout-grid__cell--span-4-phone\">\n            <div id=\"colorpicker\"></div>\n          </div>\n        </div>\n      </div>\n      <button class=\"mdc-button mdc-button--raised mdc-button--large mdc-button--fullwidth mdc-ripple-surface mdc-ripple-surface--primary mdc-ripple-upgraded\"\n          type=\"submit\" data-mdc-auto-init=\"MDCRipple\">\n        <span class=\"far fa-cog fa-fw mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n        Generate\n      </button>\n    </form>\n\n    <div id=\"widget-preview-panel\" style=\"display: none;\">\n      <h3>How to embed the widget</h3>\n      <p class=\"mdc-typography--body1\">\n        Please use the following code to embed the specified search widget on your own website:\n      </p>\n      <div class=\"embed copyable\" id=\"code\"></div>\n      <button class=\"btn copy js-copy-code-btn\" data-source=\"embed\" unselectable=\"on\">\n        <span class=\"fal fa-clipboard\" aria-hidden=\"true\"></span>\n        Copy\n      </button>\n\n      <h3>Preview</h3>\n      <div id=\"widget-preview\"></div>\n    </div>\n    <script type=\"text/javascript\">\n      function fallbackCopyTextToClipboard(text) {\n        var textArea = document.createElement(\"textarea\");\n        textArea.value = text;\n        document.body.appendChild(textArea);\n        textArea.focus();\n        textArea.select();\n\n        try {\n          var successful = document.execCommand('copy');\n          var msg = successful ? 'successful' : 'unsuccessful';\n          console.log('Fallback: Copying text command was ' + msg);\n        } catch (err) {\n          console.error('Fallback: Oops, unable to copy', err);\n        }\n\n        document.body.removeChild(textArea);\n      }\n      function copyTextToClipboard(text) {\n        if (!navigator.clipboard) {\n          fallbackCopyTextToClipboard(text);\n          return;\n        }\n        navigator.clipboard.writeText(text).then(function() {\n          console.log('Async: Copying to clipboard was successful!');\n        }, function(err) {\n          console.error('Async: Could not copy text: ', err);\n        });\n      }\n\n      var copyCodeBtn = document.querySelector('.js-copy-code-btn');\n\n      copyCodeBtn.addEventListener('click', function(event) {\n        copyTextToClipboard($('#code')[0].innerText);\n      });\n\n      document.querySelector('#widget-builder').addEventListener('submit', function(evt) {\n        evt.preventDefault();\n        updateScriptTags();\n      });\n\n      function updateScriptTags() {\n        $('#widget-preview-panel').css('display', 'block');\n        $('#widget-preview').empty();\n        window.location.hash = '';\n\n        var type = $('#type').val();\n        var filter = $('#filter').val();\n        var colour_primary = $('#colour_primary').val();\n        var colour_secondary = $('#colour_secondary').val();\n        var no_conflict = $('#no_conflict').is(':checked');\n        var enable_mva = $('#enable_mva').is(':checked');\n\n        var widgetSrc = 'https://widget.search.volunteerscotland.net/' + (no_conflict ? 'no-conflict-' : '') + 'widget.js';\n        var dataUrl = 'https://search.volunteerscotland.net/widget/' + type;\n\n        if (window.location.hostname === 'volunteerscotland-search.local') {\n          widgetSrc = widgetSrc.replace('widget.search.volunteerscotland.net', 'volunteerscotland-search.local:9000');\n          dataUrl = dataUrl.replace('search.volunteerscotland.net', 'volunteerscotland-search.local:8080');\n        }\n\n        var scriptTag = $('<script>').attr({\n          'src': widgetSrc,\n          'data-url': dataUrl\n        });\n\n        if (filter && filter !== 'all') {\n          scriptTag.attr('data-tsi', filter);\n        }\n\n        if (colour_primary && colour_primary !== \"#00a0af\") {\n          scriptTag.attr('data-colour-primary', colour_primary);\n        }\n\n        if (colour_secondary && colour_secondary !== \"#387c2c\") {\n          scriptTag.attr('data-colour-secondary', colour_secondary);\n        }\n\n        if (type === 'opportunities' && !enable_mva) {\n          scriptTag.attr('data-disable-mva', 'true');\n        }\n\n        var scriptTagHtml = scriptTag[0].outerHTML;\n        $('#code').text(scriptTagHtml);\n\n        scriptTag.attr('src', scriptTag.attr('src').replace('widget.js', 'no-conflict-widget.js'));\n        console.log(scriptTag[0].outerHTML);\n        $('#widget-preview')[0].insertAdjacentElement('afterbegin', scriptTag[0]);\n      }\n    </script>\n  </div>\n{{/withExtend}}",
        "robots": "User-agent: *\nDisallow: /test-ab/\n\nUser-agent: litefinder\nDisallow: /\n\nUser-agent: Slurp\nDisallow: /\n\nUser-agent: Baidu\nDisallow: /\n",
        "useremail": "Hey hey hey! {{#unless sparrows}}Heelo{{/unless}}"
      },
      "layouts": {
        "data": "{{{layoutParts.content}}}",
        "default": "<!doctype html>\n<html lang=\"en\">\n<head prefix=\"og: http://ogp.me/ns#\">\n  <meta charset=\"utf-8\">\n  {{!-- <base href=\"/\"> --}}\n  <!-- Google Tag Manager -->\n  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n  })(window,document,'script','dataLayer','GTM-54T7D3G');</script>\n  <!-- End Google Tag Manager -->\n  {{{layoutParts.head}}}\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n  <!--\n\n  Powered by:\n  ███████╗ ██████╗██╗   ██╗ ██████╗ ██╗  ██████╗  ██████╗ ██╗   ██╗████████╗███████╗██████╗\n  ██╔════╝██╔════╝██║   ██║██╔═══██╗╚██╗ ██╔══██╗██╔═══██╗██║   ██║╚══██╔══╝██╔════╝██╔══██╗\n  ███████╗██║     ██║   ██║██║   ██║ ╚██╗██████╔╝██║   ██║██║   ██║   ██║   █████╗  ██████╔╝\n  ╚════██║██║     ╚██╗ ██╔╝██║   ██║ ██╔╝██╔══██╗██║   ██║██║   ██║   ██║   ██╔══╝  ██╔══██╗\n  ███████║╚██████╗ ╚████╔╝ ╚██████╔╝██╔╝ ██║  ██║╚██████╔╝╚██████╔╝   ██║   ███████╗██║  ██║\n  ╚══════╝ ╚═════╝  ╚═══╝   ╚═════╝ ╚═╝  ╚═╝  ╚═╝ ╚═════╝  ╚═════╝    ╚═╝   ╚══════╝╚═╝  ╚═╝\n\n  -->\n\n  <link rel=\"shortcut icon\" href=\"{{~>asset_url url='images/icons/favicon.ico'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"{{~>asset_url url='images/icons/apple-icon-57x57.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"{{~>asset_url url='images/icons/apple-icon-60x60.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"{{~>asset_url url='images/icons/apple-icon-72x72.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"{{~>asset_url url='images/icons/apple-icon-76x76.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"{{~>asset_url url='images/icons/apple-icon-114x114.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"{{~>asset_url url='images/icons/apple-icon-120x120.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"{{~>asset_url url='images/icons/apple-icon-144x144.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"{{~>asset_url url='images/icons/apple-icon-152x152.png'~}}\">\n  <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"{{~>asset_url url='images/icons/apple-icon-180x180.png'~}}\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"192x192\" href=\"{{~>asset_url url='images/icons/android-icon-192x192.png'~}}\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"{{~>asset_url url='images/icons/favicon-32x32.png'~}}\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"96x96\" href=\"{{~>asset_url url='images/icons/favicon-96x96.png'~}}\">\n  <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"{{~>asset_url url='images/icons/favicon-16x16.png'~}}\">\n  <link rel=\"manifest\" href=\"{{~>asset_url url='images/icons/manifest.json'~}}\">\n  <meta name=\"msapplication-TileColor\" content=\"#3c7524\">\n  <meta name=\"msapplication-TileImage\" content=\"{{~>asset_url url='images/icons/ms-icon-144x144.png'~}}\">\n  <meta name=\"theme-color\" content=\"#3c7524\">\n  <link rel=\"search\" type=\"application/opensearchdescription+xml\" title=\"Volunteer Scotland Search\" href=\"{{~>asset_url url='opensearch.xml'~}}\" />\n\n  <link rel=\"canonical\" href=\"https://search.volunteerscotland.net{{request.params.uri.pathname}}\" />\n\n  <script>\n  {{#ifAny request.params.query.debug (compare request.url.hostname \"volunteerscotland-search.local\") ~}}\n  console.log('#### DEBUG MODE ON ####');\n  console.log('Request:', {{{regexReplace (regexReplace (stringify request) \"(<\\/script)\" \"gi\" '</scr\\\" + \\\"ipt') \"(\\r|\\n)\" \"gi\" \"\"}}});\n  console.log('Route:', {{{regexReplace (regexReplace (stringify route) \"(<\\/script)\" \"gi\" '</scr\\\" + \\\"ipt') \"(\\r|\\n)\" \"gi\" \"\"}}});\n  console.log('Context:', {{{regexReplace (regexReplace (stringify context) \"(<\\/script)\" \"gi\" '</scr\\\" + \\\"ipt') \"(\\r|\\n)\" \"gi\" \"\"}}});\n  console.log('Data:', {{{regexReplace (regexReplace (stringify data) \"(<\\/script)\" \"gi\" '</scr\\\" + \\\"ipt') \"(\\r|\\n)\" \"gi\" \"\"}}});\n  console.log('Menus:', {{{regexReplace (regexReplace (stringify context.metaData.menus) \"(<\\/script)\" \"gi\" '</scr\\\" + \\\"ipt') \"(\\r|\\n)\" \"gi\" \"\"}}});\n  {{/ifAny ~}}\n  </script>\n\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"{{~>asset_url url='libraries/leaflet/leaflet.css'~}}\" />\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"{{~>asset_url url='libraries/fontawesome-pro/css/all.min.css'~}}\">\n\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"{{~>asset_url url='main.css'}}\">\n</head>\n<body class=\"mdc-theme--site-bg {{#if request.params.path}}{{replace request.params.path '_' ' '}}{{else}}home{{/if}}\">\n  <!-- Google Tag Manager (noscript) -->\n  <noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-54T7D3G\"\n  height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n  <!-- End Google Tag Manager (noscript) -->\n  <volunteerscotland-search-site>\n    <div class=\"mdc-typography\">\n      {{#ifAny request.params.query.debug (compare request.url.hostname \"volunteerscotland-search.local\") ~}}\n        {{#if errors.[0]}}\n          <div style=\"z-index:100;position:fixed;top:0;right:0;padding:5px;background-color:#ff0000;color:#ffffff;\">\n            Route Task Errors (F12)\n          </div>\n        {{/if}}\n        {{#if logs.[0]}}\n          <div style=\"z-index:100;position:fixed;bottom:0;right:0;padding:5px;background-color:#0000ff;color:#ffffff;\"\n               onclick=\"document.querySelector('#route-debug-log').style.display='block';\">\n            Route Log\n          </div>\n          <div style=\"z-index:100;position:fixed;bottom:0;left:0;right:0;padding:5px;background-color:#ededed;color:#000000;overflow:auto;height:50vh;display:none;border-top:1px solid #cccccc;\" id=\"route-debug-log\">\n            <a style=\"position:fixed;right:25px;\" onclick=\"document.querySelector('#route-debug-log').style.display='none';\">x</a>\n<pre style=\"white-space: pre-wrap;\">\n{{~#each logs}}\n{{{this}}}\n\n{{/each~}}\n</pre>\n          </div>\n        {{/if}}\n      {{/ifAny}}\n      <header class=\"mdc-top-app-bar\" id=\"top-bar\">\n        <div class=\"container-fluid\">\n          <div class=\"mdc-top-app-bar__row mdc-top-app-bar__upper\">\n            <section class=\"mdc-top-app-bar__section mdc-top-app-bar__section--align-start\">\n              {{!-- #unless @root.route.metaData.hideSearch ~}}\n              <!-- <button class=\"mdc-top-app-bar__navigation-icon hide-lg\" id=\"sidebar-button\" title=\"Search\">\n                <span class=\"far fa-fw fa-2x fa-search\"></span>\n              </button> -->\n              {{/unless ~ --}}\n              <span class=\"mdc-top-app-bar__title\">\n                <h1 class=\"header-text\">\n                  <a href=\"/\" class=\"noext\">\n                    <img src=\"https://storage.googleapis.com/scvo-cms/scvo-cms-content/images/logos/volunteer_scotland_search.png\" alt=\"Volunteer Scotland\" />\n                  </a>\n                </h1>\n              </span>\n            </section>\n            <section class=\"mdc-top-app-bar__section mdc-top-app-bar__section--user mdc-top-app-bar__section--align-end\">\n              <button class=\"mdc-top-app-bar__navigation-icon hide-lg\" data-drawer-target=\"#mobile-menu\" aria-label=\"Menu\">\n                <span class=\"far fa-fw fa-2x fa-bars\"></span>\n              </button>\n              {{#>components_tab_bar\n                  extraClasses=\"mdc-tab-bar__auto-width hide-sm hide-md\"\n                  id=\"upper-tab-bar\" ~}}\n                {{#each @root.context.metaData.menus.upper ~}}\n                  {{>components_tab\n                      url=(stripTrailingSlash path)\n                      active=(regexMatch @root.request.url.pathname route \"gi\")\n                      iconClasses=(if (compare icon \"===\" \"home\") \"fas fa-home\")\n                      label=(if (compare icon \"!==\" \"home\") label)}}\n                {{/each ~}}\n              {{/components_tab_bar ~}}\n                {{#>components_anchored_menu\n                    buttonClasses=\"mdc-theme--on-secondary hide-sm hide-md\"\n                    imageUrl=(default @root.data.auth.photoURL false)\n                    imageClasses=\"r-margin user-avatar\"\n                    iconClasses=(if (if @root.data.auth.photoURL false else=true) \"fas r-margin fa-user-circle\" else=false)\n                    buttonLabel=\"My Volunteer Account\"\n                    arrowClasses=\"fas fa-fw fa-angle-down\" ~}}\n                  {{#if @root.data.auth ~}}\n                    {{#each @root.context.metaData.menus.user-signed-in ~}}\n                      <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" role=\"menuitem\">\n                        {{#if icon ~}}\n                        <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                        {{/if ~}}\n                        {{{label}}}\n                      </a>\n                    {{/each ~}}\n                  {{else}}\n                    {{#each @root.context.metaData.menus.user-not-signed-in ~}}\n                      <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" role=\"menuitem\">\n                        {{#if icon ~}}\n                        <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n                        {{/if ~}}\n                        {{{label}}}\n                      </a>\n                    {{/each ~}}\n                  {{/if ~}}\n                {{/components_anchored_menu ~}}\n            </section>\n          </div>\n          <div class=\"mdc-top-app-bar__row mdc-top-app-bar__lower hide-sm hide-md\">\n            <section class=\"mdc-top-app-bar__section mdc-top-app-bar__section--align-start mdc-top-app-bar__main\">\n              {{#>components_tab_bar\n                  extraClasses=\"mdc-tab-bar__auto-width\"\n                  id=\"main-tab-bar\"}}\n                {{#each @root.context.metaData.menus.main ~}}\n                  {{>components_tab\n                      url=(stripTrailingSlash path)\n                      labelClasses=\"mdc-theme--on-secondary\"\n                      active=(regexMatch @root.request.url.pathname route \"gi\")\n                      label=label}}\n                {{/each ~}}\n                {{#each @root.context.metaData.menus.main-extra ~}}\n                  {{>components_tab\n                      url=(stripTrailingSlash path)\n                      labelClasses=\"mdc-theme--on-secondary\"\n                      active=(regexMatch @root.request.url.pathname route \"gi\")\n                      label=label}}\n                {{/each ~}}\n              {{/components_tab_bar}}\n            </section>\n          </div>\n        </div>\n      </header>\n\n      <aside class=\"mdc-drawer mdc-drawer--modal\" id=\"mobile-menu\" data-mdc-auto-init=\"MDCDrawer\">\n        <div class=\"mdc-drawer__content\">\n          <nav class=\"mdc-list\">\n            <a class=\"mdc-list-item {{#compare @root.request.url.pathname \"/\"}} mdc-list-item--activated{{/compare}}\" href=\"/\" {{#compare @root.request.url.pathname \"/\"}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/compare}}>\n              <span class=\"far fa-home mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              Home\n            </a>\n            {{#each @root.context.metaData.menus.main ~}}\n            <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" {{#if (regexMatch @root.request.url.pathname route \"gi\")}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/if}}>\n              {{#if icon ~}}\n              <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              {{/if ~}}\n              {{{label}}}\n            </a>\n            {{/each ~}}\n            {{#each @root.context.metaData.menus.main-extra ~}}\n            <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" {{#if (regexMatch @root.request.url.pathname route \"gi\")}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/if}}>\n              {{#if icon ~}}\n              <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              {{/if ~}}\n              {{{label}}}\n            </a>\n            {{/each ~}}\n            <div role=\"separator\" class=\"mdc-list-divider\"></div>\n            {{#if @root.data.auth ~}}\n            <a class=\"mdc-list-item mdc-list-item__user\" href=\"#\">\n              <span class=\"mdc-list-item__graphic\" aria-hidden=\"true\">\n                <img src=\"{{@root.data.auth.photoURL}}\" />\n              </span>\n              <span class=\"mdc-list-item__text\">{{@root.data.auth.email}}</span>\n            </a>\n            {{#each @root.context.metaData.menus.user-signed-in ~}}\n            {{#compare path \"===\" \"/\" ~}}\n            {{else}}\n            <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\"\n               href=\"{{stripTrailingSlash path}}\" {{#if (regexMatch @root.request.url.pathname route \"gi\")}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/if}}>\n              {{#if icon ~}}\n              <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              {{/if ~}}\n              {{{label}}}\n            </a>\n            {{/compare ~}}\n            {{/each ~}}\n            {{else}}\n            <a class=\"mdc-list-item mdc-list-item__user\" href=\"#\">\n              <span class=\"mdc-list-item__graphic\" aria-hidden=\"true\">\n                <span class=\"fas fa-fw fa-user-circle\"></span>\n              </span>\n              <span class=\"mdc-list-item__text\">My Volunteer Account</span>\n            </a>\n            {{#each @root.context.metaData.menus.user-not-signed-in ~}}\n            <a class=\"mdc-list-item {{#if (regexMatch @root.request.url.pathname route \"gi\")}} mdc-list-item--activated{{/if}}\" href=\"{{stripTrailingSlash path}}\" {{#if (regexMatch @root.request.url.pathname route \"gi\")}}aria-selected=\"true\"{{else}}aria-hidden=\"true\"{{/if}}>\n              {{#if icon ~}}\n              <span class=\"far fa-{{icon}} mdc-list-item__graphic\" aria-hidden=\"true\"></span>\n              {{/if ~}}\n              {{{label}}}\n            </a>\n            {{/each ~}}\n            {{/if ~}}\n          </nav>\n        </div>\n      </aside>\n\n      <div class=\"mdc-drawer-scrim\"></div>\n\n      <main class=\"mdc-theme--background {{#if layoutParts.sidebar}}drawer-container-permanent{{else}}drawer-container-temporary{{/if}}\">\n        {{#if layoutParts.sidebar ~}}\n        <aside class=\"mdc-drawer mdc-elevation--z0 mdc-drawer--occasional\" id=\"sidebar-temporary\" data-menu-button=\"#sidebar-button\">\n          {{{layoutParts.sidebar}}}\n        </aside>\n        <div class=\"mdc-drawer-scrim\"></div>\n        {{/if}}\n        {{{layoutParts.body}}}\n      </main>\n\n      <footer class=\"mdc-layout__footer\">\n        <div class=\"footer-main\">\n          <div class=\"container-fluid\">\n            <div class=\"mdc-layout-grid\">\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone info\">\n                  <h3>Accessibility</h3>\n                  <ul class=\"mdc-list\">\n                    {{#each @root.context.metaData.menus.footer-info ~}}\n                      <li class=\"mdc-list-item\">\n                        <a href=\"{{path}}\">{{{label}}}</a>\n                      </li>\n                    {{/each ~}}\n                  </ul>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone help\">\n                  <h3>Terms & conditions</h3>\n                  <ul class=\"mdc-list\">\n                    {{#each @root.context.metaData.menus.footer-cookies-terms ~}}\n                    <li class=\"mdc-list-item\">\n                      <a href=\"{{path}}\">{{{label}}}</a>\n                    </li>\n                    {{/each ~}}\n                    <div id=\"google_translate_element\"></div>\n                  </ul>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone contact\">\n                  <h3>Contact us</h3>\n                  <ul class=\"fa-ul\">\n                    <!--<li>-->\n                      <!--<span class=\"fa-li\"><span class=\"fas fa-envelope\"></span></span>-->\n                      <!--<a href=\"https://www.volunteerscotland.net/about-us/contact-us/tick-to-hear-from-us/\">Sign up to hear from us</a>-->\n                    <!--</li>-->\n                    {{#each @root.context.metaData.menus.footer-contact ~}}\n                      <li>\n                        {{#if icon}}<span class=\"fa-li\"><span class=\"far fa-{{icon}}\"></span></span>{{/if}}\n                        <a href=\"{{path}}\">{{{label}}}</a>\n                      </li>\n                    {{/each ~}}\n                  </ul>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-4-phone about\">\n                  <h3>About</h3>\n                  <p>\n                    This site is run in partnership between <a href=\"https://www.volunteerscotland.net\">Volunteer Scotland</a> and the <a href=\"https://scvo.org\">Scottish Council for Voluntary Organisations</a>.\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"footer-copyright\">\n          <div class=\"container-fluid\">\n            <div class=\"mdc-layout-grid\">\n              <div class=\"mdc-layout-grid__inner\">\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-9-desktop mdc-layout-grid__cell--span-6-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <p>\n                    &copy; {{momentFormat (moment) \"YYYY\"}}. Volunteer Development Scotland Ltd. (also known as Volunteer Scotland) is a registered Scottish charity No. <a href=\"https://www.oscr.org.uk/about-charities/search-the-register/charity-details?number=SC013740\">SC013740</a> and a company limited by guarantee, registered in Scotland, No. <a href=\"https://beta.companieshouse.gov.uk/company/SC106743\">SC106743</a>. Our registered Office is Jubilee House, Forthside Way, Stirling. FK8 1QZ.\n                  </p>\n                </div>\n                <div class=\"mdc-layout-grid__cell mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-2-tablet mdc-layout-grid__cell--span-4-phone\">\n                  <a href=\"https://www.volunteerscotland.net\" class=\"brand-logo vs noext\" title=\"Volunteer Scotland\">\n                    <img src=\"https://www.volunteerscotland.net/media/333407/volunteer_scotland_hi-res_png.png\" alt=\"Volunteer Scotland\" />\n                  </a>\n                  <a href=\"https://scvo.org\" class=\"brand-logo scvo noext\" title=\"Scottish Council for Voluntary Organisations\">\n                    <img src=\"https://storage.googleapis.com/scvo-assets/scvo-frontend/assets/images/logos/scvo.png\" alt=\"Scottish Council for Voluntary Organisations\" />\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n    <div class=\"mdc-snackbar mdc-elevation--z10\" aria-live=\"assertive\" aria-atomic=\"true\" aria-hidden=\"true\" id=\"app-snackbar\">\n      <div class=\"mdc-snackbar__text\"></div>\n      <div class=\"mdc-snackbar__action-wrapper\">\n        <button type=\"button\" class=\"mdc-snackbar__action-button\"></button>\n      </div>\n    </div>\n  </volunteerscotland-search-site>\n\n  {{#if @root.data.auth}}{{else}}{{> dialog_favourites}}{{> dialog_volunteer}}{{/if}}\n\n  <script type=\"text/javascript\">\n  var $buoop = {required:{e:-3,f:-3,o:-3,s:-1,c:-3},insecure:true,unsupported:true,api:2018.07 };\n  function $buo_f(){\n    var e = document.createElement(\"script\");\n    e.src = \"//browser-update.org/update.min.js\";\n    document.body.appendChild(e);\n  };\n  try {document.addEventListener(\"DOMContentLoaded\", $buo_f,false)}\n  catch(e){window.attachEvent(\"onload\", $buo_f)}\n  </script>\n\n  <script type=\"text/javascript\" src=\"{{~>asset_url url='main.js'~}}\" charset=\"utf-8\"></script>\n  <script>\n    var volunteerscotland = null; readyListeners = [];\n    $(document).ready(function() {\n      volunteerscotland = new VolunteerScotlandSearch.VolunteerScotlandSearch({\n        \"apiKey\": \"AIzaSyAwCMOrTj2eq8tVAdgD3vrgRqz9oIluiYk\",\n        \"authDomain\": \"auth.search.volunteerscotland.net\",\n        \"databaseURL\": \"https://scvo-volunteerscotland-search.firebaseio.com\",\n        \"projectId\": \"scvo-volunteerscotland-search\",\n        \"storageBucket\": \"scvo-volunteerscotland-search.appspot.com\",\n        \"messagingSenderId\": \"7952458796\"\n      });\n      ready = true;\n      readyListeners.forEach(function(listener) {\n        listener();\n      });\n    });\n\n    function registerReadyListener(listener) {\n      if (volunteerscotland) {\n        listener();\n      } else {\n        readyListeners.push(listener);\n      }\n    }\n  </script>\n\n  {{{layoutParts.foot}}}\n</body>\n</html>"
      },
      "queries": {
        "account_favourites": "{\n  \"size\": 1000,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title\",\n    \"organisation_name\",\n    \"end_date\"\n  ],\n  \"query\": {\n    \"ids\": {\n      \"values\": {{{stringify (split (concat (map @root.data.favourites.items.[0] (getProp \"value\")) \",\" (getKeys @root.data.profileInfo.notes) \",\" @root.request.cookies.recently_viewed) \",\")}}}\n    }\n  }\n}\n",
        "analytics_widget-page-view": "{{#if (contains @root.request.url.path \"widget\") ~}}\n  {{#json}}\n    {{{json key=\"dp\" value=@root.request.url.path}}},\n    {{{json key=\"dt\" value=@root.route.name}}},\n    {{{json key=\"dh\" value=(getProperty (parseUrl (default @root.request.headers.referer \"search.volunteerscotland.net\")) \"hostname\")}}}\n  {{/json}}\n{{else}}\n{{#json}}{{/json}}\n{{/if ~}}",
        "events_event": "{\n  \"size\": 1,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"date_last_modified\",\n    \"milo_ref\",\n    \"start_date\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"description_html\",\n    \"end_date\",\n    \"expenses_paid\",\n    \"experience_required\",\n    \"restriction_details\",\n    \"frequency_commitment_details\",\n    \"geo_coords\",\n    \"geo\",\n    \"advertised_areas\",\n    \"minimum_age\",\n    \"maximum_age\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_twitter\",\n    \"organisation_twitter_url\",\n    \"organisation_facebook\",\n    \"organisation_facebook_url\",\n    \"organisation_linkedin\",\n    \"organisation_linkedin_url\",\n    \"organisation_contact_first_name\",\n    \"organisation_contact_last_name\",\n    \"organisation_contact_email\",\n    \"opportunity_contact_first_name\",\n    \"opportunity_contact_last_name\",\n    \"opportunity_contact_email\",\n    \"opportunity_contact_via_organisation\",\n    \"opportunity_contact_via_tsi\",\n    \"tsi_contact_first_name\",\n    \"tsi_contact_last_name\",\n    \"tsi_contact_email\",\n    \"tsi_name\",\n    \"opportunity_contact_phone\",\n    \"support_options\",\n    \"goodhq_organisation.image_url\",\n    \"og_image\",\n    \"title\",\n    \"travel_expenses\",\n    \"travel_details\",\n    \"activities\",\n    \"activities_slugs\",\n    \"monday_afternoon\",\n    \"monday_evening\",\n    \"monday_morning\",\n    \"tuesday_afternoon\",\n    \"tuesday_evening\",\n    \"tuesday_morning\",\n    \"wednesday_afternoon\",\n    \"wednesday_evening\",\n    \"wednesday_morning\",\n    \"thursday_afternoon\",\n    \"thursday_evening\",\n    \"thursday_morning\",\n    \"friday_afternoon\",\n    \"friday_evening\",\n    \"friday_morning\",\n    \"saturday_afternoon\",\n    \"saturday_evening\",\n    \"saturday_morning\",\n    \"sunday_afternoon\",\n    \"sunday_evening\",\n    \"sunday_morning\",\n    \"availability\",\n    \"availability_slugs\",\n    \"timings_description\",\n    \"taster_available\",\n    \"taster_details\",\n    \"volunteersearch_age_group\",\n    \"volunteersearch_age_group_slugs\",\n    \"volunteersearch_support_option\",\n    \"volunteersearch_support_option_slugs\",\n    \"opportunity_contact_email\",\n    \"weblink\",\n    \"weblink_title\",\n    \"weblink_tooltip\",\n    \"organisation_website\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"should\": [\n        {\n          \"term\": {\n            \"Id\": \"{{@root.request.params.id}}\"\n          }\n        },\n        {\n          \"term\": {\n            \"slug\": \"{{@root.request.params.id}}\"\n          }\n        }\n      ],\n      \"minimum_should_match\": 1\n    }\n  }\n}\n",
        "events_favourites-current": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"title\",\n    \"geo_coords\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters request.params.query}}\n      ],\n      \"must\": [\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (map @root.data.favourites.items.[0] (getProp \"value\"))}}}\n          }\n        }\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/if ~}}\n  ]\n}\n",
        "events_home-latest-personalised": "{\n  \"size\": 10,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      {{#ifAll @root.data.auth @root.data.searches.items.[0] ~}}\n      \"should\": [\n        {{#each @root.data.searches.items.[0] ~}}\n        {{#with (querystring querystring) ~}}\n        {\n          \"bool\": {\n            \"filter\": [\n              {{>queries_opportunity_search_filters this}}\n            ],\n            \"must\": [\n              {{>queries_opportunity_search_must this}}\n            ]\n          }\n        }\n        {{#unless @last}},{{/unless}}\n        {{/with ~}}\n        {{/each ~}}\n      ],\n      \"minimum_should_match\": 1\n      {{else}}\n      \"must\": [\n        {\n          \"match_none\": {}\n        }\n      ]\n      {{/ifAll ~}}\n    }\n  },\n  \"sort\": {\n    \"date_last_modified\": \"desc\"\n  }\n}\n",
        "events_home-latest": "{\n  \"size\": 10,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters request.params.query}}\n      ]\n    }\n  },\n  \"sort\": {\n    \"date_last_modified\": \"desc\"\n  }\n}\n",
        "events_local-authority-areas": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {\n          \"geo_shape\": {\n            \"shape\": {\n              \"shape\": {\n                \"type\": \"circle\",\n                \"coordinates\": [\n                  {{@root.request.params.query.lng}},\n                  {{@root.request.params.query.lat}}\n                ],\n                \"radius\": \"{{default @root.request.params.query.distance \"10\"}}mi\"\n              }\n            }\n          }\n        }\n      ]\n    }\n  },\n  \"aggs\": {\n    \"local_authority_areas\": {\n      \"terms\": {\n        \"field\": \"place\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "events_notes-open": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"milo_ref\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{#if data.profileInfo.notes}}\n          {{>queries_terms field=\"Id\" terms=(getKeys data.profileInfo.notes)}}\n        {{else}}{\n          \"terms\": {\n            \"Id\": [\"find_nothing\"]\n          }\n        }\n        {{/if}}\n\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{/if ~}}\n  ]\n}\n",
        "events_organisation-events-open": "{\n  \"size\": 4,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"milo_ref\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters request.params.query}}\n          ],\n          \"must\": [\n            {\n              \"match\": {\n                \"organisation_id\" : \"{{data.primaryResponse.hits.hits.[0]._source.Id}}\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"sort\": {\n    \"start_date\": \"asc\"\n  }\n}\n\n",
        "events_organisations": "{\n  \"size\": 0,\n  \"_source\": false,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_do_nothing}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"organisations\": {\n      \"terms\": {\n        \"field\": \"organisation_id\",\n        \"size\": 10000\n      }\n    }\n  }\n}",
        "events_recently-viewed": "{\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description_html\",\n    \"end_date\",\n    \"expenses_paid\",\n    \"experience_required\",\n    \"frequency_commitment_details\",\n    \"geo_coords\",\n    \"geo\",\n    \"minimum_age\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_twitter\",\n    \"organisation_twitter_url\",\n    \"organisation_facebook\",\n    \"organisation_facebook_url\",\n    \"organisation_linkedin\",\n    \"organisation_linkedin_url\",\n    \"organisation_contact_first_name\",\n    \"organisation_contact_last_name\",\n    \"organisation_contact_email\",\n    \"support_options\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"monday_afternoon\",\n    \"monday_evening\",\n    \"monday_morning\",\n    \"tuesday_afternoon\",\n    \"tuesday_evening\",\n    \"tuesday_morning\",\n    \"wednesday_afternoon\",\n    \"wednesday_evening\",\n    \"wednesday_morning\",\n    \"thursday_afternoon\",\n    \"thursday_evening\",\n    \"thursday_morning\",\n    \"friday_afternoon\",\n    \"friday_evening\",\n    \"friday_morning\",\n    \"saturday_afternoon\",\n    \"saturday_evening\",\n    \"saturday_morning\",\n    \"sunday_afternoon\",\n    \"sunday_evening\",\n    \"sunday_morning\",\n    \"availability\",\n    \"availability_slugs\",\n    \"taster_available\",\n    \"volunteersearch_age_group\",\n    \"volunteersearch_age_group_slugs\",\n    \"volunteersearch_support_option\",\n    \"volunteersearch_support_option_slugs\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {{#if @root.request.cookies.recently_viewed}}\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (split @root.request.cookies.recently_viewed ',')}}}\n      }\n      }\n        {{else}}\n        {\n          \"match_none\": {}\n        }\n        {{/if}}\n      ]\n    }\n  }\n}\n",
        "events_registered-interest-current": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"title\",\n    \"milo_ref\",\n    \"geo_coords\",\n    \"opportunity_contact_first_name\",\n    \"opportunity_contact_last_name\",\n    \"organisation_website\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"opportunity_contact_email\",\n    \"url\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (map @root.data.registeredInterest.items.[0] (getProp \"value\"))}}}\n          }\n        }\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.id ~}}\n    {\n      \"_script\": {\n        \"type\": \"number\",\n        \"script\": {\n          \"lang\": \"painless\",\n          \"inline\": \"if(params.target == (doc['Id'].value)) { return 0; } return 1000;\",\n          \"params\": {\n            \"target\": \"{{@root.request.params.query.id}}\"\n          }\n        },\n        \"order\": \"asc\"\n      }\n    }\n    {{else}}\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/if ~}}\n    {{/if ~}}\n  ]\n}\n",
        "events_related": "{\n  \"size\": 4,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters @root.request.params.query}}\n          ],\n          {{#if @root.data.primaryResponse.hits.hits.[0] ~}}\n          \"should\": [\n            {\n              \"match\": {\n                \"remuneration_type\" : {\n                  \"query\" : \"{{@root.data.primaryResponse.hits.hits.[0]._source.remuneration_type}}\",\n                  \"operator\" : \"and\",\n                  \"zero_terms_query\": \"all\"\n                }\n              }\n            },\n            {\n              \"match\": {\n                \"title\" : {\n                  \"query\" : \"{{@root.data.primaryResponse.hits.hits.[0]._source.title}}\",\n                  \"operator\" : \"and\",\n                  \"zero_terms_query\": \"all\"\n                }\n              }\n            },\n            {\n              \"terms\": {\n                \"themes_slugs\": {{{stringify (arrayify @root.data.primaryResponse.hits.hits.[0]._source.themes_slugs)}}}\n              }\n            },\n            {\n              \"terms\": {\n                \"activities_slugs\": {{{stringify (arrayify @root.data.primaryResponse.hits.hits.[0]._source.activities_slugs)}}}\n              }\n            }\n          ],\n          {{/if ~}}\n          \"must_not\": [\n            {\n              \"term\": {\n                \"Id\": \"{{@root.data.primaryResponse.hits.hits.[0]._source.Id}}\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n",
        "events_search-aggregations": "{\n  \"size\": 0,\n  \"_source\": [\n    \"Id\",\n    \"title\",\n    \"title_slug\",\n    \"organisation_name\",\n    \"closing_date\",\n    \"geo_coords\",\n    \"slug\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ]\n    }\n  },\n  \"aggs\" : {\n    \"admin_district\": {\n      \"terms\": {\n        \"field\": \"geo.codes.admin_district\",\n        \"size\": 3000\n      }\n    }\n  }\n  {{#ifAll @root.request.params.query.lat @root.request.params.query.lon}},\n  \"sort\": {\n    \"_geo_distance\": {\n      \"geo_coords\": {\n        \"lat\": {{@root.request.params.query.lat}},\n        \"lon\": {{@root.request.params.query.lon}}\n      },\n      \"order\": \"asc\",\n      \"unit\": \"mi\",\n      \"mode\": \"min\",\n      \"distance_type\": \"arc\"\n    }\n  }\n  {{/ifAll}}\n}\n",
        "events_search-list": "{\n  \"size\": 10,\n  \"from\": {{multiply (subtract (default @root.request.params.query.page 1) 1) 10}},\n  \"highlight\": {\n    \"fields\": {\n      \"text_bag\": {},\n      \"text_bag_boost\": {}\n    }\n  },\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"date_last_modified\",\n    \"description\",\n    \"goodhq_organisation.image_url\",\n    \"geo_coords\",\n    \"advertised_areas\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\",\n    \"start_date\",\n    \"end_date\"\n  ],\n  {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"source\": \"if (!doc['geo_coords'].empty) { doc['geo_coords'].arcDistance(params.lat, params.lon) * 0.000621371; }\"\n      }\n    }\n  },\n  {{/ifAll}}\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters @root.request.params.query}},\n            {{>queries_opportunity_search_filters @root.request.params.query}}\n          ],\n          \"must\": [\n            {{>queries_opportunity_search_must @root.request.params.query}}\n          ],\n          \"should\": [\n            {{>queries_opportunity_search_should @root.request.params.query}}\n          ]\n          {{#ifAll @root.request.params.query.exclude @root.request.params.query.lat @root.request.params.query.lng ~}},\n            \"must_not\": [\n              {\n                \"geo_distance\": {\n                  \"distance\": \"{{default @root.request.params.query.distance \"10\"}}mi\",\n                  \"geo_coords\": {\n                    \"lat\": {{@root.request.params.query.lat}},\n                    \"lon\": {{@root.request.params.query.lng}}\n                  }\n                }\n              }\n            ]\n          {{/ifAll ~}}\n        }\n      },\n      \"boost_mode\": \"multiply\",\n      \"functions\" : [\n        {{!-- If we are sorting there is no need to do scoring --}}\n        {{#unless @root.request.params.query.sort}}\n          {\n            \"{{@root.context.metaData.searchKnobs.dateLastModified.function}}\": {\n              \"date_last_modified\": {\n                \"scale\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.scale}}},\n                \"offset\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.offset}}},\n                \"decay\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.decay}}}\n              }\n            }\n          }\n          {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}},\n            {\n              \"{{@root.context.metaData.searchKnobs.distance.function}}\": {\n                \"geo_coords\": {\n                  \"origin\": {\n                    \"lat\": {{@root.request.params.query.lat}},\n                    \"lon\": {{@root.request.params.query.lng}}\n                  },\n                  \"scale\": {{{stringify @root.context.metaData.searchKnobs.distance.scale}}},\n                  \"offset\": {{{stringify @root.context.metaData.searchKnobs.distance.offset}}},\n                  \"decay\": {{{stringify @root.context.metaData.searchKnobs.distance.decay}}}\n                }\n              }\n            }\n          {{/ifAll}}\n        {{/unless}}\n      ]\n    }\n  }\n  {{#if @root.request.params.query.sort}},\n  \"sort\": [\n    {{#switch @root.request.params.query.sort}}\n      {{#case \"distance\"}}\n        {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}\n          {\n            \"_geo_distance\": {\n              \"geo_coords\": {\n                \"lat\": {{@root.request.params.query.lat}},\n                \"lon\": {{@root.request.params.query.lng}}\n              },\n              \"order\": \"asc\",\n              \"unit\": \"mi\",\n              \"mode\": \"min\",\n              \"distance_type\": \"arc\"\n            }\n          }\n        {{/ifAll}}\n      {{/case}}\n      {{#case \"newest\"}}\n        {\n          \"date_last_modified\": \"desc\"\n        }\n      {{/case}}\n      {{#case \"oldest\"}}\n        {\n          \"date_last_modified\": \"asc\"\n        }\n      {{/case}}\n    {{/switch}}\n  ]\n  {{/if}}\n}",
        "events_search-map-areas": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_areas @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "events_search-map-home": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_home @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "events_search-map-locations": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_locations @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "events_search-map": "{\n  \"size\": 10000,\n  \"_source\": [\n    \"Id\",\n    \"title\",\n    \"title_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"description\",\n    \"postcode\",\n    \"geo_coords\",\n    \"slug\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ]\n    }\n  },\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"aggs\": {\n    \"geo_search\": {\n      \"geo_distance\": {\n        \"field\": \"geo_coords\",\n        \"origin\": \"{{@root.request.params.query.lat}}, {{@root.request.params.query.lng}}\",\n        \"unit\": \"mi\",\n        \"ranges\": [\n          {\n            \"to\": {{default @root.request.params.query.distance \"1000\"}}\n          },\n          {\n            \"from\": {{default @root.request.params.query.distance \"1000\"}}\n          }\n        ]\n      }\n    },\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  },\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"inline\": \"def l = new ArrayList(); for (int i=0; i<doc['geo_coords'].values.length; i++) { double dist = Double.MAX_VALUE; double TO_METERS = 6371008.7714D; double TO_RADIANS = Math.PI / 180D; double doc_lat, doc_lon, x1, x2, h1, h2, h, cdist; doc_lat = params._source['geo_coords'][i].lat; doc_lon = params._source['geo_coords'][i].lon; x1 = doc_lat * TO_RADIANS; x2 = params.lat * TO_RADIANS; h1 = 1 - Math.cos(x1 - x2); h2 = 1 - Math.cos((doc_lon - params.lon) * TO_RADIANS); h = h1 + Math.cos(x1) * Math.cos(x2) * h2; cdist = TO_METERS * 2 * Math.asin(Math.min(1, Math.sqrt(h * 0.5))); dist = Math.min(dist, cdist); l.add(dist * 0.001 * 0.621371) } return l;\",\n        \"lang\": \"painless\",\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        }\n      }\n    }\n  },\n  {{/ifAll ~}}\n  \"sort\": [\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n      {\n        \"_geo_distance\": {\n          \"geo_coords\": {\n            \"lat\": {{@root.request.params.query.lat}},\n            \"lon\": {{@root.request.params.query.lng}}\n          },\n          \"order\": \"asc\",\n          \"unit\": \"mi\",\n          \"mode\": \"min\",\n          \"distance_type\": \"arc\"\n        }\n      }\n    {{else}}\n      {\n        \"closing_date\": \"asc\"\n      }\n    {{/ifAll ~}}\n  ]\n}\n",
        "events_types": "{\n  \"size\": 0,\n  \"_source\": false,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"volunteersearch_types\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_type\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"volunteersearch_types_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_type_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"themes\": {\n      \"terms\": {\n        \"field\": \"themes\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"themes_slugs\": {\n      \"terms\": {\n        \"field\": \"themes_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"activities\": {\n      \"terms\": {\n        \"field\": \"activities\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"activities_slugs\": {\n      \"terms\": {\n        \"field\": \"activities_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"age_groups\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_age_group\",\n        \"order\": {\n          \"age\": \"asc\"\n        },\n        \"size\": 10000\n      },\n      \"aggs\": {\n         \"age\": {\n            \"max\": {\n               \"field\": \"minimum_age\"\n            }\n         }\n      }\n    },\n    \"age_groups_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_age_group_slugs\",\n        \"order\": {\n          \"age\": \"asc\"\n        },\n        \"size\": 10000\n      },\n      \"aggs\": {\n         \"age\": {\n            \"max\": {\n               \"field\": \"minimum_age\"\n            }\n         }\n      }\n    },\n    \"availability\": {\n      \"terms\": {\n        \"field\": \"availability\",\n        \"size\": 10000\n      }\n    },\n    \"availability_slugs\": {\n      \"terms\": {\n        \"field\": \"availability_slugs\",\n        \"size\": 10000\n      }\n    },\n\n    \"services\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_support_option\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"services_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_support_option_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"advertised_areas_slugs\": {\n      \"terms\": {\n        \"field\": \"advertised_areas_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    }\n  }\n}\n",
        "geo-lookup": "{\n  \"size\": 6,\n  \"_source\": [\"place\", \"display\", \"point\"],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {\n          \"terms\": {\n            \"_type\": [\n              {{#compare (length @root.request.params.query.q) \">\" 4}}\n                \"os_place\", \"postcode\"\n              {{else}}\n                \"os_place\", \"outcode\"\n              {{/compare}}\n            ] \n          }\n        }\n      ],\n      \"must\": [\n        {\n          \"query_string\": {\n             \"fields\": [\"autocomplete\", \"textbag\"],\n             \"query\":\n              {{~#if (regexMatch @root.request.params.query.q \"^([A-Z]{1,2})(([0-9][A-Z])|([0-9]{1,2}))\" \"ig\")~}}\n                {{{stringify (replace @root.request.params.query.q \" \" \"\")}}}\n              {{else}}\n                {{{stringify (lowercase @root.request.params.query.q)}}}\n              {{~/if~}}\n          }\n        },\n        {\n          \"term\": {\n            \"country\": {\n              \"value\": \"Scotland\"\n            }\n          }\n        }\n      ],\n      \"should\": [\n        {\n          \"term\": {\n            \"localType\": {\n              \"value\": \"City\",\n              \"boost\": 5\n            }\n          }\n        },\n        {\n          \"term\": {\n            \"localType\": {\n              \"value\": \"Town\",\n              \"boost\": 2\n            }\n          }\n        }\n      ],\n      \"boost\": 1\n    }\n  }\n}",
        "goodhq_posts": "{\n  \"size\": 3,\n  \"_source\": [\n    \"rendered.goodmoves_list\"\n  ],\n  \"query\": {\n    \"term\": {\n      \"goodhq_organisation.xid\": \"{{data.primaryResponse.hits.hits.[0]._source.goodhq_organisation.xid}}\"\n    }\n  },\n  \"sort\": {\n    \"date_posted\": \"desc\"\n  }\n}",
        "goodhq_reviews": "{\n  \"size\": 3,\n  \"_source\": [\n    \"rendered.goodmoves_list\"\n  ],\n  \"query\": {\n    \"term\": {\n      \"goodhq_organisation.xid\": \"{{data.primaryResponse.hits.hits.[0]._source.goodhq_organisation.xid}}\"\n    }\n  },\n  \"sort\": {\n    \"date_posted\": \"desc\"\n  }\n}",
        "goodhq_volunteering": "{\n  \"size\": 3,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {\n          \"term\": {\n            \"goodhq_organisation.xid\": \"{{data.primaryResponse.hits.hits.[0]._source.goodhq_organisation.xid}}\"\n          }\n        }\n      ],\n      \"must_not\": [\n        {\n          \"terms\": {\n            \"activities_slugs\": [\"committee-work\"]\n          }\n        }\n      ]\n    }\n  },\n  \"sort\": {\n    \"available_from\": \"desc\"\n  }\n}\n",
        "map-regions": "{\n  \"size\": 10000,\n  \"_source\": [\n    \"Id\",\n    \"place\",\n    \"point\",\n    \"shape\"\n  ]\n}\n",
        "notifications_add-saved-search": "{{#if @root.data.auth ~}}\nCALL _addSubscriptionParameters(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  {{{mysqlEscape (\n    querystringify (obj)\n      keywords=@root.request.params.query.keywords\n      regions=(sort @root.request.params.query.regions)\n      volunteersearch_types= (sort @root.request.params.query.volunteersearch_types)\n      activities=(sort @root.request.params.query.activities)\n      themes=(sort @root.request.params.query.themes)\n      services=(sort @root.request.params.query.services)\n      age_groups=(sort @root.request.params.query.age_groups)\n      availability=@root.request.params.query.availability\n      distance=@root.request.params.query.distance\n      lat=@root.request.params.query.lat\n      lng=@root.request.params.query.lng\n      location=@root.request.params.query.location\n    )\n  }}},\n  {{{mysqlEscape (default @root.request.body.name \"My saved search\")}}},\n  {{#if @root.request.body.subscribe}}1{{else}}0{{/if}}\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_add-to-favourites": "{{#if @root.data.auth ~}}\nCALL _addSubscriptionParameter(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.favouritesCampaignName}}},\n  {{{mysqlEscape 'id'}}},\n  {{{mysqlEscape @root.request.params.query.id}}},\n  'Favourites',\n  NULL\n);\n{{else}}\nSET @query=false;\n{{/if ~}}\n",
        "notifications_add-to-registered-interest": "{{#if @root.data.auth ~}}\nCALL _addSubscriptionParameter(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.registeredInterestCampaignName}}},\n  {{{mysqlEscape 'id'}}},\n  {{{mysqlEscape @root.request.params.query.id}}},\n  'Registered Interest',\n  NULL\n);\n{{else}}\nSET @query=false;\n{{/if ~}}\n",
        "notifications_delete-search": "{{#if @root.data.auth ~}}\nCALL _removeSubscriptionPartition(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  {{{mysqlEscape @root.request.body.name}}}\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_delete-user": "{{#if @root.data.auth ~}}\nCALL _removeSubscriptionPartition(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  NULL\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_get-favourites": "{{#if @root.data.auth ~}}\nCALL _getSubscriptionParameters(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.favouritesCampaignName}}},\n  'Favourites'\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_get-registered-interest": "{{#if @root.data.auth ~}}\nCALL _getSubscriptionParameters(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.registeredInterestCampaignName}}},\n  'Registered Interest'\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_get-saved-searches": "{{#if @root.data.auth ~}}\nCALL _getSubscriptions(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  NULL\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_remove-from-favourites": "{{#if @root.data.auth ~}}\nCALL _removeSubscriptionParameter(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.favouritesCampaignName}}},\n  'Favourites',\n  'id',\n  {{{mysqlEscape @root.request.params.query.id}}}\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_remove-from-registered-interest": "{{#if @root.data.auth ~}}\nCALL _removeSubscriptionParameter(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.registeredInterestCampaignName}}},\n  'Registered Interest',\n  'id',\n  {{{mysqlEscape @root.request.params.query.id}}}\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_stop-all-emails": "{{#if @root.data.auth ~}}\nUPDATE subscriptionPartitions\nSET active = 0\nWHERE\n  campaign IN ({{{mysqlEscape @root.context.metaData.emailCampaignName}}}, {{{mysqlEscape @root.context.metaData.favouritesCampaignName}}}) AND\n  email = {{{mysqlEscape @root.data.auth.email}}};\n{{else}}\nSET @query=false;\n{{/if ~}}\n",
        "notifications_toggle-favourites-subscription": "{{#if @root.data.auth ~}}\nCALL _toggleSubscriptionActiveState(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.favourites.CampaignName}}},\n  'Favourites'\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_toggle-subscription": "{{#if @root.data.auth ~}}\nCALL _toggleSubscriptionActiveState(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  {{{mysqlEscape @root.request.body.name}}}\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "notifications_update-email-preferences": "{{#if @root.data.auth ~}}\nCALL _setSubscriptionDays(\n  {{{mysqlEscape @root.data.auth.email}}},\n  {{{mysqlEscape @root.context.metaData.emailCampaignName}}},\n  '\n    {{~#if @root.request.body.sunday}}1{{/if~}}\n    {{~#if @root.request.body.monday}}2{{/if~}}\n    {{~#if @root.request.body.tuesday}}3{{/if~}}\n    {{~#if @root.request.body.wednesday}}4{{/if~}}\n    {{~#if @root.request.body.thursday}}5{{/if~}}\n    {{~#if @root.request.body.friday}}6{{/if~}}\n    {{~#if @root.request.body.saturday}}7{{/if~}}\n  '\n);\n{{else}}\nSET @query=false;\n{{/if ~}}",
        "opportunities_favourites-current": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"title\",\n    \"geo_coords\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters request.params.query}}\n      ],\n      \"must\": [\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (map @root.data.favourites.items.[0] (getProp \"value\"))}}}\n          }\n        }\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/if ~}}\n  ]\n}\n",
        "opportunities_home-latest-personalised": "{\n  \"size\": 10,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      {{#ifAll @root.data.auth @root.data.searches.items.[0] ~}}\n      \"should\": [\n        {{#each @root.data.searches.items.[0] ~}}\n        {{#with (querystring querystring) ~}}\n        {\n          \"bool\": {\n            \"filter\": [\n              {{>queries_opportunity_search_filters this}}\n            ],\n            \"must\": [\n              {{>queries_opportunity_search_must this}}\n            ]\n          }\n        }\n        {{#unless @last}},{{/unless}}\n        {{/with ~}}\n        {{/each ~}}\n      ],\n      \"minimum_should_match\": 1\n      {{else}}\n      \"must\": [\n        {\n          \"match_none\": {}\n        }\n      ]\n      {{/ifAll ~}}\n    }\n  },\n  \"sort\": {\n    \"date_last_modified\": \"desc\"\n  }\n}\n",
        "opportunities_home-latest": "{\n  \"size\": 10,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters request.params.query}}\n      ]\n    }\n  },\n  \"sort\": {\n    \"date_last_modified\": \"desc\"\n  }\n}\n",
        "opportunities_local-authority-areas": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {\n          \"geo_shape\": {\n            \"shape\": {\n              \"shape\": {\n                \"type\": \"circle\",\n                \"coordinates\": [\n                  {{@root.request.params.query.lng}},\n                  {{@root.request.params.query.lat}}\n                ],\n                \"radius\": \"{{default @root.request.params.query.distance \"10\"}}mi\"\n              }\n            }\n          }\n        }\n      ]\n    }\n  },\n  \"aggs\": {\n    \"local_authority_areas\": {\n      \"terms\": {\n        \"field\": \"place\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "opportunities_notes-open": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"milo_ref\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{#if data.profileInfo.notes}}\n          {{>queries_terms field=\"Id\" terms=(getKeys data.profileInfo.notes)}}\n        {{else}}{\n          \"terms\": {\n            \"Id\": [\"find_nothing\"]\n          }\n        }\n        {{/if}}\n\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{/if ~}}\n  ]\n}\n",
        "opportunities_opportunities-in-list": "{\n  \"size\": 10,\n  \"from\": {{multiply (subtract (default @root.request.params.query.page 1) 1) 10}},\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"date_last_modified\",\n    \"description\",\n    \"goodhq_organisation.image_url\",\n    \"geo_coords\",\n    \"geo_opportunity_info\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"local_authority\",\n    \"title\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}},\n        {\n          \"bool\": {\n            \"should\": [\n              {\n                \"term\": {\n                  \"advertised_areas_slugs\": {{{stringify @root.request.params.local_authority}}}\n                }\n              },\n              {\n                \"term\": {\n                  \"local_authority_slug\": {{{stringify @root.request.params.local_authority}}}\n                }\n              }\n            ],\n            \"minimum_should_match\": 1\n          }\n        }\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ],\n      \"should\": [\n        {{>queries_opportunity_search_should @root.request.params.query}}\n      ]\n    }\n  },\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"aggs\": {\n    \"geo_search\": {\n      \"geo_distance\": {\n        \"field\": \"geo_coords\",\n        \"origin\": \"{{@root.request.params.query.lat}}, {{@root.request.params.query.lng}}\",\n        \"unit\": \"mi\",\n        \"ranges\": [\n          {\n            \"to\": {{default @root.request.params.query.distance \"1000\"}}\n          },\n          {\n            \"from\": {{default @root.request.params.query.distance \"1000\"}}\n          }\n        ]\n      }\n    }\n  },\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"inline\": \"def l = new ArrayList(); for (int i=0; i<doc['geo_coords'].values.length; i++) { double dist = Double.MAX_VALUE; double TO_METERS = 6371008.7714D; double TO_RADIANS = Math.PI / 180D; double doc_lat, doc_lon, x1, x2, h1, h2, h, cdist; doc_lat = params._source['geo_coords'][i].lat; doc_lon = params._source['geo_coords'][i].lon; x1 = doc_lat * TO_RADIANS; x2 = params.lat * TO_RADIANS; h1 = 1 - Math.cos(x1 - x2); h2 = 1 - Math.cos((doc_lon - params.lon) * TO_RADIANS); h = h1 + Math.cos(x1) * Math.cos(x2) * h2; cdist = TO_METERS * 2 * Math.asin(Math.min(1, Math.sqrt(h * 0.5))); dist = Math.min(dist, cdist); l.add(dist * 0.001 * 0.621371) } return l;\",\n        \"lang\": \"painless\",\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        }\n      }\n    }\n  },\n  {{/ifAll ~}}\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"distance\" ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n    {\n      \"_geo_distance\": {\n        \"geo_coords\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"order\": \"asc\",\n        \"unit\": \"mi\",\n        \"mode\": \"min\",\n        \"distance_type\": \"arc\"\n      }\n    }\n    {{else}}\n    \"_score\"\n    {{/ifAll ~}}\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    \"_score\"\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    \"_score\"\n    {{/if ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}},\n    {\n      \"_geo_distance\": {\n        \"geo_coords\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"order\": \"asc\",\n        \"unit\": \"mi\",\n        \"mode\": \"min\",\n        \"distance_type\": \"arc\"\n      }\n    }\n    {{/ifAll ~}}\n  ]\n}\n",
        "opportunities_opportunities-in-map": "{\n  \"size\": 10000,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"geo_coords\",\n    \"geo_opportunity_info\",\n    \"postcode\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"title\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}},\n        {\n          \"bool\": {\n            \"should\": [\n              {\n                \"term\": {\n                  \"advertised_areas_slugs\": {{{stringify @root.request.params.local_authority}}}\n                }\n              },\n              {\n                \"term\": {\n                  \"local_authority_slug\": {{{stringify @root.request.params.local_authority}}}\n                }\n              }\n            ],\n            \"minimum_should_match\": 1\n          }\n        }\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ],\n      \"should\": [\n        {{>queries_opportunity_search_should @root.request.params.query}}\n      ]\n    }\n  },\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"aggs\": {\n    \"geo_search\": {\n      \"geo_distance\": {\n        \"field\": \"geo_coords\",\n        \"origin\": \"{{@root.request.params.query.lat}}, {{@root.request.params.query.lng}}\",\n        \"unit\": \"mi\",\n        \"ranges\": [\n          {\n            \"to\": {{default @root.request.params.query.distance \"1000\"}}\n          },\n          {\n            \"from\": {{default @root.request.params.query.distance \"1000\"}}\n          }\n        ]\n      }\n    }\n  },\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"inline\": \"def l = new ArrayList(); for (int i=0; i<doc['geo_coords'].values.length; i++) { double dist = Double.MAX_VALUE; double TO_METERS = 6371008.7714D; double TO_RADIANS = Math.PI / 180D; double doc_lat, doc_lon, x1, x2, h1, h2, h, cdist; doc_lat = params._source['geo_coords'][i].lat; doc_lon = params._source['geo_coords'][i].lon; x1 = doc_lat * TO_RADIANS; x2 = params.lat * TO_RADIANS; h1 = 1 - Math.cos(x1 - x2); h2 = 1 - Math.cos((doc_lon - params.lon) * TO_RADIANS); h = h1 + Math.cos(x1) * Math.cos(x2) * h2; cdist = TO_METERS * 2 * Math.asin(Math.min(1, Math.sqrt(h * 0.5))); dist = Math.min(dist, cdist); l.add(dist * 0.001 * 0.621371) } return l;\",\n        \"lang\": \"painless\",\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        }\n      }\n    }\n  },\n  {{/ifAll ~}}\n  \"sort\": [\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"distance\" ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n    {\n      \"_geo_distance\": {\n        \"geo_coords\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"order\": \"asc\",\n        \"unit\": \"mi\",\n        \"mode\": \"min\",\n        \"distance_type\": \"arc\"\n      }\n    }\n    {{else}}\n    \"_score\"\n    {{/ifAll ~}}\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    \"_score\"\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    \"_score\"\n    {{/if ~}}\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}},\n    {\n      \"_geo_distance\": {\n        \"geo_coords\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"order\": \"asc\",\n        \"unit\": \"mi\",\n        \"mode\": \"min\",\n        \"distance_type\": \"arc\"\n      }\n    }\n    {{/ifAll ~}}\n  ]\n}\n",
        "opportunities_opportunity": "{\n  \"size\": 1,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"date_last_modified\",\n    \"milo_ref\",\n    \"start_date\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"description_html\",\n    \"end_date\",\n    \"expenses_paid\",\n    \"experience_required\",\n    \"restriction_details\",\n    \"frequency_commitment_details\",\n    \"geo_coords\",\n    \"geo\",\n    \"advertised_areas\",\n    \"minimum_age\",\n    \"maximum_age\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_twitter\",\n    \"organisation_twitter_url\",\n    \"organisation_facebook\",\n    \"organisation_facebook_url\",\n    \"organisation_linkedin\",\n    \"organisation_linkedin_url\",\n    \"organisation_contact_first_name\",\n    \"organisation_contact_last_name\",\n    \"organisation_contact_email\",\n    \"opportunity_contact_first_name\",\n    \"opportunity_contact_last_name\",\n    \"opportunity_contact_email\",\n    \"opportunity_contact_via_organisation\",\n    \"opportunity_contact_via_tsi\",\n    \"tsi_contact_first_name\",\n    \"tsi_contact_last_name\",\n    \"tsi_contact_email\",\n    \"tsi_name\",\n    \"opportunity_contact_phone\",\n    \"support_options\",\n    \"training_details\",\n    \"goodhq_organisation.image_url\",\n    \"og_image\",\n    \"title\",\n    \"travel_expenses\",\n    \"travel_details\",\n    \"activities\",\n    \"activities_slugs\",\n    \"monday_afternoon\",\n    \"monday_evening\",\n    \"monday_morning\",\n    \"tuesday_afternoon\",\n    \"tuesday_evening\",\n    \"tuesday_morning\",\n    \"wednesday_afternoon\",\n    \"wednesday_evening\",\n    \"wednesday_morning\",\n    \"thursday_afternoon\",\n    \"thursday_evening\",\n    \"thursday_morning\",\n    \"friday_afternoon\",\n    \"friday_evening\",\n    \"friday_morning\",\n    \"saturday_afternoon\",\n    \"saturday_evening\",\n    \"saturday_morning\",\n    \"sunday_afternoon\",\n    \"sunday_evening\",\n    \"sunday_morning\",\n    \"availability\",\n    \"availability_slugs\",\n    \"timings_description\",\n    \"taster_available\",\n    \"taster_details\",\n    \"volunteersearch_age_group\",\n    \"volunteersearch_age_group_slugs\",\n    \"volunteersearch_support_option\",\n    \"volunteersearch_support_option_slugs\",\n    \"opportunity_contact_email\",\n    \"weblink\",\n    \"weblink_title\",\n    \"weblink_tooltip\",\n    \"organisation_website\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"should\": [\n        {\n          \"term\": {\n            \"Id\": \"{{@root.request.params.id}}\"\n          }\n        },\n        {\n          \"term\": {\n            \"slug\": \"{{@root.request.params.id}}\"\n          }\n        }\n      ],\n      \"minimum_should_match\": 1\n    }\n  }\n}\n",
        "opportunities_organisation-events-upcoming": "{\n  \"size\": 4,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"milo_ref\",\n    \"available_from\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"title\",\n    \"travel_expenses\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters request.params.query}}\n          ],\n          \"must\": [\n            {\n              \"match\": {\n                \"organisation_id\" : \"{{data.primaryResponse.hits.hits.[0]._source.Id}}\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"sort\": {\n    \"start_date\": \"asc\"\n  }\n}\n\n",
        "opportunities_organisation-opportunities-open": "{\n  \"size\": 4,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"milo_ref\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters request.params.query}}\n          ],\n          \"must\": [\n            {\n              \"match\": {\n                \"organisation_id\" : \"{{data.primaryResponse.hits.hits.[0]._source.Id}}\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  },\n  \"sort\": {\n    \"start_date\": \"asc\"\n  }\n}\n\n",
        "opportunities_organisations": "{\n  \"size\": 0,\n  \"_source\": false,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_do_nothing}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"organisations\": {\n      \"terms\": {\n        \"field\": \"organisation_id\",\n        \"size\": 10000\n      }\n    }\n  }\n}",
        "opportunities_recently-viewed": "{\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"description\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description_html\",\n    \"end_date\",\n    \"expenses_paid\",\n    \"experience_required\",\n    \"frequency_commitment_details\",\n    \"geo_coords\",\n    \"geo\",\n    \"minimum_age\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"organisation_twitter\",\n    \"organisation_twitter_url\",\n    \"organisation_facebook\",\n    \"organisation_facebook_url\",\n    \"organisation_linkedin\",\n    \"organisation_linkedin_url\",\n    \"organisation_contact_first_name\",\n    \"organisation_contact_last_name\",\n    \"organisation_contact_email\",\n    \"support_options\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"monday_afternoon\",\n    \"monday_evening\",\n    \"monday_morning\",\n    \"tuesday_afternoon\",\n    \"tuesday_evening\",\n    \"tuesday_morning\",\n    \"wednesday_afternoon\",\n    \"wednesday_evening\",\n    \"wednesday_morning\",\n    \"thursday_afternoon\",\n    \"thursday_evening\",\n    \"thursday_morning\",\n    \"friday_afternoon\",\n    \"friday_evening\",\n    \"friday_morning\",\n    \"saturday_afternoon\",\n    \"saturday_evening\",\n    \"saturday_morning\",\n    \"sunday_afternoon\",\n    \"sunday_evening\",\n    \"sunday_morning\",\n    \"availability\",\n    \"availability_slugs\",\n    \"taster_available\",\n    \"volunteersearch_age_group\",\n    \"volunteersearch_age_group_slugs\",\n    \"volunteersearch_support_option\",\n    \"volunteersearch_support_option_slugs\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"must\": [\n        {{#if @root.request.cookies.recently_viewed}}\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (split @root.request.cookies.recently_viewed ',')}}}\n      }\n      }\n        {{else}}\n        {\n          \"match_none\": {}\n        }\n        {{/if}}\n      ]\n    }\n  }\n}\n",
        "opportunities_registered-interest-current": "{\n  \"size\": 100,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"title\",\n    \"milo_ref\",\n    \"geo_coords\",\n    \"opportunity_contact_first_name\",\n    \"opportunity_contact_last_name\",\n    \"organisation_website\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"opportunity_contact_email\",\n    \"url\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {\n          \"terms\": {\n            \"Id\": {{{stringify (map @root.data.registeredInterest.items.[0] (getProp \"value\"))}}}\n          }\n        }\n      ]\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.id ~}}\n    {\n      \"_script\": {\n        \"type\": \"number\",\n        \"script\": {\n          \"lang\": \"painless\",\n          \"inline\": \"if(params.target == (doc['Id'].value)) { return 0; } return 1000;\",\n          \"params\": {\n            \"target\": \"{{@root.request.params.query.id}}\"\n          }\n        },\n        \"order\": \"asc\"\n      }\n    }\n    {{else}}\n    {{#if @root.request.params.query.sort ~}}\n    {{#compare @root.request.params.query.sort \"===\" \"newest\" ~}}\n    {\n      \"start_date\": \"desc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"oldest\" ~}}\n    {\n      \"start_date\": \"asc\"\n    }\n    {{else}}\n    {{#compare @root.request.params.query.sort \"===\" \"closing_soon\" ~}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/compare ~}}\n    {{/compare ~}}\n    {{/compare ~}}\n    {{else}}\n    {\n      \"end_date\": \"asc\"\n    }\n    {{/if ~}}\n    {{/if ~}}\n  ]\n}\n",
        "opportunities_related": "{\n  \"size\": 4,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"description\",\n    \"end_date\",\n    \"geo_coords\",\n    \"geo\",\n    \"postcode\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"travel_expenses\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters @root.request.params.query}}\n          ],\n          {{#if @root.data.primaryResponse.hits.hits.[0] ~}}\n          \"should\": [\n            {\n              \"match\": {\n                \"remuneration_type\" : {\n                  \"query\" : \"{{@root.data.primaryResponse.hits.hits.[0]._source.remuneration_type}}\",\n                  \"operator\" : \"and\",\n                  \"zero_terms_query\": \"all\"\n                }\n              }\n            },\n            {\n              \"match\": {\n                \"title\" : {\n                  \"query\" : \"{{@root.data.primaryResponse.hits.hits.[0]._source.title}}\",\n                  \"operator\" : \"and\",\n                  \"zero_terms_query\": \"all\"\n                }\n              }\n            },\n            {\n              \"terms\": {\n                \"themes_slugs\": {{{stringify (arrayify @root.data.primaryResponse.hits.hits.[0]._source.themes_slugs)}}}\n              }\n            },\n            {\n              \"terms\": {\n                \"activities_slugs\": {{{stringify (arrayify @root.data.primaryResponse.hits.hits.[0]._source.activities_slugs)}}}\n              }\n            }\n          ],\n          {{/if ~}}\n          \"must_not\": [\n            {\n              \"term\": {\n                \"Id\": \"{{@root.data.primaryResponse.hits.hits.[0]._source.Id}}\"\n              }\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n",
        "opportunities_search-aggregations": "{\n  \"size\": 0,\n  \"_source\": [\n    \"Id\",\n    \"title\",\n    \"title_slug\",\n    \"organisation_name\",\n    \"closing_date\",\n    \"geo_coords\",\n    \"slug\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ]\n    }\n  },\n  \"aggs\" : {\n    \"admin_district\": {\n      \"terms\": {\n        \"field\": \"geo.codes.admin_district\",\n        \"size\": 3000\n      }\n    }\n  }\n  {{#ifAll @root.request.params.query.lat @root.request.params.query.lon}},\n  \"sort\": {\n    \"_geo_distance\": {\n      \"geo_coords\": {\n        \"lat\": {{@root.request.params.query.lat}},\n        \"lon\": {{@root.request.params.query.lon}}\n      },\n      \"order\": \"asc\",\n      \"unit\": \"mi\",\n      \"mode\": \"min\",\n      \"distance_type\": \"arc\"\n    }\n  }\n  {{/ifAll}}\n}\n",
        "opportunities_search-list": "{\n  \"size\": 10,\n  \"from\": {{multiply (subtract (default @root.request.params.query.page 1) 1) 10}},\n  \"highlight\": {\n    \"fields\": {\n      \"text_bag\": {},\n      \"text_bag_boost\": {}\n    }\n  },\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"title_slug\",\n    \"available_from\",\n    \"themes\",\n    \"themes_slugs\",\n    \"date_last_modified\",\n    \"description\",\n    \"goodhq_organisation.image_url\",\n    \"geo_coords\",\n    \"advertised_areas\",\n    \"geo\",\n    \"postcode\",\n    \"volunteersearch_type\",\n    \"volunteersearch_type_slugs\",\n    \"organisation_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"organisation_aims_and_objectives\",\n    \"title\",\n    \"activities\",\n    \"activities_slugs\",\n    \"opportunity_contact_email\"\n  ],\n  {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        },\n        \"source\": \"if (!doc['geo_coords'].empty) { doc['geo_coords'].arcDistance(params.lat, params.lon) * 0.000621371; }\"\n      }\n    }\n  },\n  {{/ifAll}}\n  \"query\": {\n    \"function_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": [\n            {{>queries_opportunity_common_filters @root.request.params.query}},\n            {{>queries_opportunity_search_filters @root.request.params.query}}\n          ],\n          \"must\": [\n            {{>queries_opportunity_search_must @root.request.params.query}}\n          ],\n          \"should\": [\n            {{>queries_opportunity_search_should @root.request.params.query}}\n          ]\n          {{#ifAll @root.request.params.query.exclude @root.request.params.query.lat @root.request.params.query.lng ~}},\n            \"must_not\": [\n              {\n                \"geo_distance\": {\n                  \"distance\": \"{{default @root.request.params.query.distance \"10\"}}mi\",\n                  \"geo_coords\": {\n                    \"lat\": {{@root.request.params.query.lat}},\n                    \"lon\": {{@root.request.params.query.lng}}\n                  }\n                }\n              }\n            ]\n          {{/ifAll ~}}\n        }\n      },\n      \"boost_mode\": \"multiply\",\n      \"functions\" : [\n        {{!-- If we are sorting there is no need to do scoring --}}\n        {{#unless @root.request.params.query.sort}}\n          {\n            \"{{@root.context.metaData.searchKnobs.dateLastModified.function}}\": {\n              \"date_last_modified\": {\n                \"scale\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.scale}}},\n                \"offset\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.offset}}},\n                \"decay\": {{{stringify @root.context.metaData.searchKnobs.dateLastModified.decay}}}\n              }\n            }\n          }\n          {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}},\n            {\n              \"{{@root.context.metaData.searchKnobs.distance.function}}\": {\n                \"geo_coords\": {\n                  \"origin\": {\n                    \"lat\": {{@root.request.params.query.lat}},\n                    \"lon\": {{@root.request.params.query.lng}}\n                  },\n                  \"scale\": {{{stringify @root.context.metaData.searchKnobs.distance.scale}}},\n                  \"offset\": {{{stringify @root.context.metaData.searchKnobs.distance.offset}}},\n                  \"decay\": {{{stringify @root.context.metaData.searchKnobs.distance.decay}}}\n                }\n              }\n            }\n          {{/ifAll}}\n        {{/unless}}\n      ]\n    }\n  }\n  {{#if @root.request.params.query.sort}},\n  \"sort\": [\n    {{#switch @root.request.params.query.sort}}\n      {{#case \"distance\"}}\n        {{#ifAll @root.request.params.query.lat @root.request.params.query.lng}}\n          {\n            \"_geo_distance\": {\n              \"geo_coords\": {\n                \"lat\": {{@root.request.params.query.lat}},\n                \"lon\": {{@root.request.params.query.lng}}\n              },\n              \"order\": \"asc\",\n              \"unit\": \"mi\",\n              \"mode\": \"min\",\n              \"distance_type\": \"arc\"\n            }\n          }\n        {{/ifAll}}\n      {{/case}}\n      {{#case \"newest\"}}\n        {\n          \"date_last_modified\": \"desc\"\n        }\n      {{/case}}\n      {{#case \"oldest\"}}\n        {\n          \"date_last_modified\": \"asc\"\n        }\n      {{/case}}\n    {{/switch}}\n  ]\n  {{/if}}\n}",
        "opportunities_search-map-areas": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_areas @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "opportunities_search-map-home": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_home @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "opportunities_search-map-locations": "{\n  \"size\": 0,\n  \"_source\": false,\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng @root.request.params.query.distance ~}}\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n        {{#if location ~}},\n        {\n          \"bool\": {\n            \"should\": [\n              {{>queries_opportunity_search_filters_locations @root.request.params.query}}\n              {{>queries_do_nothing}}\n            ],\n            \"minimum_should_match\": {{#if distance}}2{{else}}1{{/if}}\n          }\n        }\n        {{/if ~}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  }\n  {{else}}\n  \"query\": {\n    \"match_none\": {}\n  }\n  {{/ifAll ~}}\n}\n",
        "opportunities_search-map": "{\n  \"size\": 10000,\n  \"_source\": [\n    \"Id\",\n    \"title\",\n    \"title_slug\",\n    \"organisation_name\",\n    \"organisation_id\",\n    \"organisation_name_slug\",\n    \"description\",\n    \"postcode\",\n    \"geo_coords\",\n    \"slug\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}},\n        {{>queries_opportunity_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_opportunity_search_must @root.request.params.query}}\n      ]\n    }\n  },\n  {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n  \"aggs\": {\n    \"geo_search\": {\n      \"geo_distance\": {\n        \"field\": \"geo_coords\",\n        \"origin\": \"{{@root.request.params.query.lat}}, {{@root.request.params.query.lng}}\",\n        \"unit\": \"mi\",\n        \"ranges\": [\n          {\n            \"to\": {{default @root.request.params.query.distance \"1000\"}}\n          },\n          {\n            \"from\": {{default @root.request.params.query.distance \"1000\"}}\n          }\n        ]\n      }\n    },\n    \"all_advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"size\" : 10000\n      }\n    }\n  },\n  \"script_fields\": {\n    \"distance\": {\n      \"script\": {\n        \"inline\": \"def l = new ArrayList(); for (int i=0; i<doc['geo_coords'].values.length; i++) { double dist = Double.MAX_VALUE; double TO_METERS = 6371008.7714D; double TO_RADIANS = Math.PI / 180D; double doc_lat, doc_lon, x1, x2, h1, h2, h, cdist; doc_lat = params._source['geo_coords'][i].lat; doc_lon = params._source['geo_coords'][i].lon; x1 = doc_lat * TO_RADIANS; x2 = params.lat * TO_RADIANS; h1 = 1 - Math.cos(x1 - x2); h2 = 1 - Math.cos((doc_lon - params.lon) * TO_RADIANS); h = h1 + Math.cos(x1) * Math.cos(x2) * h2; cdist = TO_METERS * 2 * Math.asin(Math.min(1, Math.sqrt(h * 0.5))); dist = Math.min(dist, cdist); l.add(dist * 0.001 * 0.621371) } return l;\",\n        \"lang\": \"painless\",\n        \"params\": {\n          \"lat\": {{@root.request.params.query.lat}},\n          \"lon\": {{@root.request.params.query.lng}}\n        }\n      }\n    }\n  },\n  {{/ifAll ~}}\n  \"sort\": [\n    {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n      {\n        \"_geo_distance\": {\n          \"geo_coords\": {\n            \"lat\": {{@root.request.params.query.lat}},\n            \"lon\": {{@root.request.params.query.lng}}\n          },\n          \"order\": \"asc\",\n          \"unit\": \"mi\",\n          \"mode\": \"min\",\n          \"distance_type\": \"arc\"\n        }\n      }\n    {{else}}\n      {\n        \"closing_date\": \"asc\"\n      }\n    {{/ifAll ~}}\n  ]\n}\n",
        "opportunities_types": "{\n  \"size\": 0,\n  \"_source\": false,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_opportunity_common_filters @root.request.params.query}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"volunteersearch_types\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_type\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"volunteersearch_types_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_type_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"themes\": {\n      \"terms\": {\n        \"field\": \"themes\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"themes_slugs\": {\n      \"terms\": {\n        \"field\": \"themes_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"activities\": {\n      \"terms\": {\n        \"field\": \"activities\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"activities_slugs\": {\n      \"terms\": {\n        \"field\": \"activities_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"age_groups\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_age_group\",\n        \"order\": {\n          \"age\": \"asc\"\n        },\n        \"size\": 10000\n      },\n      \"aggs\": {\n         \"age\": {\n            \"max\": {\n               \"field\": \"minimum_age\"\n            }\n         }\n      }\n    },\n    \"age_groups_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_age_group_slugs\",\n        \"order\": {\n          \"age\": \"asc\"\n        },\n        \"size\": 10000\n      },\n      \"aggs\": {\n         \"age\": {\n            \"max\": {\n               \"field\": \"minimum_age\"\n            }\n         }\n      }\n    },\n    \"availability\": {\n      \"terms\": {\n        \"field\": \"availability\",\n        \"size\": 10000\n      }\n    },\n    \"availability_slugs\": {\n      \"terms\": {\n        \"field\": \"availability_slugs\",\n        \"size\": 10000\n      }\n    },\n\n    \"services\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_support_option\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"services_slugs\": {\n      \"terms\": {\n        \"field\": \"volunteersearch_support_option_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"advertised_areas\": {\n      \"terms\": {\n        \"field\": \"advertised_areas\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"advertised_areas_slugs\": {\n      \"terms\": {\n        \"field\": \"advertised_areas_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    }\n  }\n}\n",
        "organisations_organisation": "{\n  \"size\": 1,\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"charity_number\",\n    \"title\",\n    \"title_slug\",\n    \"alias\",\n    \"description\",\n    \"description_html\",\n    \"email\",\n    \"goodhq_organisation\",\n    \"location_street\",\n    \"location_city\",\n    \"location_region\",\n    \"location_postcode\",\n    \"geo\",\n    \"geo_coords\",\n    \"main_activities_global\",\n    \"main_activities_global_slugs\",\n    \"region_group\",\n    \"region_group_slug\",\n    \"phone\",\n    \"postcode\",\n    \"facebook\",\n    \"facebook_url\",\n    \"telephone\",\n    \"twitter\",\n    \"twitter_url\",\n    \"linkedin\",\n    \"linkedin_url\",\n    \"website\",\n    \"website_url\",\n    \"rendered.json_ld\",\n    \"rendered.charity_info\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_organisation_common_filters @root.request.params.query}}\n      ],\n      \"should\": [\n        {\n          \"term\": {\n            \"Id\": \"{{@root.request.params.id}}\"\n          }\n        },\n        {\n          \"term\": {\n            \"slug\": \"{{@root.request.params.id}}\"\n          }\n        }\n      ],\n      \"minimum_should_match\": 1\n    }\n  }\n}\n",
        "organisations_search-list": "{\n  \"size\": 12,\n  \"from\": {{multiply (subtract (default @root.request.params.query.page 1) 1) 12}},\n  \"_source\": [\n    \"Id\",\n    \"slug\",\n    \"charity_number\",\n    \"title\",\n    \"title_slug\",\n    \"alias\",\n    \"description\",\n    \"postcode\",\n    \"og_summary\",\n    \"goodhq_organisation\",\n    \"geo\",\n    \"geo_coords\",\n    \"has_logo\",\n    \"logo_url\",\n    \"facebook\",\n    \"twitter\",\n    \"website\",\n    \"website_url\",\n    \"rendered.json_ld\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_organisation_common_filters @root.request.params.query}},\n        {{>queries_organisation_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_organisation_search_must @root.request.params.query}}\n      ],\n      \"must_not\": [\n        {{>queries_organisation_search_must_not @root.request.params.query}}\n      ],\n      \"should\": [\n        {{>queries_organisation_search_should @root.request.params.query}}\n      ],\n      \"minimum_should_match\": 0\n    }\n  },\n  \"sort\": [\n    {{#if @root.request.params.query.keywords ~}}\n      {{#compare @root.request.params.query.sort \"===\" \"distance\" ~}}\n        {{#ifAll @root.request.params.query.location @root.request.params.query.lat @root.request.params.query.lng ~}}\n          {\n            \"_geo_distance\": {\n              \"geo_coords\": {\n                \"lat\": {{@root.request.params.query.lat}},\n                \"lon\": {{@root.request.params.query.lng}}\n              },\n              \"order\": \"asc\",\n              \"unit\": \"mi\",\n              \"mode\": \"min\",\n              \"distance_type\": \"arc\"\n            }\n          }\n        {{else}}\n          \"_score\"\n        {{/ifAll ~}}\n      {{else}}\n        {{#compare @root.request.params.query.sort \"===\" \"relevance\" ~}}\n          \"_score\",\n        {{/compare ~}}\n      {{/compare ~}}\n    {{else}}\n      {\n        \"date_last_modified\": \"desc\"\n      }\n    {{/if ~}}\n  ]\n}\n",
        "organisations_search-map": "{\n  \"size\": 1000,\n  \"_source\": [\n    \"Id\",\n    \"title\",\n    \"title_slug\",\n    \"description\",\n    \"postcode\",\n    \"geo_coords\",\n    \"slug\"\n  ],\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_organisation_common_filters @root.request.params.query}},\n        {{>queries_organisation_search_filters @root.request.params.query}}\n      ],\n      \"must\": [\n        {{>queries_organisation_search_must @root.request.params.query}}\n      ],\n      \"must_not\": [\n        {{>queries_organisation_search_must_not @root.request.params.query}}\n      ],\n      \"should\": [\n        {{>queries_organisation_search_should @root.request.params.query}}\n      ],\n      \"minimum_should_match\": 0\n    }\n  }\n}\n",
        "organisations_types": "{\n  \"size\": 0,\n  \"_source\": false,\n  \"query\": {\n    \"bool\": {\n      \"filter\": [\n        {{>queries_organisation_common_filters @root.request.params.query}}\n      ]\n    }\n  },\n  \"aggs\": {\n    \"organisation_activities\": {\n      \"terms\": {\n        \"field\": \"main_activities_global\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"organisation_activities_slugs\": {\n      \"terms\": {\n        \"field\": \"main_activities_global_slugs\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"regions\": {\n      \"terms\": {\n        \"field\": \"region_group\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"regions_slugs\": {\n      \"terms\": {\n        \"field\": \"region_group_slug\",\n        \"order\": {\n          \"_term\": \"asc\"\n        },\n        \"size\": 10000\n      }\n    },\n    \"countries\": {\n      \"terms\": {\n        \"field\": \"country\",\n        \"size\": 10000\n      },\n      \"aggs\": {\n        \"regions\": {\n          \"terms\": {\n            \"field\": \"region_group\",\n            \"size\": 10000\n          }\n        },\n        \"regions_slugs\": {\n          \"terms\": {\n            \"field\": \"region_group_slug\",\n            \"size\": 10000\n          }\n        }\n      }\n    }\n  }\n}\n",
        "pages_not-found": "{\n  \"size\": 4,\n  \"_source\": [\n    \"title\",\n    \"rendered.scvo_search_result\"\n  ],\n  \"query\": {\n    {{#if @root.data.primaryResponse.hits.hits.[0] ~}}\n    \"match_none\": {}\n    {{else}}\n    \"query_string\": {\n      \"query\": \"{{{regexReplace (default @root.request.url.path \"\") \"([^a-zA-Z0-9\\s])\" \"gi\" \" \"}}}\",\n      \"default_field\": \"text_bag_boost\",\n      \"default_operator\": \"OR\",\n      \"analyzer\": \"snowball\"\n    }\n    {{/if ~}}\n  }\n}",
        "posts_tfn-latest": "{\n  \"size\": 4,\n  \"_source\": [\n    \"title\",\n    \"url\",\n    \"date_published\",\n    \"image_feature\"\n  ],\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"sort\": {\n    \"date_published\": \"desc\"\n  }\n}",
        "profile-update": "{\n{{#eachJoin (split \"first_name,last_name,location_address,location_city,date_of_birth,location_postcode,email,phone\" \",\") \",\"}}\n{{#if (getProperty @root.request.body this)}}\"{{this}}\" : \"{{getProperty @root.request.body this}}\"{{/if}}\n{{/eachJoin}}\n}\n\n",
        "profile": "{\n  \"first_name\" : \"{{@root.request.body.first_name}}\",\n  \"last_name\" : \"{{@root.request.body.last_name}}\",\n  \"location_address\" : \"{{@root.request.body.location_address}}\",\n  \"location_city\" : \"{{@root.request.body.location_city}}\",\n  \"date_of_birth\" : \"{{@root.request.body.date_of_birth}}\",\n  \"location_postcode\" : \"{{@root.request.body.location_postcode}}\",\n  \"email\" : \"{{@root.request.body.email}}\",\n  \"phone\" : \"{{@root.request.body.phone}}\"\n}"
      }
    },
    "commonTasks": {
      "authNotRequired": {
        "name": "auth",
        "taskModule": "firebaseAuth",
        "config": {
          "tokenPath": "request.cookies.gi_token",
          "cookieName": "gi_cookie",
          "cookieOptions": {
            "maxAge": 1209600000,
            "secure": true,
            "path": "/"
          },
          "appName": "volunteerscotland-search",
          "notAuthenticatedRoute": ""
        }
      },
      "authRequired": {
        "name": "auth",
        "taskModule": "firebaseAuth",
        "config": {
          "tokenPath": "request.cookies.gi_token",
          "cookieName": "gi_cookie",
          "cookieOptions": {
            "maxAge": 1209600000,
            "secure": true,
            "path": "/"
          },
          "appName": "volunteerscotland-search",
          "notAuthenticatedRoute": "sign_in"
        }
      },
      "noAuthOnly": {
        "name": "noAuthOnly",
        "taskModule": "reroute",
        "config": {
          "if": [
            {
              "!=": [
                {
                  "var": "data.auth.uid"
                },
                null
              ]
            },
            "redirect-home",
            null
          ]
        }
      },
      "allNewsletterInfo": {
        "name": "all-newsletter-info",
        "taskModule": "request",
        "config": {
          "optionsTemplates": {
            "result": "{ \"url\": {{{stringify (concat @root.secrets.vs_campaign_monitor.baseURL 'clients/' @root.secrets.vs_campaign_monitor.clientID '/lists.json') }}}, \"auth\": {{{stringify @root.secrets.vs_campaign_monitor.auth}}}, \"json\": true }"
          }
        },
        "renderer": "handlebars"
      },
      "getRawUserSubscriptions": {
        "name": "subscriptions-raw",
        "taskModule": "request",
        "config": {
          "optionsTemplates": {
            "result": "{ \"url\": {{{stringify (concat @root.secrets.vs_campaign_monitor.baseURL 'clients/' @root.secrets.vs_campaign_monitor.clientID '/listsforemail.json?email=' @root.data.auth.email) }}}, \"auth\": {{{stringify @root.secrets.vs_campaign_monitor.auth}}}, \"json\": true }"
          }
        },
        "renderer": "handlebars"
      },
      "userNewsletterSubscriptions": {
        "name": "user-newsletter-subscriptions",
        "taskModule": "render",
        "renderer": "handlebars",
        "config": {
          "template": "[{{#eachJoin (default @root.data.subscriptions-raw.result '[]' ) ','}}{{#compare SubscriberState '===' 'Active'}}\"{{{ListID}}}\"{{/compare}}{{/eachJoin}}]",
          "output": "data",
          "parseJson": true
        }
      },
      "getSubscriptionPostBody": {
        "name": "add-subscription-body",
        "taskModule": "render",
        "renderer": "handlebars",
        "config": {
          "output": "data",
          "template": ">context.metaData.handlebars.templates.newsletter_subscription-post-body",
          "parseJson": true
        }
      },
      "termsMaps": {
        "name": "termsMaps",
        "taskModule": "render",
        "renderer": "handlebars",
        "config": {
          "template": ">context.metaData.handlebars.partials.terms_maps",
          "output": "data",
          "parseJson": true
        }
      },
      "storeProfile": {
        "name": "store-profile",
        "taskModule": "firebaseRtbSet",
        "renderer": "handlebars",
        "config": {
          "appName": "volunteerscotland-search",
          "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-write-profile'}}/profile",
          "setOrUpdate": "set",
          "dataTemplate": ">context.metaData.handlebars.queries.profile"
        }
      },
      "updateProfile": {
        "name": "update-profile",
        "taskModule": "firebaseRtbSet",
        "renderer": "handlebars",
        "config": {
          "appName": "volunteerscotland-search",
          "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-write-profile'}}/profile",
          "setOrUpdate": "update",
          "dataTemplate": ">context.metaData.handlebars.queries.profile-update"
        }
      },
      "opportunitySupplimentary": {
        "name": "opportunitySupplimentary",
        "taskModule": "elasticsearch",
        "config": {
          "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
          "elasticsearchConfig": {
            "apiVersion": "5.6"
          },
          "queryTemplates": [
            {
              "name": "not_found",
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.pages_not-found"
            }
          ]
        },
        "renderer": "handlebars"
      },
      "eventSupplimentary": {
        "name": "eventSupplimentary",
        "taskModule": "elasticsearch",
        "config": {
          "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
          "elasticsearchConfig": {
            "apiVersion": "5.6"
          },
          "queryTemplates": [
            {
              "name": "not_found",
              "index": "web-content-production",
              "type": "milo-volunteering-event",
              "template": ">context.metaData.handlebars.queries.pages_not-found"
            }
          ]
        },
        "renderer": "handlebars"
      },
      "organisationSupplimentary": {
        "name": "organisationSupplimentary",
        "taskModule": "elasticsearch",
        "config": {
          "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
          "elasticsearchConfig": {
            "apiVersion": "5.6"
          },
          "queryTemplates": [
            {
              "name": "types",
              "index": "web-content-production",
              "type": "milo-volunteering-organisation",
              "template": ">context.metaData.handlebars.queries.organisations_types"
            },
            {
              "name": "not_found",
              "index": "web-content-production",
              "type": "milo-volunteering-organisation",
              "template": ">context.metaData.handlebars.queries.pages_not-found"
            }
          ]
        },
        "renderer": "handlebars"
      },
      "organisationsWithOpportunities": {
        "name": "organisationsWithOpportunities",
        "taskModule": "elasticsearch",
        "config": {
          "connectionStringTemplate": "https://readonly:onlyread@2e6b5fd9344d4f8565e7d015d861b240.europe-west3.gcp.cloud.es.io:9243",
          "elasticsearchConfig": {
            "apiVersion": "5.6"
          },
          "queryTemplates": [
            {
              "name": "opportunities",
              "index": "web-content-production",
              "type": "milo-volunteering-opportunity",
              "template": ">context.metaData.handlebars.queries.opportunities_organisations"
            }
          ]
        },
        "renderer": "handlebars"
      },
      "searchesData": {
        "name": "searches",
        "taskModule": "mysql",
        "config": {
          "connectionName": "volunteerscotland_notifications",
          "queryTemplates": {
            "items": ">context.metaData.handlebars.queries.notifications_get-saved-searches"
          }
        },
        "renderer": "handlebars"
      },
      "favouritesData": {
        "name": "favourites",
        "taskModule": "mysql",
        "config": {
          "connectionName": "volunteerscotland_notifications",
          "queryTemplates": {
            "items": ">context.metaData.handlebars.queries.notifications_get-favourites"
          }
        },
        "renderer": "handlebars"
      },
      "registeredInterestData": {
        "name": "registeredInterest",
        "taskModule": "mysql",
        "config": {
          "connectionName": "volunteerscotland_notifications",
          "queryTemplates": {
            "items": ">context.metaData.handlebars.queries.notifications_get-registered-interest"
          }
        },
        "renderer": "handlebars"
      },
      "profileInfoData": {
        "name": "profileInfo",
        "taskModule": "firebaseRtbGet",
        "renderer": "handlebars",
        "config": {
          "appName": "volunteerscotland-search",
          "pathTemplate": "/profile-info/{{default data.auth.uid 'no-such-profile'}}",
          "defaultData": ""
        }
      },
      "widgetAnalytics": {
        "name": "ga",
        "taskModule": "gaSet",
        "renderer": "handlebars",
        "config": {
          "options": {
            "tid": "UA-123427666-2",
            "strictCidFormat": false
          },
          "actions": [
            {
              "action": "pageview",
              "template": ">context.metaData.handlebars.queries.analytics_widget-page-view"
            }
          ]
        }
      }
    }
  }
}